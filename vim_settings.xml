<application>
  <component name="VimSettings">
    <state version="4" enabled="true" />
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/web/DfTaskDefController.java" timestamp="1585901930482">
        <mark key="[" line="72" column="16" />
        <mark key="]" line="75" column="44" />
        <mark key="." line="75" column="44" />
        <mark key="^" line="75" column="44" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/resources/application-local.properties" timestamp="1586740983064">
        <mark key="[" line="17" column="54" />
        <mark key="]" line="9" column="14" />
        <mark key="." line="9" column="0" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/config/ApplicationRunnerImpl.java" timestamp="1586226328890">
        <mark key="[" line="45" column="16" />
        <mark key="]" line="45" column="16" />
        <mark key="." line="45" column="16" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/entity/BusinessInfo.java" timestamp="1586499280377" />
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/web/DistributionTaskController.java" timestamp="1586415094834">
        <mark key="[" line="87" column="64" />
        <mark key="]" line="91" column="17" />
        <mark key="^" line="66" column="0" />
        <mark key="." line="91" column="17" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/web/OverAllFlowController.java" timestamp="1586417685597">
        <mark key="[" line="67" column="0" />
        <mark key="]" line="67" column="0" />
        <mark key="." line="67" column="0" />
      </file>
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/Collect/DistributionDataFillTask.js" timestamp="1586509946188">
        <mark key="[" line="388" column="49" />
        <mark key="]" line="767" column="9" />
        <mark key="." line="767" column="9" />
        <mark key="^" line="767" column="20" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-web/src/models/task.js" timestamp="1586315397345" />
      <file name="$USER_HOME$/data/code/datafill-web/src/components/Panel/TablePanel.js" timestamp="1586509338043" />
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/Collect/DeptUserAudit.js" timestamp="1586746945989" />
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/Design/DefConfigModal.js" timestamp="1585906888030">
        <mark key="[" line="2" column="33" />
        <mark key="]" line="2" column="33" />
        <mark key="." line="2" column="33" />
        <mark key="^" line="6" column="0" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/resources/服务任务.bpmn20.xml" timestamp="1586328275760" />
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/Collect/AllDataFillTask.js" timestamp="1586746780735">
        <mark key="[" line="981" column="19" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/web/DeptUserTaskController.java" timestamp="1586342248324" />
      <file name="$MAVEN_REPOSITORY$/com/yunzainfo/cloud/common/1.0.1-SNAPSHOT/common-1.0.1-20200331.051551-50.jar!/com/yunzainfo/cloud/common/config/CORSConfiguration.class" timestamp="1586420213302" />
      <file name="$USER_HOME$/data/code/flowable-web/config/router.config.js" timestamp="1586315385322" />
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/service/impl/DfTaskServiceImpl.java" timestamp="1586410601518" />
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/mapper/UserMapper.java" timestamp="1586396174693">
        <mark key="[" line="24" column="23" />
        <mark key="]" line="46" column="0" />
        <mark key="." line="46" column="0" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/resources/mapper/TaskDao.xml" timestamp="1574318903028">
        <mark key="[" line="48" column="43" />
        <mark key="]" line="48" column="50" />
        <mark key="." line="48" column="50" />
        <mark key="^" line="48" column="50" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/service/impl/ProcessServiceImpl.java" timestamp="1586747427901">
        <mark key="'" line="1055" column="17" />
        <mark key="[" line="1120" column="57" />
        <mark key="]" line="1120" column="56" />
        <mark key="." line="1120" column="56" />
        <mark key="^" line="1120" column="56" />
      </file>
      <file name="$USER_HOME$/data/code/datafill-web/node_modules/react-jsonschema-form/lib/types.js" timestamp="1586336552869" />
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/config/ResourceServerConfig.java" timestamp="1586509279172">
        <mark key="[" line="57" column="31" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/test/java/com/yunzainfo/cloud/flowable/test/FormServiceTest.java" timestamp="1586333120224">
        <mark key="[" line="42" column="106" />
        <mark key="]" line="41" column="22" />
        <mark key="." line="41" column="22" />
        <mark key="^" line="41" column="22" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/listener/globel/ActivityCompleteListener.java" timestamp="1586502141179">
        <mark key="'" line="294" column="20" />
        <mark key="[" line="255" column="40" />
        <mark key="]" line="255" column="40" />
        <mark key="." line="255" column="40" />
        <mark key="^" line="243" column="37" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/config/ProcessEngineConfig.java" timestamp="1586333147569" />
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/Collect/TaskInfo.js" timestamp="1586745597241">
        <mark key="[" line="254" column="14" />
        <mark key="]" line="268" column="44" />
        <mark key="." line="268" column="44" />
        <mark key="^" line="268" column="44" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/web/DeptauditSummaryController.java" timestamp="1586342295425" />
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/repository/DfTaskAuthConfigRepository.java" timestamp="1585907276580">
        <mark key="[" line="18" column="27" />
        <mark key="]" line="18" column="40" />
        <mark key="." line="18" column="40" />
        <mark key="^" line="18" column="40" />
      </file>
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/FormBuilder/views/DataFillFormView.jsx" timestamp="1586336620246">
        <mark key="[" line="26" column="44" />
      </file>
      <file name="$USER_HOME$/data/code/datafill-web/config/router.config.js" timestamp="1586744023991">
        <mark key="[" line="28" column="27" />
      </file>
      <file name="$MAVEN_REPOSITORY$/org/flowable/flowable-engine/6.4.1/flowable-engine-6.4.1-sources.jar!/org/flowable/engine/ProcessEngineConfiguration.java" timestamp="1586333063854" />
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/web/ProcessController.java" timestamp="1586498783585">
        <mark key="[" line="496" column="9" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/entity/DfTaskDef.java" timestamp="1585903085116">
        <mark key="[" line="42" column="7" />
        <mark key="]" line="67" column="14" />
        <mark key="." line="67" column="0" />
        <mark key="^" line="65" column="13" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/test/java/Test.java" timestamp="1586508346254">
        <mark key="[" line="16" column="0" />
        <mark key="]" line="16" column="0" />
        <mark key="." line="16" column="0" />
        <mark key="^" line="16" column="0" />
      </file>
      <file name="$USER_HOME$/data/code/wj-web/src/utils/Path.js" timestamp="1586426588083" />
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/listener/globel/TaskCreateListener.java" timestamp="1586486110440">
        <mark key="'" line="222" column="8" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/resources/mapper/DeptAuditMapper.xml" timestamp="1586404469765">
        <mark key="[" line="24" column="63" />
        <mark key="]" line="24" column="63" />
        <mark key="." line="24" column="63" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/entity/DfTaskDefAuthConfig.java" timestamp="1586223568557" />
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/Design/DataFillDef.js" timestamp="1585909754572">
        <mark key="[" line="0" column="30" />
        <mark key="]" line="508" column="32" />
        <mark key="." line="508" column="32" />
        <mark key="^" line="508" column="32" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/pojo/DeptUserPojo.java" timestamp="1586226370898">
        <mark key="[" line="21" column="19" />
        <mark key="]" line="21" column="19" />
        <mark key="." line="21" column="19" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/cache/CustomDeploymentCache.java" timestamp="1586307942032" />
      <file name="$USER_HOME$/data/code/conversion/pom.xml" timestamp="1586255842492">
        <mark key="[" line="156" column="4" />
        <mark key="]" line="156" column="4" />
        <mark key="." line="156" column="4" />
        <mark key="^" line="156" column="0" />
      </file>
      <file name="$MAVEN_REPOSITORY$/org/flowable/flowable-engine-common/6.4.1/flowable-engine-common-6.4.1.jar!/org/flowable/common/engine/impl/persistence/deploy/DefaultDeploymentCache.class" timestamp="1586307812838" />
      <file name="$USER_HOME$/data/code/flowable-lwj/flowable-manager-ui/src/pages/leave/leaveList.tsx" timestamp="1574336348672">
        <mark key="[" line="42" column="90" />
        <mark key="]" line="42" column="89" />
        <mark key="." line="42" column="89" />
        <mark key="^" line="42" column="89" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/service/DfTaskService.java" timestamp="1586328652260">
        <mark key="[" line="33" column="43" />
      </file>
      <file name="$USER_HOME$/data/code/conversion/src/test/java/Exc.java" timestamp="1586261979998">
        <mark key="[" line="159" column="12" />
        <mark key="]" line="159" column="12" />
        <mark key="." line="159" column="12" />
        <mark key="^" line="144" column="95" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/util/DfUtil.java" timestamp="1586226479260" />
      <file name="$USER_HOME$/data/code/datafill-web/src/models/dftask.js" timestamp="1586250919453">
        <mark key="[" line="175" column="10" />
      </file>
      <file name="$MAVEN_REPOSITORY$/org/flowable/flowable-engine/6.4.1/flowable-engine-6.4.1-sources.jar!/org/flowable/engine/impl/cfg/ProcessEngineConfigurationImpl.java" timestamp="1586333031233" />
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/istio/istio-svc-dpt.yaml" timestamp="1586499454080">
        <mark key="[" line="40" column="24" />
      </file>
      <file name="$USER_HOME$/data/code/datafill-web/src/utils/Path.js" timestamp="1586743765353">
        <mark key="[" line="9" column="58" />
        <mark key="]" line="2" column="57" />
        <mark key="^" line="2" column="57" />
        <mark key="." line="2" column="57" />
      </file>
      <file name="$USER_HOME$/data/code/cloud/auth-center/src/main/java/com/yunzainfo/cloud/auth/service/impl/BaseMenuServiceImpl.java" timestamp="1586248244450" />
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/Collect/DeptUserTaskFormModal.js" timestamp="1586336608525">
        <mark key="[" line="56" column="25" />
      </file>
      <file name="/Dummy.txt" timestamp="1586504092718">
        <mark key="[" line="0" column="0" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/web/DfTaskController.java" timestamp="1586258542201">
        <mark key="[" line="225" column="49" />
        <mark key="]" line="225" column="49" />
        <mark key="." line="225" column="49" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/mapper/TaskInfoMapper.java" timestamp="1586396007930">
        <mark key="[" line="66" column="51" />
        <mark key="]" line="66" column="51" />
        <mark key="." line="66" column="51" />
      </file>
      <file name="/ProcessServiceImpl.java" timestamp="1586314707868" />
      <file name="$USER_HOME$/data/code/datafill-web/src/services/system/dftask.js" timestamp="1586250877376">
        <mark key="[" line="11" column="30" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/pom.xml" timestamp="1586313682885" />
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/pojo/BusinessInfoPojo.java" timestamp="1586498404711" />
      <file name="$USER_HOME$/data/code/conversion/src/test/java/MapImportHandler.java" timestamp="1586262334570">
        <mark key="[" line="57" column="22" />
        <mark key="]" line="57" column="22" />
        <mark key="." line="57" column="22" />
        <mark key="^" line="62" column="6" />
      </file>
      <file name="$USER_HOME$/data/code/conversion/src/main/java/com/yunzainfo/cloud/conversion/entity/CvsApi.java" timestamp="1586339895028" />
      <file name="$USER_HOME$/data/code/wj-web/src/services/AuthService.js" timestamp="1586426524479" />
      <file name="$USER_HOME$/data/code/datafill/src/main/resources/mapper/TaskInfo.xml" timestamp="1586396026003">
        <mark key="'" line="109" column="7" />
        <mark key="[" line="22" column="108" />
        <mark key="]" line="276" column="16" />
        <mark key="." line="276" column="16" />
        <mark key="^" line="109" column="7" />
      </file>
      <file name="$USER_HOME$/data/code/datafill/src/test/java/Exc.java" timestamp="1586254215749">
        <mark key="[" line="23" column="39" />
        <mark key="]" line="23" column="39" />
        <mark key="." line="23" column="39" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/ServerTaskClass.java" timestamp="1586330087901" />
      <file name="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/service/impl/FormBusinessServiceImpl.java" timestamp="1586331239829" />
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/Collect/DataFillTask.js" timestamp="1586746762592">
        <mark key="[" line="1114" column="19" />
      </file>
      <file name="$USER_HOME$/data/code/flowable-web/src/pages/FormBuilder/ProcessForm.jsx" timestamp="1586245139953" />
      <file name="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/util/ExcelUtil.java" timestamp="1586258694591" />
      <file name="$USER_HOME$/data/code/datafill-web/src/pages/Collect/DeptUserTask.js" timestamp="1586336561294">
        <mark key="[" line="641" column="8" />
        <mark key="]" line="641" column="8" />
        <mark key="." line="641" column="8" />
      </file>
      <file name="$USER_HOME$/data/code/pitcher-piano/src/main/java/com/yunzainfo/cloud/pitcher/piano/service/impl/BuildServiceImpl.java" timestamp="1586339087875" />
    </filemarks>
    <jumps>
      <jump line="347" column="8" filename="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/web/ProcessController.java" />
      <jump line="11" column="1" filename="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/repository/FormBusinessMapRepository.java" />
      <jump line="320" column="31" filename="$USER_HOME$/data/code/flowable-web/src/pages/Flow/FormBusiness.js" />
      <jump line="295" column="17" filename="$USER_HOME$/data/code/flowable-web/src/pages/FormBuilder/ProcessForm.jsx" />
      <jump line="70" column="59" filename="$USER_HOME$/data/code/flowable-web/src/pages/FormBuilder/rjsf-patch/widgets/OfficialDocument.js" />
      <jump line="100" column="13" filename="$USER_HOME$/data/code/datafill/src/main/java/com/yunzainfo/cloud/datafill/service/impl/DfTaskDefServiceImpl.java" />
      <jump line="109" column="7" filename="$USER_HOME$/data/code/datafill/src/main/resources/mapper/TaskInfo.xml" />
      <jump line="20" column="50" filename="$USER_HOME$/data/code/conversion/src/test/java/Exc.java" />
      <jump line="222" column="8" filename="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/listener/globel/TaskCreateListener.java" />
      <jump line="288" column="20" filename="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/listener/globel/ActivityCompleteListener.java" />
      <jump line="1055" column="17" filename="$USER_HOME$/data/code/flowable-engine/flowable/src/main/java/com/yunzainfo/cloud/flowable/service/impl/ProcessServiceImpl.java" />
    </jumps>
    <registers>
      <register name="0" type="4">
        <text>分配权限的填报任务</text>
      </register>
      <register name="1" type="4">
        <text>}else{

                }</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIAo=</text>
      </register>
      <register name="3" type="4">
        <text encoding="base64">ewoKU3RyaW5nQnVpbGRlciBzYj1uZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIHNiLmFwcGVuZCgicGFja2FnZSBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20ud2ViO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5hbGliYWJhLmZhc3Rqc29uLkpTT05PYmplY3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmdpdGh1Yi5wYWdlaGVscGVyLlBhZ2VIZWxwZXI7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmdpdGh1Yi5wYWdlaGVscGVyLlBhZ2VJbmZvO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLmNvbW1vbi5yZXNwb25zZS5oYW9sYW5nUmV0dXJuO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLmNvbW1vbi51dGlsLkV4Y2VsVXRpbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24udXRpbC5QYWdlVXRpbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5Lio7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnNlcnZpY2UuQXR0ZW5kYW5jZVN0YXRpc3RpY3NTZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS51dGlsLkNyaXRlcmlhO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpSW1wbGljaXRQYXJhbTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaUltcGxpY2l0UGFyYW1zO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpT3BlcmF0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGxvbWJvay5leHRlcm4uc2xmNGouU2xmNGo7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5wb2kuaHNzZi51c2VybW9kZWwuKjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuYXBhY2hlLnBvaS5zcy5mb3JtdWxhLmZ1bmN0aW9ucy5UO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuZG9tYWluLlBhZ2VhYmxlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS53ZWIuUGFnZWFibGVEZWZhdWx0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZm9ybWF0LmFubm90YXRpb24uRGF0ZVRpbWVGb3JtYXQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5odHRwLlJlc3BvbnNlRW50aXR5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS5uZXQuVVJMRW5jb2RlcjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnRleHQuUGFyc2VFeGNlcHRpb247XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnV0aWwuRGF0ZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnV0aWwucmVnZXguTWF0Y2hlcjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnV0aWwucmVnZXguUGF0dGVybjtcbiIgKwogICAgICAgICAgICAgICAgIi8qKlxuIiArCiAgICAgICAgICAgICAgICAiQFJlc3RDb250cm9sbGVyXG4iICsKICAgICAgICAgICAgICAgICJAU2xmNGpcbiIgKwogICAgICAgICAgICAgICAgIi8vQFJlcXVlc3RNYXBwaW5nKFwiL2F0dGVuZGFuY2VcIilcbiIgKwogICAgICAgICAgICAgICAgInB1YmxpYyBjbGFzcyBBdHRlbmRhbmNlU3RhdGlzdGljc0NvbnRyb2xsZXIge1xuIiArCiAgICAgICAgICAgICAgICAiQEF1dG93aXJlZFxuIiArCiAgICAgICAgICAgICAgICAicHJpdmF0ZSBBdHRlbmRhbmNlU3RhdGlzdGljc1NlcnZpY2Ugc2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDogIPli6Tnu5/orqFcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEByZXR1cm4gdGhlIFJlc3BvbnNlRW50aXR5PD8+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5p+l6K+i6ICD5Yuk57uf6K6h5bim5p2h5Lu2562b6YCJXCIsbm90ZXMgPSBcIuWPguaVsCAgIOW8gOWni+aXtumXtHN0YXJ0LOe7k+adn+aXtumXtGVuZCwg54+t57qn5Li76ZSuY2xhc3NJZCwg5LiT5Lia5Li76ZSubWFqb3JJZO+8jOezu+S4u+mUrmRlcHRJZFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZyh2YWx1ZSA9IFwiL3F1ZXJ5TGlzdEZvclBhZ2VcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGZpbmRBTExIb21lV29yayhAUGFnZWFibGVEZWZhdWx0KHZhbHVlID0gMjApIFBhZ2VhYmxlIHBhZ2VyLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCkgdGhyb3dzIFBhcnNlRXhjZXB0aW9uIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgSlNPTk9iamVjdCBwYXJhbSA9IFBhZ2VVdGlsLmdldFBhcmFtKHBhZ2VyKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgRGF0ZSBzdGFydCA9IHBhcmFtLmdldERhdGUoXCJzdGFydFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgRGF0ZSBlbmQgPSBwYXJhbS5nZXREYXRlKFwiZW5kXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgY2xhc3NJZCA9IHBhcmFtLmdldFN0cmluZyhcImNsYXNzSWRcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyBtYWpvcklkID0gcGFyYW0uZ2V0U3RyaW5nKFwibWFqb3JJZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGRlcHRJZCA9IHBhcmFtLmdldFN0cmluZyhcImRlcHRJZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGNvdXJzZU5hbWUgPSBwYXJhbS5nZXRTdHJpbmcoXCJjb3Vyc2VOYW1lXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgdGVhY2hlck5hbWUgPSBwYXJhbS5nZXRTdHJpbmcoXCJ0ZWFjaGVyTmFtZVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIHNlY3Rpb24gPSBwYXJhbS5nZXRTdHJpbmcoXCJzZWN0aW9uXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBDcml0ZXJpYSBjcml0ZXJpYSA9IG5ldyBDcml0ZXJpYSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhjb3Vyc2VOYW1lKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiY291cnNlTmFtZVwiLCBjb3Vyc2VOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayh0ZWFjaGVyTmFtZSkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInRlYWNoZXJOYW1lXCIsIHRlYWNoZXJOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhzZWN0aW9uKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgLy9jcml0ZXJpYS5wdXQoXCJzZWN0aW9uXCIsIHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTGlzdDxTdHJpbmc+IGRpZ2l0TGlzdCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgUGF0dGVybiBwID0gUGF0dGVybi5jb21waWxlKFwiW14wLTldXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTWF0Y2hlciBtID0gcC5tYXRjaGVyKHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIHJlc3VsdCA9IG0ucmVwbGFjZUFsbChcIlwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aCgpOyBpKyspIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBkaWdpdExpc3QuYWRkKHJlc3VsdC5zdWJzdHJpbmcoaSwgaSArIDEpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25TdGFydFwiLCBJbnRlZ2VyLnBhcnNlSW50KGRpZ2l0TGlzdC5nZXQoMCkpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25MZW5ndGhcIiwgZGlnaXRMaXN0LnNpemUoKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsoY2xhc3NJZCkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImNsYXNzSWRcIiwgY2xhc3NJZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsoZGVwdElkKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiZGVwdElkXCIsIGRlcHRJZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsobWFqb3JJZCkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcIm1ham9ySWRcIiwgbWFqb3JJZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoc3RhcnQhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic3RhcnRcIiwgc3RhcnQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICkuYXBwZW5kKAogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoZW5kIT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImVuZFwiLCBlbmQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VhYmxlIGJ1aWxkID0gUGFnZVV0aWwuYnVpbGQocmVxdWVzdCwgcGFnZXIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBQYWdlSGVscGVyLnN0YXJ0UGFnZShidWlsZC5nZXRQYWdlTnVtYmVyKCksYnVpbGQuZ2V0UGFnZVNpemUoKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIExpc3Q8QXR0ZW5kYW5jZVN0YXRpc3RpY3M+IGRhdGEgPSBzZXJ2aWNlLnF1ZXJ5TGlzdEZvclBhZ2UoY3JpdGVyaWEpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBQYWdlSW5mbzxBdHRlbmRhbmNlU3RhdGlzdGljcz4gbGlzdCA9IG5ldyBQYWdlSW5mbzw+KGRhdGEpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gUmVzcG9uc2VFbnRpdHkub2sobGlzdCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5p+l6K+i5a2m55Sf6ICD5Yuk6K+m5oOFXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFBvc3RNYXBwaW5nKHZhbHVlID0gXCIvc3R1ZGVudC9xdWVyeUxpc3RGb3JQYWdlXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBmaW5kU3R1ZGVudChAUGFnZWFibGVEZWZhdWx0KHZhbHVlID0gMjApIFBhZ2VhYmxlIHBhZ2VyLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCkgdGhyb3dzIFBhcnNlRXhjZXB0aW9uIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgSlNPTk9iamVjdCBwYXJhbSA9IFBhZ2VVdGlsLmdldFBhcmFtKHBhZ2VyKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGRhdGUgPSBwYXJhbS5nZXRTdHJpbmcoXCJkYXRlXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgc2lnbkJhdGNoPXBhcmFtLmdldFN0cmluZyhcInNpZ25CYXRjaFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIHNlY3Rpb24gPSBwYXJhbS5nZXRTdHJpbmcoXCJzZWN0aW9uXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgdGVhY2hlck5hbWUgPSBwYXJhbS5nZXRTdHJpbmcoXCJ0ZWFjaGVyTmFtZVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGNvdXJzZU5hbWUgPSBwYXJhbS5nZXRTdHJpbmcoXCJjb3Vyc2VOYW1lXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIENyaXRlcmlhIGNyaXRlcmlhID0gbmV3IENyaXRlcmlhKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKGNvdXJzZU5hbWUpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJjb3Vyc2VOYW1lXCIsIGNvdXJzZU5hbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKHRlYWNoZXJOYW1lKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwidGVhY2hlck5hbWVcIiwgdGVhY2hlck5hbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKHNlY3Rpb24pKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAvL2NyaXRlcmlhLnB1dChcInNlY3Rpb25cIiwgc2VjdGlvbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMaXN0PFN0cmluZz4gZGlnaXRMaXN0ID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBQYXR0ZXJuIHAgPSBQYXR0ZXJuLmNvbXBpbGUoXCJbXjAtOV1cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBNYXRjaGVyIG0gPSBwLm1hdGNoZXIoc2VjdGlvbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBTdHJpbmcgcmVzdWx0ID0gbS5yZXBsYWNlQWxsKFwiXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoKCk7IGkrKykge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGRpZ2l0TGlzdC5hZGQocmVzdWx0LnN1YnN0cmluZyhpLCBpICsgMSkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic2VjdGlvblN0YXJ0XCIsIEludGVnZXIucGFyc2VJbnQoZGlnaXRMaXN0LmdldCgwKSkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic2VjdGlvbkxlbmd0aFwiLCBkaWdpdExpc3Quc2l6ZSgpKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90Qmxhbmsoc2lnbkJhdGNoKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic2lnbkJhdGNoXCIsIHNpZ25CYXRjaCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoZGF0ZSE9bnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJkYXRlXCIsZGF0ZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgUGFnZWFibGUgYnVpbGQgPSBQYWdlVXRpbC5idWlsZChyZXF1ZXN0LCBwYWdlcik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VIZWxwZXIuc3RhcnRQYWdlKGJ1aWxkLmdldFBhZ2VOdW1iZXIoKSxidWlsZC5nZXRQYWdlU2l6ZSgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgTGlzdDxTdHVkZW50RGV0YWlsU2lnbj4gZGF0YSA9IHNlcnZpY2Uuc2VsZWN0U3R1ZGVudERldGFpbChjcml0ZXJpYSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VJbmZvPFN0dWRlbnREZXRhaWxTaWduPiBsaXN0ID0gbmV3IFBhZ2VJbmZvPD4oZGF0YSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vayhsaXN0KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5a+85Ye65pWw5o2uXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEdldE1hcHBpbmcodmFsdWUgPSBcIi9TdHVkZW50RXhjZWxEb3dubG9hZHNcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpSW1wbGljaXRQYXJhbXMoe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwiZGF0ZVwiLCB2YWx1ZSA9IFwi5byA5aeL5pe26Ze0XCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJTdHJpbmdcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInNpZ25CaXRjaFwiICx2YWx1ZSA9IFwi57uT5p2f5pe26Ze0XCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJTdHJpbmdcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInNlY3Rpb25cIiwgdmFsdWUgPSBcIuW8gOWni+aXtumXtFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJ0ZWFjaGVyTmFtZVwiICx2YWx1ZSA9IFwi57uT5p2f5pe26Ze0XCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJTdHJpbmdcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcImNvdXJzZU5hbWVcIiwgdmFsdWUgPSBcIuW8gOWni+aXtumXtFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9KVxuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyB2b2lkIGRvd25sb2FkU3R1ZGVudChAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBkYXRlLEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNpZ25CaXRjaCxAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWN0aW9uLEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHRlYWNoZXJOYW1lLEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIGNvdXJzZU5hbWUsSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFBhcnNlRXhjZXB0aW9uIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoZGF0ZSE9bnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBDcml0ZXJpYSBjcml0ZXJpYSA9IG5ldyBDcml0ZXJpYSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsoY291cnNlTmFtZSkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJjb3Vyc2VOYW1lXCIsIGNvdXJzZU5hbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsodGVhY2hlck5hbWUpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwidGVhY2hlck5hbWVcIiwgdGVhY2hlck5hbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90Qmxhbmsoc2VjdGlvbikmJnNlY3Rpb24hPW51bGwpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAvL2NyaXRlcmlhLnB1dChcInNlY3Rpb25cIiwgc2VjdGlvbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgTGlzdDxTdHJpbmc+IGRpZ2l0TGlzdCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIFBhdHRlcm4gcCA9IFBhdHRlcm4uY29tcGlsZShcIlteMC05XVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBNYXRjaGVyIG0gPSBwLm1hdGNoZXIoc2VjdGlvbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgU3RyaW5nIHJlc3VsdCA9IG0ucmVwbGFjZUFsbChcIlwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIGRpZ2l0TGlzdC5hZGQocmVzdWx0LnN1YnN0cmluZyhpLCBpICsgMSkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJzZWN0aW9uU3RhcnRcIiwgSW50ZWdlci5wYXJzZUludChkaWdpdExpc3QuZ2V0KDApKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic2VjdGlvbkxlbmd0aFwiLCBkaWdpdExpc3Quc2l6ZSgpKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhzaWduQml0Y2gpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic2lnbkJpdGNoXCIsIHNpZ25CaXRjaCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZihkYXRlIT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJkYXRlXCIsZGF0ZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExpc3Q8U3R1ZGVudERldGFpbFNpZ24+IGRhdGEgPSBzZXJ2aWNlLnNlbGVjdFN0dWRlbnREZXRhaWwoY3JpdGVyaWEpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBTdHJpbmcgZmlsZU5hbWUgPSBcInVzZXJpbmZcIitcIi54bHNcIjtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEV4Y2VsVXRpbC5leHBvcnRFeGNlbChkYXRhLG51bGwsXCIxMTFcIixTdHVkZW50RGV0YWlsU2lnbi5jbGFzcyxmaWxlTmFtZSxyZXNwb25zZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDogIPli6Tnu5/orqHmgLvmlbDmja5cbiIgKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAiICAgICAqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLogIPli6Tnu5/orqHmgLvmlbDmja5cIixub3RlcyA9IFwi5Y+C5pWwICAg5byA5aeL5pe26Ze0c3RhcnQs57uT5p2f5pe26Ze0ZW5kLCDnj63nuqfkuLvplK5jbGFzc0lkLCDkuJPkuJrkuLvplK5tYWpvcklk77yM57O75Li76ZSuZGVwdElkXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFBvc3RNYXBwaW5nKHZhbHVlID0gXCIvYXR0ZW5kYW5jZVN1bVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtcyh7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJzdGFydFwiLCB2YWx1ZSA9IFwi5byA5aeL5pe26Ze0XCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJEYXRlXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJlbmRcIiAsdmFsdWUgPSBcIue7k+adn+aXtumXtFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiZGF0ZVwiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwiY2xhc3NJZFwiICx2YWx1ZSA9IFwi54+t57qnaWRcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcImRhdGVcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcImRlcHRJZFwiICx2YWx1ZSA9IFwi6YOo6ZeoaWRcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcImRhdGVcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcIm1ham9ySWRcIiAsdmFsdWUgPSBcIuS4k+S4mmlkXCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJkYXRlXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJ5ZWFyXCIgLHZhbHVlID0gXCLlubTnuqdcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcInN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwiY291cnNlTmFtZVwiICx2YWx1ZSA9IFwi6K++56iL5ZCN56ewXCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJzdHJpbmdcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInRlYWNoZXJOYW1lXCIgLHZhbHVlID0gXCLmlZnluIjlkI3np7BcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcInN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwic2VjdGlvblwiICx2YWx1ZSA9IFwi6IqC5qyhXCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJzdHJpbmdcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH0pXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBhdHRlbmRhbmNlU3VtKEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSkgQERhdGVUaW1lRm9ybWF0KHBhdHRlcm49XCJ5eXl5LU1NLWRkXCIpRGF0ZSBzdGFydCxAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpQERhdGVUaW1lRm9ybWF0KHBhdHRlcm49XCJ5eXl5LU1NLWRkXCIpIERhdGUgZW5kLEBSZXF1ZXN0UGFyYW0gKHJlcXVpcmVkID0gZmFsc2UpU3RyaW5nIGNsYXNzSWQsQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgZGVwdElkLEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIG1ham9ySWQsQFJlcXVlc3RQYXJhbSAocmVxdWlyZWQgPSBmYWxzZSlTdHJpbmcgY291cnNlTmFtZSxAUmVxdWVzdFBhcmFtIChyZXF1aXJlZCA9IGZhbHNlKVN0cmluZyB0ZWFjaGVyTmFtZSxAUmVxdWVzdFBhcmFtIChyZXF1aXJlZCA9IGZhbHNlKVN0cmluZyBzZWN0aW9uKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIENyaXRlcmlhIGNyaXRlcmlhID0gbmV3IENyaXRlcmlhKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKHN0YXJ0IT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInN0YXJ0XCIsIHN0YXJ0KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZihlbmQhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiZW5kXCIsIGVuZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsoY291cnNlTmFtZSkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImNvdXJzZU5hbWVcIiwgY291cnNlTmFtZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsodGVhY2hlck5hbWUpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJ0ZWFjaGVyTmFtZVwiLCB0ZWFjaGVyTmFtZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90Qmxhbmsoc2VjdGlvbikpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIC8vY3JpdGVyaWEucHV0KFwic2VjdGlvblwiLCBzZWN0aW9uKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExpc3Q8U3RyaW5nPiBkaWdpdExpc3QgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIFBhdHRlcm4gcCA9IFBhdHRlcm4uY29tcGlsZShcIlteMC05XVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIE1hdGNoZXIgbSA9IHAubWF0Y2hlcihzZWN0aW9uKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIFN0cmluZyByZXN1bHQgPSBtLnJlcGxhY2VBbGwoXCJcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgZGlnaXRMaXN0LmFkZChyZXN1bHQuc3Vic3RyaW5nKGksIGkgKyAxKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJzZWN0aW9uU3RhcnRcIiwgSW50ZWdlci5wYXJzZUludChkaWdpdExpc3QuZ2V0KDApKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJzZWN0aW9uTGVuZ3RoXCIsIGRpZ2l0TGlzdC5zaXplKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhjbGFzc0lkKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiY2xhc3NJZFwiLCBjbGFzc0lkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhkZXB0SWQpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJkZXB0SWRcIiwgZGVwdElkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhtYWpvcklkKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwibWFqb3JJZFwiLCBtYWpvcklkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBBdHRlbmRhbmNlU3VtIGRhdGEgPSBzZXJ2aWNlLmF0dGVuZGFuY2VTdW0oY3JpdGVyaWEpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZihcIiVcIi5lcXVhbHMoZGF0YS5nZXRQZXJjZW50YWdlKCkpKXtkYXRhLnNldFBlcmNlbnRhZ2UoXCIwJVwiKTt9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsXCLnu5/orqHkv6Hmga9cIixkYXRhKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICrlubTku73kuIvmi4lcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEByZXR1cm4gdGhlIFJlc3BvbnNlRW50aXR5PD8+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5bm05Lu95LiL5ouJXCIsbm90ZXMgPSBcIuWPguaVsCAgIOW8gOWni+aXtumXtHN0YXJ0LOe7k+adn+aXtumXtGVuZFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZyh2YWx1ZSA9IFwiL3llYXJcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaUltcGxpY2l0UGFyYW1zKHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInN0YXJ0XCIsIHZhbHVlID0gXCLlvIDlp4vml7bpl7RcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcIkRhdGVcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcImVuZFwiICx2YWx1ZSA9IFwi57uT5p2f5pe26Ze0XCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJkYXRlXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9KVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBhdHRlbmRhbmNlU3VtKEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSlARGF0ZVRpbWVGb3JtYXQocGF0dGVybj1cInl5eXktTU0tZGRcIikgIERhdGUgc3RhcnQsQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKUBEYXRlVGltZUZvcm1hdChwYXR0ZXJuPVwieXl5eS1NTS1kZFwiKSBEYXRlIGVuZCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBDcml0ZXJpYSBjcml0ZXJpYSA9IG5ldyBDcml0ZXJpYSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZihzdGFydCE9bnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJzdGFydFwiLCBzdGFydCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoZW5kIT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImVuZFwiLCBlbmQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIExpc3Q8Q29tYm8+IGNvbWJvcyA9IHNlcnZpY2Uuc2VsZWN0WWVhcihjcml0ZXJpYSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsXCLlubTku73kuIvmi4lcIixjb21ib3MpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKuiAg+WLpOWbvlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLogIPli6Tlm75cIixub3RlcyA9IFwi5Y+C5pWwICAg5byA5aeL5pe26Ze0c3RhcnQs57uT5p2f5pe26Ze0ZW5k77yM5bm057qnIHllYXJcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpSW1wbGljaXRQYXJhbXMoe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwic3RhcnRcIiwgdmFsdWUgPSBcIuW8gOWni+aXtumXtFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiRGF0ZVwiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwiZW5kXCIgLHZhbHVlID0gXCLnu5PmnZ/ml7bpl7RcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcImRhdGVcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInllYXJcIiAsdmFsdWUgPSBcIuW5tOe6p1wiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwic3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9KVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZyh2YWx1ZSA9IFwiL2NoYXJ0XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBjaGFydChAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpQERhdGVUaW1lRm9ybWF0KHBhdHRlcm49XCJ5eXl5LU1NLWRkXCIpICBEYXRlIHN0YXJ0LCBAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpQERhdGVUaW1lRm9ybWF0KHBhdHRlcm49XCJ5eXl5LU1NLWRkXCIpICBEYXRlIGVuZCwgQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgeWVhcikge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBDcml0ZXJpYSBjcml0ZXJpYSA9IG5ldyBDcml0ZXJpYSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZihzdGFydCE9bnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJzdGFydFwiLCBzdGFydCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoZW5kIT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImVuZFwiLCBlbmQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKHllYXIhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwieWVhclwiLCB5ZWFyKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBMaXN0PENoYXJ0RGF0YT4gZGF0YSA9IHNlcnZpY2UuY2hhcnQoY3JpdGVyaWEpO1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgIENoYXJ0RGF0YSBjaGFydERhdGEgPSBkYXRhLmdldCgwKTtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICBpZihcIuWFqOagoVwiLmVxdWFscyhjaGFydERhdGEuZ2V0RmllbGQoKSkmJlwiJVwiLmVxdWFscyhjaGFydERhdGEuZ2V0VmFsdWUoKSkpe1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICBkYXRhLmNsZWFyKCk7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgfWVsc2V7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgIC8v55m+5YiG5q+U6auY55qE5Zyo5YmN6Z2iXG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgIGRhdGEuc29ydCgoYSwgYikgLT4ge1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICAgICAgU3RyaW5nIGFwID0gYS5nZXRWYWx1ZSgpLnN1YnN0cmluZygwLCBhLmdldFZhbHVlKCkubGVuZ3RoKCkgLSAxKTtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgICAgIFN0cmluZyBicCA9IGIuZ2V0VmFsdWUoKS5zdWJzdHJpbmcoMCwgYi5nZXRWYWx1ZSgpLmxlbmd0aCgpIC0gMSk7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICBpZiAoRG91YmxlLnZhbHVlT2YoYXApID4gRG91YmxlLnZhbHVlT2YoYnApKSB7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChEb3VibGUudmFsdWVPZihhcCkgPCBEb3VibGUudmFsdWVPZihicCkpIHtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgICAgIHJldHVybiAwO1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICB9KTtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgLy/lhajmoKHnmoTlnKjliY3pnaJcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgZGF0YS5zb3J0KChhLCBiKSAtPiB7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICBpZiAoYS5nZXRGaWVsZCgpLmVxdWFscyhcIuWFqOagoVwiKSkge1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgIH0pO1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLFwi6ICD5Yuk5Zu+5pWw5o2uXCIsZGF0YSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIvLyAgICBmdW5jdGlvbiBkb3dubG9hZGZpbGUoKXtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj1cIi9Vc2VyRXhjZWxEb3dubG9hZHNcIjtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLlr7zlh7rmlbDmja5cIixub3RlcyA9IFwi5Y+C5pWwICAg5byA5aeL5pe26Ze0c3RhcnQs57uT5p2f5pe26Ze0ZW5kLCDnj63nuqfkuLvplK5jbGFzc0lkLCDkuJPkuJrkuLvplK5tYWpvcklk77yM57O75Li76ZSuZGVwdElkXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFBvc3RNYXBwaW5nKHZhbHVlID0gXCIvVXNlckV4Y2VsRG93bmxvYWRzXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyB2b2lkIGRvd25sb2FkQWxsQ2xhc3NtYXRlKEBQYWdlYWJsZURlZmF1bHQodmFsdWUgPSAyMCkgUGFnZWFibGUgcGFnZXIsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgUGFyc2VFeGNlcHRpb24ge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBKU09OT2JqZWN0IHBhcmFtID0gUGFnZVV0aWwuZ2V0UGFyYW0ocGFnZXIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBEYXRlIHN0YXJ0ID0gcGFyYW0uZ2V0RGF0ZShcInN0YXJ0XCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBEYXRlIGVuZCA9IHBhcmFtLmdldERhdGUoXCJlbmRcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyBjbGFzc0lkID0gcGFyYW0uZ2V0U3RyaW5nKFwiY2xhc3NJZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIG1ham9ySWQgPSBwYXJhbS5nZXRTdHJpbmcoXCJtYWpvcklkXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgZGVwdElkID0gcGFyYW0uZ2V0U3RyaW5nKFwiZGVwdElkXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgY291cnNlTmFtZSA9IHBhcmFtLmdldFN0cmluZyhcImNvdXJzZU5hbWVcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyB0ZWFjaGVyTmFtZSA9IHBhcmFtLmdldFN0cmluZyhcInRlYWNoZXJOYW1lXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgc2VjdGlvbiA9IHBhcmFtLmdldFN0cmluZyhcInNlY3Rpb25cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIENyaXRlcmlhIGNyaXRlcmlhID0gbmV3IENyaXRlcmlhKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKGNvdXJzZU5hbWUpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJjb3Vyc2VOYW1lXCIsIGNvdXJzZU5hbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKHRlYWNoZXJOYW1lKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwidGVhY2hlck5hbWVcIiwgdGVhY2hlck5hbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKHNlY3Rpb24pKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAvL2NyaXRlcmlhLnB1dChcInNlY3Rpb25cIiwgc2VjdGlvbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMaXN0PFN0cmluZz4gZGlnaXRMaXN0ID0gbmV3IEFycmF5TGlzdDxTdHJpbmc+KCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBQYXR0ZXJuIHAgPSBQYXR0ZXJuLmNvbXBpbGUoXCJbXjAtOV1cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBNYXRjaGVyIG0gPSBwLm1hdGNoZXIoc2VjdGlvbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBTdHJpbmcgcmVzdWx0ID0gbS5yZXBsYWNlQWxsKFwiXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoKCk7IGkrKykge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGRpZ2l0TGlzdC5hZGQocmVzdWx0LnN1YnN0cmluZyhpLCBpICsgMSkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiApLmFwcGVuZCgKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJzZWN0aW9uU3RhcnRcIiwgSW50ZWdlci5wYXJzZUludChkaWdpdExpc3QuZ2V0KDApKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJzZWN0aW9uTGVuZ3RoXCIsIGRpZ2l0TGlzdC5zaXplKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhjbGFzc0lkKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiY2xhc3NJZFwiLCBjbGFzc0lkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhkZXB0SWQpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJkZXB0SWRcIiwgZGVwdElkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhtYWpvcklkKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwibWFqb3JJZFwiLCBtYWpvcklkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZihzdGFydCE9bnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJzdGFydFwiLCBzdGFydCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoZW5kIT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImVuZFwiLCBlbmQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgSFNTRldvcmtib29rIHdvcmtib29rID0gbmV3IEhTU0ZXb3JrYm9vaygpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBIU1NGU2hlZXQgc2hlZXQgPSB3b3JrYm9vay5jcmVhdGVTaGVldChcIuS/oeaBr+ihqFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgTGlzdDxBdHRlbmRhbmNlU3RhdGlzdGljcz4gZGF0YSA9IHNlcnZpY2UucXVlcnlMaXN0Rm9yUGFnZShjcml0ZXJpYSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyBmaWxlTmFtZSA9IFwidXNlcmluZlwiICArIFwiLnhsc1wiOy8v6K6+572u6KaB5a+85Ye655qE5paH5Lu255qE5ZCN5a2XXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIC8v5paw5aKe5pWw5o2u6KGM77yM5bm25LiU6K6+572u5Y2V5YWD5qC85pWw5o2uXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaW50IHJvd051bSA9IDE7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nW10gaGVhZGVycyA9IHsgXCLlrablj7dcIiwgXCLlp5PlkI1cIiwgXCLouqvku73nsbvlnotcIiwgXCLnmbvlvZXlr4bnoIFcIn07XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIC8vaGVhZGVyc+ihqOekumV4Y2Vs6KGo5Lit56ys5LiA6KGM55qE6KGo5aS0XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgSFNTRlJvdyByb3cgPSBzaGVldC5jcmVhdGVSb3coMCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIC8v5ZyoZXhjZWzooajkuK3mt7vliqDooajlpLRcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBmb3IoaW50IGk9MDtpPGhlYWRlcnMubGVuZ3RoO2krKyl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBIU1NGQ2VsbCBjZWxsID0gcm93LmNyZWF0ZUNlbGwoaSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBIU1NGUmljaFRleHRTdHJpbmcgdGV4dCA9IG5ldyBIU1NGUmljaFRleHRTdHJpbmcoaGVhZGVyc1tpXSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjZWxsLnNldENlbGxWYWx1ZSh0ZXh0KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIC8v5Zyo6KGo5Lit5a2Y5pS+5p+l6K+i5Yiw55qE5pWw5o2u5pS+5YWl5a+55bqU55qE5YiXXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGZvciAoQXR0ZW5kYW5jZVN0YXRpc3RpY3MgYXR0ZW5kYW5jZVN0YXRpc3RpY3MgOiBkYXRhKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBIU1NGUm93IHJvdzEgPSBzaGVldC5jcmVhdGVSb3cocm93TnVtKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJvdzEuY3JlYXRlQ2VsbCgwKS5zZXRDZWxsVmFsdWUoYXR0ZW5kYW5jZVN0YXRpc3RpY3MuZ2V0RGVwdE5hbWUoKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByb3cxLmNyZWF0ZUNlbGwoMSkuc2V0Q2VsbFZhbHVlKGF0dGVuZGFuY2VTdGF0aXN0aWNzLmdldENvdXJzZU5hbWUoKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByb3cxLmNyZWF0ZUNlbGwoMikuc2V0Q2VsbFZhbHVlKGF0dGVuZGFuY2VTdGF0aXN0aWNzLmdldFRlYWNoZXJOYW1lKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcm93MS5jcmVhdGVDZWxsKDMpLnNldENlbGxWYWx1ZShhdHRlbmRhbmNlU3RhdGlzdGljcy5nZXRBZGRyZXNzTmFtZSgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJvdzEuY3JlYXRlQ2VsbCg0KS5zZXRDZWxsVmFsdWUoYXR0ZW5kYW5jZVN0YXRpc3RpY3MuZ2V0RGF0ZSgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJvdzEuY3JlYXRlQ2VsbCg1KS5zZXRDZWxsVmFsdWUoYXR0ZW5kYW5jZVN0YXRpc3RpY3MuZ2V0U2VjdGlvbigpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJvdzEuY3JlYXRlQ2VsbCg2KS5zZXRDZWxsVmFsdWUoYXR0ZW5kYW5jZVN0YXRpc3RpY3MuZ2V0R3JhZGVOYW1lKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcm93TnVtKys7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5e1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmVzcG9uc2Uuc2V0Q29udGVudFR5cGUoXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXNwb25zZS5zZXRIZWFkZXIoXCJDb250ZW50LWRpc3Bvc2l0aW9uXCIsIFwiYXR0YWNobWVudDtmaWxlbmFtZT1cIiArIGZpbGVOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJlc3BvbnNlLmZsdXNoQnVmZmVyKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB3b3JrYm9vay53cml0ZShyZXNwb25zZS5nZXRPdXRwdXRTdHJlYW0oKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1jYXRjaCAoRXhjZXB0aW9uIGUpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAifVxuIiArCiAgICAgICAgICAgICAgICAicGFja2FnZSBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20ud2ViO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmFsaWJhYmEuZmFzdGpzb24uSlNPTk9iamVjdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uZ2l0aHViLnBhZ2VoZWxwZXIuUGFnZUhlbHBlcjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uZ2l0aHViLnBhZ2VoZWxwZXIuUGFnZUluZm87XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnJlc3BvbnNlLmhhb2xhbmdSZXR1cm47XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnV0aWwuRXhjZWxVdGlsO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLmNvbW1vbi51dGlsLlBhZ2VVdGlsO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5lbnRpdHkuKjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uc2VydmljZS5BdHRlbmRhbmNlU3RhdGlzdGljc05ld1NlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnNlcnZpY2UuQXR0ZW5kYW5jZVN0YXRpc3RpY3NTZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS51dGlsLkNyaXRlcmlhO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpSW1wbGljaXRQYXJhbTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaUltcGxpY2l0UGFyYW1zO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpT3BlcmF0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGxvbWJvay5leHRlcm4uc2xmNGouU2xmNGo7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5wb2kuaHNzZi51c2VybW9kZWwuKjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLmRvbWFpbi5QYWdlYWJsZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEud2ViLlBhZ2VhYmxlRGVmYXVsdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmZvcm1hdC5hbm5vdGF0aW9uLkRhdGVUaW1lRm9ybWF0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuaHR0cC5SZXNwb25zZUVudGl0eTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5iaW5kLmFubm90YXRpb24uKjtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLkRhdGU7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLnJlZ2V4Lk1hdGNoZXI7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLnJlZ2V4LlBhdHRlcm47XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIi8qKlxuIiArCiAgICAgICAgICAgICAgICAiICogQ3JlYXRlZCBieSBJbnRlbGxpSiBJREVBXG4iICsKICAgICAgICAgICAgICAgICIgKiBVc2VyOiDlvpDmiJBcbiIgKwogICAgICAgICAgICAgICAgIiAqIERhdGU6IDIwMTgvMTAvMTdcbiIgKwogICAgICAgICAgICAgICAgIiAqIFRpbWU6IOS4iuWNiDEwOjQ2XG4iICsKICAgICAgICAgICAgICAgICIgKiBFbWFpbDogb2xkX2NhbWVsQDE2My5jb21cbiIgKwogICAgICAgICAgICAgICAgIiAqL1xuIiArCiAgICAgICAgICAgICAgICAiQFJlc3RDb250cm9sbGVyXG4iICsKICAgICAgICAgICAgICAgICJAU2xmNGpcbiIgKwogICAgICAgICAgICAgICAgIkBSZXF1ZXN0TWFwcGluZyhcIi9hdHRlbmRhbmNlXCIpXG4iICsKICAgICAgICAgICAgICAgICJwdWJsaWMgY2xhc3MgQXR0ZW5kYW5jZVN0YXRpc3RpY3NOZXdDb250cm9sbGVyIHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiQEF1dG93aXJlZFxuIiArCiAgICAgICAgICAgICAgICAicHJpdmF0ZSBBdHRlbmRhbmNlU3RhdGlzdGljc05ld1NlcnZpY2Ugc2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDogIPli6Tnu5/orqFcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEByZXR1cm4gdGhlIFJlc3BvbnNlRW50aXR5PD8+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5p+l6K+i6ICD5Yuk57uf6K6h5bim5p2h5Lu2562b6YCJXCIsbm90ZXMgPSBcIuWPguaVsCAgIOW8gOWni+aXtumXtHN0YXJ0LOe7k+adn+aXtumXtGVuZCwg54+t57qn5Li76ZSuY2xhc3NJZCwg5LiT5Lia5Li76ZSubWFqb3JJZO+8jOezu+S4u+mUrmRlcHRJZFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZyh2YWx1ZSA9IFwiL3F1ZXJ5TGlzdEZvclBhZ2VcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGZpbmRBTExIb21lV29yayhAUGFnZWFibGVEZWZhdWx0KHZhbHVlID0gMjApIFBhZ2VhYmxlIHBhZ2VyLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCkgdGhyb3dzIFBhcnNlRXhjZXB0aW9uIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgSlNPTk9iamVjdCBwYXJhbSA9IFBhZ2VVdGlsLmdldFBhcmFtKHBhZ2VyKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgRGF0ZSBzdGFydCA9IHBhcmFtLmdldERhdGUoXCJzdGFydFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgRGF0ZSBlbmQgPSBwYXJhbS5nZXREYXRlKFwiZW5kXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgY2xhc3NJZCA9IHBhcmFtLmdldFN0cmluZyhcImNsYXNzSWRcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyBtYWpvcklkID0gcGFyYW0uZ2V0U3RyaW5nKFwibWFqb3JJZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGRlcHRJZCA9IHBhcmFtLmdldFN0cmluZyhcImRlcHRJZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGNvdXJzZU5hbWUgPSBwYXJhbS5nZXRTdHJpbmcoXCJjb3Vyc2VOYW1lXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgdGVhY2hlck5hbWUgPSBwYXJhbS5nZXRTdHJpbmcoXCJ0ZWFjaGVyTmFtZVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIHNlY3Rpb24gPSBwYXJhbS5nZXRTdHJpbmcoXCJzZWN0aW9uXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBDcml0ZXJpYSBjcml0ZXJpYSA9IG5ldyBDcml0ZXJpYSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhjb3Vyc2VOYW1lKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiY291cnNlTmFtZVwiLCBjb3Vyc2VOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayh0ZWFjaGVyTmFtZSkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInRlYWNoZXJOYW1lXCIsIHRlYWNoZXJOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhzZWN0aW9uKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgLy9jcml0ZXJpYS5wdXQoXCJzZWN0aW9uXCIsIHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTGlzdDxTdHJpbmc+IGRpZ2l0TGlzdCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgUGF0dGVybiBwID0gUGF0dGVybi5jb21waWxlKFwiW14wLTldXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTWF0Y2hlciBtID0gcC5tYXRjaGVyKHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIHJlc3VsdCA9IG0ucmVwbGFjZUFsbChcIlwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aCgpOyBpKyspIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBkaWdpdExpc3QuYWRkKHJlc3VsdC5zdWJzdHJpbmcoaSwgaSArIDEpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25TdGFydFwiLCBJbnRlZ2VyLnBhcnNlSW50KGRpZ2l0TGlzdC5nZXQoMCkpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25MZW5ndGhcIiwgZGlnaXRMaXN0LnNpemUoKSk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKGNsYXNzSWQpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJjbGFzc0lkXCIsIGNsYXNzSWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKGRlcHRJZCkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImRlcHRJZFwiLCBkZXB0SWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKG1ham9ySWQpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJtYWpvcklkXCIsIG1ham9ySWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKHN0YXJ0IT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInN0YXJ0XCIsIHN0YXJ0KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZihlbmQhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiZW5kXCIsIGVuZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgUGFnZWFibGUgYnVpbGQgPSBQYWdlVXRpbC5idWlsZChyZXF1ZXN0LCBwYWdlcik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VIZWxwZXIuc3RhcnRQYWdlKGJ1aWxkLmdldFBhZ2VOdW1iZXIoKSxidWlsZC5nZXRQYWdlU2l6ZSgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgTGlzdDxBdHRlbmRhbmNlU3RhdGlzdGljcz4gZGF0YSA9IHNlcnZpY2UucXVlcnlMaXN0Rm9yUGFnZShjcml0ZXJpYSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VJbmZvPEF0dGVuZGFuY2VTdGF0aXN0aWNzPiBsaXN0ID0gbmV3IFBhZ2VJbmZvPD4oZGF0YSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vayhsaXN0KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouWtpueUn+iAg+WLpOivpuaDhVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZyh2YWx1ZSA9IFwiL3N0dWRlbnQvcXVlcnlMaXN0Rm9yUGFnZVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXNwb25zZUJvZHlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gZmluZFN0dWRlbnQoQFBhZ2VhYmxlRGVmYXVsdCh2YWx1ZSA9IDIwKSBQYWdlYWJsZSBwYWdlciwgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QpIHRocm93cyBQYXJzZUV4Y2VwdGlvbiB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIEpTT05PYmplY3QgcGFyYW0gPSBQYWdlVXRpbC5nZXRQYXJhbShwYWdlcik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyBkYXRlID0gcGFyYW0uZ2V0U3RyaW5nKFwiZGF0ZVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIHNpZ25CYXRjaD1wYXJhbS5nZXRTdHJpbmcoXCJzaWduQmF0Y2hcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyBzZWN0aW9uID0gcGFyYW0uZ2V0U3RyaW5nKFwic2VjdGlvblwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIHRlYWNoZXJOYW1lID0gcGFyYW0uZ2V0U3RyaW5nKFwidGVhY2hlck5hbWVcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyBjb3Vyc2VOYW1lID0gcGFyYW0uZ2V0U3RyaW5nKFwiY291cnNlTmFtZVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBDcml0ZXJpYSBjcml0ZXJpYSA9IG5ldyBDcml0ZXJpYSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhjb3Vyc2VOYW1lKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiY291cnNlTmFtZVwiLCBjb3Vyc2VOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayh0ZWFjaGVyTmFtZSkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInRlYWNoZXJOYW1lXCIsIHRlYWNoZXJOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhzZWN0aW9uKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgLy9jcml0ZXJpYS5wdXQoXCJzZWN0aW9uXCIsIHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTGlzdDxTdHJpbmc+IGRpZ2l0TGlzdCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgUGF0dGVybiBwID0gUGF0dGVybi5jb21waWxlKFwiW14wLTldXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTWF0Y2hlciBtID0gcC5tYXRjaGVyKHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIHJlc3VsdCA9IG0ucmVwbGFjZUFsbChcIlwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aCgpOyBpKyspIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBkaWdpdExpc3QuYWRkKHJlc3VsdC5zdWJzdHJpbmcoaSwgaSArIDEpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25TdGFydFwiLCBJbnRlZ2VyLnBhcnNlSW50KGRpZ2l0TGlzdC5nZXQoMCkpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25MZW5ndGhcIiwgZGlnaXRMaXN0LnNpemUoKSk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKHNpZ25CYXRjaCkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNpZ25CYXRjaFwiLCBzaWduQmF0Y2gpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKGRhdGUhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiZGF0ZVwiLGRhdGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VhYmxlIGJ1aWxkID0gUGFnZVV0aWwuYnVpbGQocmVxdWVzdCwgcGFnZXIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBQYWdlSGVscGVyLnN0YXJ0UGFnZShidWlsZC5nZXRQYWdlTnVtYmVyKCksYnVpbGQuZ2V0UGFnZVNpemUoKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIExpc3Q8U3R1ZGVudERldGFpbFNpZ24+IGRhdGEgPSBzZXJ2aWNlLnNlbGVjdFN0dWRlbnREZXRhaWwoY3JpdGVyaWEpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBQYWdlSW5mbzxTdHVkZW50RGV0YWlsU2lnbj4gbGlzdCA9IG5ldyBQYWdlSW5mbzw+KGRhdGEpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gUmVzcG9uc2VFbnRpdHkub2sobGlzdCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuWvvOWHuuaVsOaNrlwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIvU3R1ZGVudEV4Y2VsRG93bmxvYWRzXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaUltcGxpY2l0UGFyYW1zKHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcImRhdGVcIiwgdmFsdWUgPSBcIuW8gOWni+aXtumXtFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJzaWduQml0Y2hcIiAsdmFsdWUgPSBcIue7k+adn+aXtumXtFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJzZWN0aW9uXCIsIHZhbHVlID0gXCLlvIDlp4vml7bpl7RcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcIlN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwidGVhY2hlck5hbWVcIiAsdmFsdWUgPSBcIue7k+adn+aXtumXtFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJjb3Vyc2VOYW1lXCIsIHZhbHVlID0gXCLlvIDlp4vml7bpl7RcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcIlN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgfSlcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgIEBSZXNwb25zZUJvZHlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgdm9pZCBkb3dubG9hZFN0dWRlbnQoQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgZGF0ZSxAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzaWduQml0Y2gsQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgc2VjdGlvbixAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyB0ZWFjaGVyTmFtZSxAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBjb3Vyc2VOYW1lLEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpIHRocm93cyBQYXJzZUV4Y2VwdGlvbiB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKGRhdGUhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQ3JpdGVyaWEgY3JpdGVyaWEgPSBuZXcgQ3JpdGVyaWEoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKGNvdXJzZU5hbWUpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiY291cnNlTmFtZVwiLCBjb3Vyc2VOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKHRlYWNoZXJOYW1lKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInRlYWNoZXJOYW1lXCIsIHRlYWNoZXJOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKHNlY3Rpb24pJiZzZWN0aW9uIT1udWxsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgLy9jcml0ZXJpYS5wdXQoXCJzZWN0aW9uXCIsIHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIExpc3Q8U3RyaW5nPiBkaWdpdExpc3QgPSBuZXcgQXJyYXlMaXN0PFN0cmluZz4oKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBQYXR0ZXJuIHAgPSBQYXR0ZXJuLmNvbXBpbGUoXCJbXjAtOV1cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgTWF0Y2hlciBtID0gcC5tYXRjaGVyKHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIFN0cmluZyByZXN1bHQgPSBtLnJlcGxhY2VBbGwoXCJcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoKCk7IGkrKykge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICBkaWdpdExpc3QuYWRkKHJlc3VsdC5zdWJzdHJpbmcoaSwgaSArIDEpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic2VjdGlvblN0YXJ0XCIsIEludGVnZXIucGFyc2VJbnQoZGlnaXRMaXN0LmdldCgwKSkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25MZW5ndGhcIiwgZGlnaXRMaXN0LnNpemUoKSk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90Qmxhbmsoc2lnbkJpdGNoKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNpZ25CaXRjaFwiLCBzaWduQml0Y2gpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYoZGF0ZSE9bnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiZGF0ZVwiLGRhdGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMaXN0PFN0dWRlbnREZXRhaWxTaWduPiBkYXRhID0gc2VydmljZS5zZWxlY3RTdHVkZW50RGV0YWlsKGNyaXRlcmlhKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gXCJ1c2VyaW5mXCIrXCIueGxzXCI7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBFeGNlbFV0aWwuZXhwb3J0RXhjZWwoZGF0YSxudWxsLFwiMTExXCIsU3R1ZGVudERldGFpbFNpZ24uY2xhc3MsZmlsZU5hbWUscmVzcG9uc2UpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICog6ICD5Yuk57uf6K6h5oC75pWw5o2uXG4iICsKICAgICAgICAgICAgICAgICIgICAgICpcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuiAg+WLpOe7n+iuoeaAu+aVsOaNrlwiLG5vdGVzID0gXCLlj4LmlbAgICDlvIDlp4vml7bpl7RzdGFydCznu5PmnZ/ml7bpl7RlbmQsIOePree6p+S4u+mUrmNsYXNzSWQsIOS4k+S4muS4u+mUrm1ham9ySWTvvIzns7vkuLvplK5kZXB0SWRcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmcodmFsdWUgPSBcIi9hdHRlbmRhbmNlU3VtXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaUltcGxpY2l0UGFyYW1zKHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInN0YXJ0XCIsIHZhbHVlID0gXCLlvIDlp4vml7bpl7RcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcIkRhdGVcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcImVuZFwiICx2YWx1ZSA9IFwi57uT5p2f5pe26Ze0XCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJkYXRlXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJjbGFzc0lkXCIgLHZhbHVlID0gXCLnj63nuqdpZFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiZGF0ZVwiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwiZGVwdElkXCIgLHZhbHVlID0gXCLpg6jpl6hpZFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiZGF0ZVwiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwibWFqb3JJZFwiICx2YWx1ZSA9IFwi5LiT5LiaaWRcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcImRhdGVcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInllYXJcIiAsdmFsdWUgPSBcIuW5tOe6p1wiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwic3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJjb3Vyc2VOYW1lXCIgLHZhbHVlID0gXCLor77nqIvlkI3np7BcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcInN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwidGVhY2hlck5hbWVcIiAsdmFsdWUgPSBcIuaVmeW4iOWQjeensFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwic3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJzZWN0aW9uXCIgLHZhbHVlID0gXCLoioLmrKFcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcInN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgfSlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGF0dGVuZGFuY2VTdW0oQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBARGF0ZVRpbWVGb3JtYXQocGF0dGVybj1cInl5eXktTU0tZGRcIilEYXRlIHN0YXJ0LEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSlARGF0ZVRpbWVGb3JtYXQocGF0dGVybj1cInl5eXktTU0tZGRcIikgRGF0ZSBlbmQsQFJlcXVlc3RQYXJhbSAocmVxdWlyZWQgPSBmYWxzZSlTdHJpbmcgY2xhc3NJZCxAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBkZXB0SWQsQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgbWFqb3JJZCxAUmVxdWVzdFBhcmFtIChyZXF1aXJlZCA9IGZhbHNlKVN0cmluZyBjb3Vyc2VOYW1lLEBSZXF1ZXN0UGFyYW0gKHJlcXVpcmVkID0gZmFsc2UpU3RyaW5nIHRlYWNoZXJOYW1lLEBSZXF1ZXN0UGFyYW0gKHJlcXVpcmVkID0gZmFsc2UpU3RyaW5nIHNlY3Rpb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgQ3JpdGVyaWEgY3JpdGVyaWEgPSBuZXcgQ3JpdGVyaWEoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoc3RhcnQhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic3RhcnRcIiwgc3RhcnQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKGVuZCE9bnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJlbmRcIiwgZW5kKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhjb3Vyc2VOYW1lKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiY291cnNlTmFtZVwiLCBjb3Vyc2VOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayh0ZWFjaGVyTmFtZSkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInRlYWNoZXJOYW1lXCIsIHRlYWNoZXJOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhzZWN0aW9uKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgLy9jcml0ZXJpYS5wdXQoXCJzZWN0aW9uXCIsIHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTGlzdDxTdHJpbmc+IGRpZ2l0TGlzdCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgUGF0dGVybiBwID0gUGF0dGVybi5jb21waWxlKFwiW14wLTldXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTWF0Y2hlciBtID0gcC5tYXRjaGVyKHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIHJlc3VsdCA9IG0ucmVwbGFjZUFsbChcIlwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aCgpOyBpKyspIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBkaWdpdExpc3QuYWRkKHJlc3VsdC5zdWJzdHJpbmcoaSwgaSArIDEpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25TdGFydFwiLCBJbnRlZ2VyLnBhcnNlSW50KGRpZ2l0TGlzdC5nZXQoMCkpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25MZW5ndGhcIiwgZGlnaXRMaXN0LnNpemUoKSk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiApLmFwcGVuZCgKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsoY2xhc3NJZCkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImNsYXNzSWRcIiwgY2xhc3NJZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsoZGVwdElkKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiZGVwdElkXCIsIGRlcHRJZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsobWFqb3JJZCkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcIm1ham9ySWRcIiwgbWFqb3JJZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgQXR0ZW5kYW5jZVN1bSBkYXRhID0gc2VydmljZS5hdHRlbmRhbmNlU3VtKGNyaXRlcmlhKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoXCIlXCIuZXF1YWxzKGRhdGEuZ2V0UGVyY2VudGFnZSgpKSl7ZGF0YS5zZXRQZXJjZW50YWdlKFwiMCVcIik7fVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLFwi57uf6K6h5L+h5oGvXCIsZGF0YSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAq5bm05Lu95LiL5ouJXG4iICsKICAgICAgICAgICAgICAgICIgICAgICpcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuW5tOS7veS4i+aLiVwiLG5vdGVzID0gXCLlj4LmlbAgICDlvIDlp4vml7bpl7RzdGFydCznu5PmnZ/ml7bpl7RlbmRcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmcodmFsdWUgPSBcIi95ZWFyXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtcyh7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJzdGFydFwiLCB2YWx1ZSA9IFwi5byA5aeL5pe26Ze0XCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJEYXRlXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJlbmRcIiAsdmFsdWUgPSBcIue7k+adn+aXtumXtFwiLCByZXF1aXJlZCA9IGZhbHNlLCBkYXRhVHlwZSA9IFwiZGF0ZVwiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpLFxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgfSlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gYXR0ZW5kYW5jZVN1bShAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpQERhdGVUaW1lRm9ybWF0KHBhdHRlcm49XCJ5eXl5LU1NLWRkXCIpICBEYXRlIHN0YXJ0LEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSlARGF0ZVRpbWVGb3JtYXQocGF0dGVybj1cInl5eXktTU0tZGRcIikgRGF0ZSBlbmQpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgQ3JpdGVyaWEgY3JpdGVyaWEgPSBuZXcgQ3JpdGVyaWEoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoc3RhcnQhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic3RhcnRcIiwgc3RhcnQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKGVuZCE9bnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJlbmRcIiwgZW5kKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBMaXN0PENvbWJvPiBjb21ib3MgPSBzZXJ2aWNlLnNlbGVjdFllYXIoY3JpdGVyaWEpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLFwi5bm05Lu95LiL5ouJXCIsY29tYm9zKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICrogIPli6Tlm75cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEByZXR1cm4gdGhlIFJlc3BvbnNlRW50aXR5PD8+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi6ICD5Yuk5Zu+XCIsbm90ZXMgPSBcIuWPguaVsCAgIOW8gOWni+aXtumXtHN0YXJ0LOe7k+adn+aXtumXtGVuZO+8jOW5tOe6pyB5ZWFyXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaUltcGxpY2l0UGFyYW1zKHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInN0YXJ0XCIsIHZhbHVlID0gXCLlvIDlp4vml7bpl7RcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcIkRhdGVcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcImVuZFwiICx2YWx1ZSA9IFwi57uT5p2f5pe26Ze0XCIsIHJlcXVpcmVkID0gZmFsc2UsIGRhdGFUeXBlID0gXCJkYXRlXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJ5ZWFyXCIgLHZhbHVlID0gXCLlubTnuqdcIiwgcmVxdWlyZWQgPSBmYWxzZSwgZGF0YVR5cGUgPSBcInN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgfSlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmcodmFsdWUgPSBcIi9jaGFydFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXNwb25zZUJvZHlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gY2hhcnQoQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKUBEYXRlVGltZUZvcm1hdChwYXR0ZXJuPVwieXl5eS1NTS1kZFwiKSAgRGF0ZSBzdGFydCwgQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKUBEYXRlVGltZUZvcm1hdChwYXR0ZXJuPVwieXl5eS1NTS1kZFwiKSAgRGF0ZSBlbmQsIEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHllYXIpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgQ3JpdGVyaWEgY3JpdGVyaWEgPSBuZXcgQ3JpdGVyaWEoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgaWYoc3RhcnQhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwic3RhcnRcIiwgc3RhcnQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKGVuZCE9bnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJlbmRcIiwgZW5kKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZih5ZWFyIT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInllYXJcIiwgeWVhcik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgTGlzdDxDaGFydERhdGE+IGRhdGEgPSBzZXJ2aWNlLmNoYXJ0KGNyaXRlcmlhKTtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICBDaGFydERhdGEgY2hhcnREYXRhID0gZGF0YS5nZXQoMCk7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgaWYoXCLlhajmoKFcIi5lcXVhbHMoY2hhcnREYXRhLmdldEZpZWxkKCkpJiZcIiVcIi5lcXVhbHMoY2hhcnREYXRhLmdldFZhbHVlKCkpKXtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgZGF0YS5jbGVhcigpO1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgIH1lbHNle1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICAvL+eZvuWIhuavlOmrmOeahOWcqOWJjemdolxuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICBkYXRhLnNvcnQoKGEsIGIpIC0+IHtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgICAgIFN0cmluZyBhcCA9IGEuZ2V0VmFsdWUoKS5zdWJzdHJpbmcoMCwgYS5nZXRWYWx1ZSgpLmxlbmd0aCgpIC0gMSk7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICBTdHJpbmcgYnAgPSBiLmdldFZhbHVlKCkuc3Vic3RyaW5nKDAsIGIuZ2V0VmFsdWUoKS5sZW5ndGgoKSAtIDEpO1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICAgICAgaWYgKERvdWJsZS52YWx1ZU9mKGFwKSA+IERvdWJsZS52YWx1ZU9mKGJwKSkge1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoRG91YmxlLnZhbHVlT2YoYXApIDwgRG91YmxlLnZhbHVlT2YoYnApKSB7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgfSk7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgIC8v5YWo5qCh55qE5Zyo5YmN6Z2iXG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgIGRhdGEuc29ydCgoYSwgYikgLT4ge1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICAgICAgaWYgKGEuZ2V0RmllbGQoKS5lcXVhbHMoXCLlhajmoKFcIikpIHtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgICAgICAgICB9IGVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICB9KTtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSxcIuiAg+WLpOWbvuaVsOaNrlwiLGRhdGEpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgZnVuY3Rpb24gZG93bmxvYWRmaWxlKCl7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCIvVXNlckV4Y2VsRG93bmxvYWRzXCI7XG4iICsKICAgICAgICAgICAgICAgICIvLyAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5a+85Ye65pWw5o2uXCIsbm90ZXMgPSBcIuWPguaVsCAgIOW8gOWni+aXtumXtHN0YXJ0LOe7k+adn+aXtumXtGVuZCwg54+t57qn5Li76ZSuY2xhc3NJZCwg5LiT5Lia5Li76ZSubWFqb3JJZO+8jOezu+S4u+mUrmRlcHRJZFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZyh2YWx1ZSA9IFwiL1VzZXJFeGNlbERvd25sb2Fkc1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXNwb25zZUJvZHlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgdm9pZCBkb3dubG9hZEFsbENsYXNzbWF0ZShAUGFnZWFibGVEZWZhdWx0KHZhbHVlID0gMjApIFBhZ2VhYmxlIHBhZ2VyLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkgdGhyb3dzIFBhcnNlRXhjZXB0aW9uIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgSlNPTk9iamVjdCBwYXJhbSA9IFBhZ2VVdGlsLmdldFBhcmFtKHBhZ2VyKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgRGF0ZSBzdGFydCA9IHBhcmFtLmdldERhdGUoXCJzdGFydFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgRGF0ZSBlbmQgPSBwYXJhbS5nZXREYXRlKFwiZW5kXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgY2xhc3NJZCA9IHBhcmFtLmdldFN0cmluZyhcImNsYXNzSWRcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyBtYWpvcklkID0gcGFyYW0uZ2V0U3RyaW5nKFwibWFqb3JJZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGRlcHRJZCA9IHBhcmFtLmdldFN0cmluZyhcImRlcHRJZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGNvdXJzZU5hbWUgPSBwYXJhbS5nZXRTdHJpbmcoXCJjb3Vyc2VOYW1lXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgdGVhY2hlck5hbWUgPSBwYXJhbS5nZXRTdHJpbmcoXCJ0ZWFjaGVyTmFtZVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIHNlY3Rpb24gPSBwYXJhbS5nZXRTdHJpbmcoXCJzZWN0aW9uXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBDcml0ZXJpYSBjcml0ZXJpYSA9IG5ldyBDcml0ZXJpYSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhjb3Vyc2VOYW1lKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiY291cnNlTmFtZVwiLCBjb3Vyc2VOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayh0ZWFjaGVyTmFtZSkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInRlYWNoZXJOYW1lXCIsIHRlYWNoZXJOYW1lKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhzZWN0aW9uKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgLy9jcml0ZXJpYS5wdXQoXCJzZWN0aW9uXCIsIHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTGlzdDxTdHJpbmc+IGRpZ2l0TGlzdCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nPigpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgUGF0dGVybiBwID0gUGF0dGVybi5jb21waWxlKFwiW14wLTldXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTWF0Y2hlciBtID0gcC5tYXRjaGVyKHNlY3Rpb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIHJlc3VsdCA9IG0ucmVwbGFjZUFsbChcIlwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aCgpOyBpKyspIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBkaWdpdExpc3QuYWRkKHJlc3VsdC5zdWJzdHJpbmcoaSwgaSArIDEpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25TdGFydFwiLCBJbnRlZ2VyLnBhcnNlSW50KGRpZ2l0TGlzdC5nZXQoMCkpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInNlY3Rpb25MZW5ndGhcIiwgZGlnaXRMaXN0LnNpemUoKSk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKGNsYXNzSWQpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJjbGFzc0lkXCIsIGNsYXNzSWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKGRlcHRJZCkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImRlcHRJZFwiLCBkZXB0SWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKG1ham9ySWQpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJtYWpvcklkXCIsIG1ham9ySWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKHN0YXJ0IT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcInN0YXJ0XCIsIHN0YXJ0KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZihlbmQhPW51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiZW5kXCIsIGVuZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBIU1NGV29ya2Jvb2sgd29ya2Jvb2sgPSBuZXcgSFNTRldvcmtib29rKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIEhTU0ZTaGVldCBzaGVldCA9IHdvcmtib29rLmNyZWF0ZVNoZWV0KFwi5L+h5oGv6KGoXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBMaXN0PEF0dGVuZGFuY2VTdGF0aXN0aWNzPiBkYXRhID0gc2VydmljZS5xdWVyeUxpc3RGb3JQYWdlKGNyaXRlcmlhKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGZpbGVOYW1lID0gXCJ1c2VyaW5mXCIgICsgXCIueGxzXCI7Ly/orr7nva7opoHlr7zlh7rnmoTmlofku7bnmoTlkI3lrZdcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgLy/mlrDlop7mlbDmja7ooYzvvIzlubbkuJTorr7nva7ljZXlhYPmoLzmlbDmja5cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpbnQgcm93TnVtID0gMTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmdbXSBoZWFkZXJzID0geyBcIuWtpuWPt1wiLCBcIuWnk+WQjVwiLCBcIui6q+S7veexu+Wei1wiLCBcIueZu+W9leWvhueggVwifTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgLy9oZWFkZXJz6KGo56S6ZXhjZWzooajkuK3nrKzkuIDooYznmoTooajlpLRcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBIU1NGUm93IHJvdyA9IHNoZWV0LmNyZWF0ZVJvdygwKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgLy/lnKhleGNlbOihqOS4rea3u+WKoOihqOWktFxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGZvcihpbnQgaT0wO2k8aGVhZGVycy5sZW5ndGg7aSsrKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEhTU0ZDZWxsIGNlbGwgPSByb3cuY3JlYXRlQ2VsbChpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEhTU0ZSaWNoVGV4dFN0cmluZyB0ZXh0ID0gbmV3IEhTU0ZSaWNoVGV4dFN0cmluZyhoZWFkZXJzW2ldKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGNlbGwuc2V0Q2VsbFZhbHVlKHRleHQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgLy/lnKjooajkuK3lrZjmlL7mn6Xor6LliLDnmoTmlbDmja7mlL7lhaXlr7nlupTnmoTliJdcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgZm9yIChBdHRlbmRhbmNlU3RhdGlzdGljcyBhdHRlbmRhbmNlU3RhdGlzdGljcyA6IGRhdGEpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEhTU0ZSb3cgcm93MSA9IHNoZWV0LmNyZWF0ZVJvdyhyb3dOdW0pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcm93MS5jcmVhdGVDZWxsKDApLnNldENlbGxWYWx1ZShhdHRlbmRhbmNlU3RhdGlzdGljcy5nZXREZXB0TmFtZSgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJvdzEuY3JlYXRlQ2VsbCgxKS5zZXRDZWxsVmFsdWUoYXR0ZW5kYW5jZVN0YXRpc3RpY3MuZ2V0Q291cnNlTmFtZSgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJvdzEuY3JlYXRlQ2VsbCgyKS5zZXRDZWxsVmFsdWUoYXR0ZW5kYW5jZVN0YXRpc3RpY3MuZ2V0VGVhY2hlck5hbWUoKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByb3cxLmNyZWF0ZUNlbGwoMykuc2V0Q2VsbFZhbHVlKGF0dGVuZGFuY2VTdGF0aXN0aWNzLmdldEFkZHJlc3NOYW1lKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcm93MS5jcmVhdGVDZWxsKDQpLnNldENlbGxWYWx1ZShhdHRlbmRhbmNlU3RhdGlzdGljcy5nZXREYXRlKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcm93MS5jcmVhdGVDZWxsKDUpLnNldENlbGxWYWx1ZShhdHRlbmRhbmNlU3RhdGlzdGljcy5nZXRTZWN0aW9uKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcm93MS5jcmVhdGVDZWxsKDYpLnNldENlbGxWYWx1ZShhdHRlbmRhbmNlU3RhdGlzdGljcy5nZXRHcmFkZU5hbWUoKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByb3dOdW0rKztcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXNwb25zZS5zZXRDb250ZW50VHlwZShcImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJlc3BvbnNlLnNldEhlYWRlcihcIkNvbnRlbnQtZGlzcG9zaXRpb25cIiwgXCJhdHRhY2htZW50O2ZpbGVuYW1lPVwiICsgZmlsZU5hbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmVzcG9uc2UuZmx1c2hCdWZmZXIoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHdvcmtib29rLndyaXRlKHJlc3BvbnNlLmdldE91dHB1dFN0cmVhbSgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfWNhdGNoIChFeGNlcHRpb24gZSl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Y6G5Y+y5pWw5o2uXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFBvc3RNYXBwaW5nKHZhbHVlID0gXCIvaGlzdG9yeVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyB2b2lkIHRlc3QoKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgc2VydmljZS5zeW5jKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJ9XG4iICsKICAgICAgICAgICAgICAgICJwYWNrYWdlIGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS53ZWI7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uYWxpYmFiYS5mYXN0anNvbi5KU09OO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5hbGliYWJhLmZhc3Rqc29uLkpTT05PYmplY3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmdpdGh1Yi5wYWdlaGVscGVyLlBhZ2VJbmZvO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLmFwaS5CYXNlVXNlckNsaWVudDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5hdXRoLnNlY3VyaXR5LlNlY3VyaXR5VXRpbHM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLmVudGl0eS5jb3JlLkJhc2VPYVVzZXI7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnJlc3BvbnNlLmhhb2xhbmdSZXR1cm47XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnJlc3BvbnNlLmhhb2xhbmdSZXR1cm5FbnRpdHk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnV0aWwuRXhjZWxVdGlsO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLmNvbW1vbi51dGlsLkZpbGVUeXBlQ2hhbmdlVXRpbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24udXRpbC5QYWdlVXRpbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5Lio7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnNlcnZpY2UuQmFzZUNvdXJzZVNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnNlcnZpY2UuQmFzZVNjaGVkdWxlU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uc2VydmljZS5CYXNlVGVhY2hjbGFzc1NlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnV0aWwuQ3JpdGVyaWE7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnV0aWwuVXBsb2FkUmVzdWx0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpSW1wbGljaXRQYXJhbTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaUltcGxpY2l0UGFyYW1zO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpT3BlcmF0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5pby5GaWxlVXRpbHM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcudGltZS5EYXRlRm9ybWF0VXRpbHM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5wb2kuc3MudXNlcm1vZGVsLldvcmtib29rO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5jb2RlaGF1cy5qYWNrc29uLm1hcC5kZXNlci5WYWx1ZUluc3RhbnRpYXRvcnM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmp1bml0LkFzc2VydDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuZG9tYWluLlBhZ2VhYmxlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5kb21haW4uU29ydDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEud2ViLlBhZ2VhYmxlRGVmYXVsdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmh0dHAuUmVzcG9uc2VFbnRpdHk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay51aS5Nb2RlbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5iaW5kLmFubm90YXRpb24uKjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5tdWx0aXBhcnQuTXVsdGlwYXJ0RmlsZTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXNzaW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEuaW8uRmlsZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEudXRpbC4qO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgc3RhdGljIG9yZy5oYW1jcmVzdC5jb3JlLklzTm90Lm5vdDtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIvKipcbiIgKwogICAgICAgICAgICAgICAgIiAqIEBEZXNjcmlwdGlvbjogQmFzZUNvdXJzZeWunuS9k+exu1xuIiArCiAgICAgICAgICAgICAgICAiICogQEF1dGhvcjog5b6Q5oiQXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ29tcGFueTog5LqR5Zyo5L+h5oGvXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ3JlYXRlRGF0ZTogSmFuIDMwLCAyMDE4IDI6Mjc6MDUgQU1cbiIgKwogICAgICAgICAgICAgICAgIiAqL1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICkuYXBwZW5kKAogICAgICAgICAgICAgICAgIkBSZXN0Q29udHJvbGxlclxuIiArCiAgICAgICAgICAgICAgICAiQFJlcXVlc3RNYXBwaW5nKFwiL0Jhc2VDb3Vyc2VcIilcbiIgKwogICAgICAgICAgICAgICAgInB1YmxpYyBjbGFzcyBCYXNlQ291cnNlQ29udHJvbGxlciB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPR0dFUiA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJhc2VDb3Vyc2VDb250cm9sbGVyLmNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBdXRvd2lyZWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIEJhc2VDb3Vyc2VTZXJ2aWNlIGJhc2VDb3Vyc2VTZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBdXRvd2lyZWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIEJhc2VUZWFjaGNsYXNzU2VydmljZSB0ZWFjaGNsYXNzU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXV0b3dpcmVkXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBCYXNlU2NoZWR1bGVTZXJ2aWNlIHNjaGVkdWxlU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXV0b3dpcmVkXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBCYXNlVXNlckNsaWVudCBiYXNlVXNlckNsaWVudDtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIOi/m+WFpeS4u+mhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIHJlcXVlc3RcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcGFyYW0gc2Vzc2lvblxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEBwYXJhbSBtb2RlbFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEByZXR1cm4ganNw6aG16Z2i6Lev5b6EXG4iICsKICAgICAgICAgICAgICAgICIgICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuR0VUKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBTdHJpbmcgaW5kZXgoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXNzaW9uIHNlc3Npb24sIE1vZGVsIG1vZGVsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBcInZpZXdzL0Jhc2VDb3Vyc2VcIjtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDmn6Xor6LmiYDmnInlubbliIbpobVcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEBwYXJhbSBwYWdlclxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEBwYXJhbSByZXF1ZXN0XG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIHNlc3Npb25cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcmV0dXJuIOWIhumhteaVsOaNrlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZyhcIi9xdWVyeUxpc3RGb3JQYWdlXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PFBhZ2VJbmZvPEJhc2VDb3Vyc2U+PiBxdWVyeUxpc3RGb3JQYWdlKEBQYWdlYWJsZURlZmF1bHQodmFsdWUgPSAyMCwgc29ydCA9IHtcImRpc3BsYXlfaW5kZXhcIn0sIGRpcmVjdGlvbiA9IFNvcnQuRGlyZWN0aW9uLkFTQykgUGFnZWFibGUgcGFnZXIsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uKSB0aHJvd3MgRXhjZXB0aW9uIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEpTT05PYmplY3QgcGFyYW0gPSBQYWdlVXRpbC5nZXRQYXJhbShwYWdlcik7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIG5hbWUgPSBwYXJhbS5nZXRTdHJpbmcoXCJuYW1lXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIGNvdXJzZU51bSA9IHBhcmFtLmdldFN0cmluZyhcImNvdXJzZU51bVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBCYXNlQ291cnNlRXhhbXBsZSBleGFtcGxlID0gbmV3IEJhc2VDb3Vyc2VFeGFtcGxlKCk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQmFzZUNvdXJzZUV4YW1wbGUuQ3JpdGVyaWEgY3JpdGVyaWEgPSBleGFtcGxlLmNyZWF0ZUNyaXRlcmlhKCk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBQYWdlYWJsZSBidWlsZDEgPSBQYWdlVXRpbC5idWlsZChwYWdlcik7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsobmFtZSkpIHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgY3JpdGVyaWEuYW5kTmFtZUxpa2UobmFtZSk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKGNvdXJzZU51bSkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBjcml0ZXJpYS5hbmRDb3Vyc2VOdW1FcXVhbFRvKGNvdXJzZU51bSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBQYWdlSW5mbzxCYXNlQ291cnNlPiBwYWdlSW5mbyA9IGJhc2VDb3Vyc2VTZXJ2aWNlLnNlbGVjdEJ5RXhhbXBsZShQYWdlVXRpbC5idWlsZChyZXF1ZXN0LCBwYWdlciksIGV4YW1wbGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKCkuYm9keShwYWdlSW5mbyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLmn6Xor6Lor77nqIvliIbpobXlh7rplJks6ZSZ6K+v5L+h5oGvXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIOa3u+WKoFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIEJhc2VDb3Vyc2VcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEBwYXJhbSBzZXNzaW9uXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmdcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gaW5zZXJ0KEJhc2VDb3Vyc2UgQmFzZUNvdXJzZSwgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXNzaW9uIHNlc3Npb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCBpbnNlcnQgPSBiYXNlQ291cnNlU2VydmljZS5pbnNlcnRTZWxlY3RpdmUoQmFzZUNvdXJzZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoaW5zZXJ0ID4gMCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5re75Yqg5oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLmt7vliqDlpLHotKVcIiwgQmFzZUNvdXJzZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLmt7vliqDor77nqIvkv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICog5Yig6ZmkXG4iICsKICAgICAgICAgICAgICAgICIgICAgICpcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcGFyYW0gaWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBEZWxldGVNYXBwaW5nKFwiL3tpZH1cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gZGVsZXRlKEBQYXRoVmFyaWFibGUgU3RyaW5nIGlkKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpbnQgZGVsZXRlID0gYmFzZUNvdXJzZVNlcnZpY2UuZGVsZXRlQnlQcmltYXJ5S2V5KGlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChkZWxldGUgPT0gMSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5Yig6Zmk5oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLliKDpmaTlpLHotKVcIiwgaWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5Yig6Zmk6K++56iL5L+h5oGv5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIOS/ruaUuVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIEJhc2VDb3Vyc2VcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEByZXR1cm4gdGhlIFJlc3BvbnNlRW50aXR5PD8+XG4iICsKICAgICAgICAgICAgICAgICIgICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFB1dE1hcHBpbmdcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gdXBkYXRlKEJhc2VDb3Vyc2UgQmFzZUNvdXJzZSwgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCB1cGRhdGUgPSBiYXNlQ291cnNlU2VydmljZS51cGRhdGVCeVByaW1hcnlLZXlTZWxlY3RpdmUoQmFzZUNvdXJzZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAodXBkYXRlID09IDEpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuS/ruaUueaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH0gZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi5L+u5pS55aSx6LSlXCIsIEJhc2VDb3Vyc2UpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5L+u5pS56K++56iL5L+h5oGv5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmcoXCIvdXBsb2FkXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIHZvaWQgdXBsb2FkKEBSZXF1ZXN0UGFyYW0oXCJmaWxlXCIpIE11bHRpcGFydEZpbGUgZmlsZSwgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UsIEh0dHBTZXNzaW9uIHNlc3Npb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChmaWxlLmlzRW1wdHkoKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcIuaWh+S7tuacquS4iuS8oFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH0gZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgTGlzdDxCYXNlQ291cnNlPiBwZXJzb25MaXN0ID0gRXhjZWxVdGlsLmltcG9ydEV4Y2VsKGZpbGUsIDEsIDEsIEJhc2VDb3Vyc2UuY2xhc3MpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIC8v5Lmf5Y+v5Lul5L2/55SoZmlsZVBhdGgs5L2/55SoIEZpbGVVdGlsLmltcG9ydEV4Y2VsKFN0cmluZyBmaWxlUGF0aCwgSW50ZWdlciB0aXRsZVJvd3MsIEludGVnZXIgaGVhZGVyUm93cywgQ2xhc3M8VD4gcG9qb0NsYXNzKeWvvOWFpVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIEFzc2VydC5hc3NlcnRUaGF0KHBlcnNvbkxpc3Quc2l6ZSgpLCBub3QoMCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIFVwbG9hZFJlc3VsdCByZXN1bHQgPSBiYXNlQ291cnNlU2VydmljZS5pbnNlcnRMaXN0KHBlcnNvbkxpc3QpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZ2V0RXJyb3JMaXN0KCkuc2l6ZSgpICE9IDApIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgIEV4Y2VsVXRpbC5leHBvcnRFeGNlbChyZXN1bHQuZ2V0RXJyb3JMaXN0KCksIFwi6K++56iL5a+85YWl5aSx6LSl5L+h5oGvXCIsIFwi6K++56iL5L+h5oGvXCIsIEJhc2VDb3Vyc2UuY2xhc3MsIFwi6K++56iL5a+85YWl5aSx6LSl5L+h5oGvLnhsc1wiLCBcIi9vcHQvcGNsb3VkL3RtcC9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLlr7zlhaXor77nqIvkv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouaVmeW4iFwiLCBub3RlcyA9IFwi5qC55o2u6K++56iLaWTojrflj5bmlZnor77ogIHluIhcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpSW1wbGljaXRQYXJhbXMoe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwicHJvamVjdGlkXCIsIHZhbHVlID0gXCLor77nqItpZFwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiNjY3QzFERDlBN0I4QUU4M0UwNTAxMUFDNTQwMTBGRjlcIiwgZGF0YVR5cGUgPSBcIlN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInBhdGhcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgfSlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL3twcm9qZWN0aWR9L3RlYWNoZXJcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8aGFvbGFuZ1JldHVybkVudGl0eT4gcXVlcnlUZWFyY2hlckJ5UHJvamVjdElkKEBQYXRoVmFyaWFibGUgU3RyaW5nIHByb2plY3RpZCwgSHR0cFNlc3Npb24gc2Vzc2lvbikge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTGlzdDxUZWFjaGVyPiB0ZWFjaGVycyA9IGJhc2VDb3Vyc2VTZXJ2aWNlLmZpbmRUZWFjaGVyTGlzdChwcm9qZWN0aWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLmn6Xor6LmiJDlip9cIiwgdGVhY2hlcnMpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5p+l6K+i6K++6KGo5Ye6546w5byC5bi4XCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDmn6Xor6LmlZnluIjmnKzlrabmnJ/mlZnlk6rkupvor77nqItcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL2J5VGVhY2hlclwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXNwb25zZUJvZHlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6LmlZnluIjmnKzlrabmnJ/mlZnlk6rkupvor77nqItcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gZmluZENvdXJzZUJ5VGVhY2hlcigpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgLy9Ib21ld29ya1N0dSBob21lV29ya0luZm8gPSBob21ld29ya1N0dVNlcnZpY2UuZmluZEhvbWVXb3JrSW5mbyhpZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyBjdXJyZW50VXNlcklkID0gU2VjdXJpdHlVdGlscy5nZXRDdXJyZW50VXNlcklkKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIEJhc2VUZXJtIGJhc2VUZXJtID0gc2NoZWR1bGVTZXJ2aWNlLnF1ZXJ5Q3VycmVudFRlcm0oKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBMaXN0PEJhc2VDb3Vyc2U+IGNvdXJzZUZvclN0dSA9IGJhc2VDb3Vyc2VTZXJ2aWNlLmZpbmRDb3Vyc2VGb3JUZWEoY3VycmVudFVzZXJJZCxiYXNlVGVybS5nZXRJZCgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLor77nqIvkv6Hmga9cIixjb3Vyc2VGb3JTdHUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDmn6Xor6LmnKzlrabmnJ/nmoTor77nqItcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL3tpZH1cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwiIOafpeivouacrOWtpuacn+eahOivvueoi1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBzZWxlY3RDb3Vyc2VCeVRlcm1JZChAUGF0aFZhcmlhYmxlIFN0cmluZyBpZCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBMaXN0PEJhc2VDb3Vyc2U+IGNvdXJzZUZvclN0dSA9IGJhc2VDb3Vyc2VTZXJ2aWNlLnNlbGVjdENvdXJzZUJ5VGVybUlkKGlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLor77nqIvkv6Hmga9cIixjb3Vyc2VGb3JTdHUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDmn6Xor6LmlZnluIjmnKzlrabmnJ/mlZnlk6rkupvnj63nuqdcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL2NsYXNzXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouaVmeW4iOacrOWtpuacn+aVmeWTquS6m+ePree6p1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBmaW5kQ2xhc3NCeVRlYWNoZXIoKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIC8vSG9tZXdvcmtTdHUgaG9tZVdvcmtJbmZvID0gaG9tZXdvcmtTdHVTZXJ2aWNlLmZpbmRIb21lV29ya0luZm8oaWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgY3VycmVudFVzZXJJZCA9IFNlY3VyaXR5VXRpbHMuZ2V0Q3VycmVudFVzZXJJZCgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBCYXNlVGVybSBiYXNlVGVybSA9IHNjaGVkdWxlU2VydmljZS5xdWVyeUN1cnJlbnRUZXJtKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKGJhc2VUZXJtIT1udWxsKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExpc3Q8QmFzZVRlYWNoY2xhc3M+IGRhdGEgPSB0ZWFjaGNsYXNzU2VydmljZS5maW5kQ2xhc3NGb3JUZWEoY3VycmVudFVzZXJJZCxiYXNlVGVybS5nZXRJZCgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi54+t57qn5L+h5oGvXCIsZGF0YSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1lbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExpc3Q8QmFzZVRlYWNoY2xhc3M+IGRhdGEgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi54+t57qn5L+h5oGvXCIsZGF0YSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDmn6Xor6LlrabnlJ/lvZPliY3lrabmnJ/mi6XmnInlk6rkupvor77nqItcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIvc3R1Y291cmNlXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouWtpueUn+W9k+WJjeWtpuacn+aLpeacieWTquS6m+ivvueoi1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBmaW5kU3R1Q291cmNlKCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAvL0hvbWV3b3JrU3R1IGhvbWVXb3JrSW5mbyA9IGhvbWV3b3JrU3R1U2VydmljZS5maW5kSG9tZVdvcmtJbmZvKGlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGN1cnJlbnRVc2VySWQgPSBTZWN1cml0eVV0aWxzLmdldEN1cnJlbnRVc2VySWQoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgTGlzdDxCYXNlQ291cnNlPiBjb3Vyc2VGb3JTdHUgPSBiYXNlQ291cnNlU2VydmljZS5maW5kQ291cnNlRm9yU3R1KGN1cnJlbnRVc2VySWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuivvueoi+S/oeaBr1wiLGNvdXJzZUZvclN0dSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIOafpeivouWtpuacny3or77nqIst5pWZ5biI5LiL55qE55So5oi3XG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmcodmFsdWUgPSBcIi9zdHVkZW50XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouWtpuacny3or77nqIst5pWZ5biI5LiL55qE55So5oi3XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGZpbmRTdHVDb3VyY2UoQFJlcXVlc3RQYXJhbSBTdHJpbmcgdGVybUlkLEBSZXF1ZXN0UGFyYW0gU3RyaW5nIGNvdXJzZUlkLEBSZXF1ZXN0UGFyYW0gU3RyaW5nIHRlYWNoZXJJZCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAvL0hvbWV3b3JrU3R1IGhvbWVXb3JrSW5mbyA9IGhvbWV3b3JrU3R1U2VydmljZS5maW5kSG9tZVdvcmtJbmZvKGlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgQ3JpdGVyaWEgY3JpdGVyaWEgPSBuZXcgQ3JpdGVyaWEoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgY3JpdGVyaWEucHV0KFwidGVybUlkXCIsdGVybUlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgY3JpdGVyaWEucHV0KFwiY291cnNlSWRcIixjb3Vyc2VJZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGNyaXRlcmlhLnB1dChcInRlYWNoZXJJZFwiLHRlYWNoZXJJZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIExpc3Q8U3R1ZGVudD4gc3R1ZGVudCA9IGJhc2VDb3Vyc2VTZXJ2aWNlLmZpbmRTdHVkZW50KGNyaXRlcmlhKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLnlKjmiLfkv6Hmga9cIixzdHVkZW50KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIn1cbiIgKwogICAgICAgICAgICAgICAgInBhY2thZ2UgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLndlYjtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICkuYXBwZW5kKAogICAgICAgICAgICAgICAgImltcG9ydCBjb20uYWxpYmFiYS5mYXN0anNvbi5KU09OT2JqZWN0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5naXRodWIucGFnZWhlbHBlci5QYWdlSW5mbztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5hdXRoLnNlY3VyaXR5LlNlY3VyaXR5VXRpbHM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnJlc3BvbnNlLmhhb2xhbmdSZXR1cm47XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnJlc3BvbnNlLmhhb2xhbmdSZXR1cm5FbnRpdHk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnV0aWwuUGFnZVV0aWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS4qO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5zZXJ2aWNlLkJhc2VTY2hlZHVsZVNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uc2VydmljZS5CYXNlVGVybVNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnNlcnZpY2UuQ2xhc3Nyb29tU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20udXRpbC5Dcml0ZXJpYTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaUltcGxpY2l0UGFyYW07XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlJbXBsaWNpdFBhcmFtcztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU9wZXJhdGlvbjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBsb21ib2suZXh0ZXJuLnNsZjRqLlNsZjRqO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLnRpbWUuRGF0ZVV0aWxzO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5kb21haW4uUGFnZWFibGU7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLndlYi5QYWdlYWJsZURlZmF1bHQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5odHRwLlJlc3BvbnNlRW50aXR5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2NoZWR1bGluZy5hbm5vdGF0aW9uLlNjaGVkdWxlZDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnN0ZXJlb3R5cGUuQ29tcG9uZW50O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlc3Npb247XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS50ZXh0LlBhcnNlRXhjZXB0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEudGV4dC5TaW1wbGVEYXRlRm9ybWF0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLkRhdGU7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuU2NoZWR1bGVkRnV0dXJlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEudXRpbC5yZWdleC5NYXRjaGVyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEudXRpbC5yZWdleC5QYXR0ZXJuO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIi8qKlxuIiArCiAgICAgICAgICAgICAgICAiICogQERlc2NyaXB0aW9uOiBCYXNlU2NoZWR1bGXlrp7kvZPnsbtcbiIgKwogICAgICAgICAgICAgICAgIiAqIEBBdXRob3I6IOW+kOaIkFxuIiArCiAgICAgICAgICAgICAgICAiICogQENvbXBhbnk6IOS6keWcqOS/oeaBr1xuIiArCiAgICAgICAgICAgICAgICAiICogQENyZWF0ZURhdGU6IEphbiAzMCwgMjAxOCAyOjI1OjUzIEFNXG4iICsKICAgICAgICAgICAgICAgICIgKi9cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiQFJlc3RDb250cm9sbGVyXG4iICsKICAgICAgICAgICAgICAgICJAUmVxdWVzdE1hcHBpbmcoXCIvYmFzZXNjaGVkdWxlXCIpXG4iICsKICAgICAgICAgICAgICAgICJAU2xmNGpcbiIgKwogICAgICAgICAgICAgICAgInB1YmxpYyBjbGFzcyBCYXNlU2NoZWR1bGVDb250cm9sbGVyIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HR0VSID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoQmFzZVNjaGVkdWxlQ29udHJvbGxlci5jbGFzcyk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXV0b3dpcmVkXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBCYXNlU2NoZWR1bGVTZXJ2aWNlIGJhc2VTY2hlZHVsZVNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXV0b3dpcmVkXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBCYXNlVGVybVNlcnZpY2UgYmFzZVRlcm1TZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEF1dG93aXJlZFxuIiArCiAgICAgICAgICAgICAgICAiICAgIHByaXZhdGUgQ2xhc3Nyb29tU2VydmljZSBjbGFzc3Jvb21TZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBTY2hlZHVsZWRGdXR1cmU8Pz4gZnV0dXJlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Yib5bu66K++6KGoXCIsIG5vdGVzID0gXCLliJvlu7ror77ooajmlrnms5XvvIzkuI3opoHmtYvor5XmraTmlrnms5XvvIHvvIHvvIHvvIHvvIHkuI3opoHmtYvor5XmraTmlrnms5XvvIHvvIHvvIHvvIHvvIHkuI3opoHmtYvor5XmraTmlrnms5XvvIHvvIHvvIHvvIHvvIFcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJ0ZXJtSWRcIiwgdmFsdWUgPSBcIuWtpuacn+S4u+mUrlwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiNjQ5NkY3NzNEMkY1MEUxM0UwNTMwMzAwMTFBQzc3MEFcIiwgZGF0YVR5cGUgPSBcIlN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFBvc3RNYXBwaW5nKHZhbHVlID0gXCIvYnVpbGRTY2hlZHVsZVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBidWlsZFNjaGVkdWxlKFN0cmluZyB0ZXJtSWQpIHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgYmFzZVNjaGVkdWxlU2VydmljZS5idWlsZFNjaGVkdWxlKHRlcm1JZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIueUn+aIkOivvuihqOWujOaIkFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIueUn+aIkOivvuihqOWHuueOsOW8guW4uFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLliJvlu7ror77ooago5Lu76YCJ6K++KVwiLCBub3RlcyA9IFwi5Yib5bu66K++6KGo5pa55rOV77yM5LiN6KaB5rWL6K+V5q2k5pa55rOV77yB77yB77yB77yB77yB5LiN6KaB5rWL6K+V5q2k5pa55rOV77yB77yB77yB77yB77yB5LiN6KaB5rWL6K+V5q2k5pa55rOV77yB77yB77yB77yB77yBXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaUltcGxpY2l0UGFyYW1zKHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInRlcm1JZFwiLCB2YWx1ZSA9IFwi5a2m5pyf5Li76ZSuXCIsIHJlcXVpcmVkID0gdHJ1ZSwgZGVmYXVsdFZhbHVlID0gXCI2NDk2Rjc3M0QyRjUwRTEzRTA1MzAzMDAxMUFDNzcwQVwiLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJra2x4ZG1cIiwgdmFsdWUgPSBcIuivvueoi+aAp+i0qFwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiMTBcIiwgZGF0YVR5cGUgPSBcIlN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInF1ZXJ5XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgfSlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmcodmFsdWUgPSBcIi9idWlsZFNjaGVkdWxlWFhcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8aGFvbGFuZ1JldHVybkVudGl0eT4gYnVpbGRTY2hlZHVsZVhYKFN0cmluZyB0ZXJtSWQsU3RyaW5nIGtrbHhkbSkge1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBiYXNlU2NoZWR1bGVTZXJ2aWNlLmJ1aWxkU2NoZWR1bGVYWCh0ZXJtSWQsa2tseGRtKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi55Sf5oiQ6K++6KGo5a6M5oiQXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgbG9nLmVycm9yKFwi55Sf5oiQ6K++6KGo5Ye6546w5byC5bi4XCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6Lor77ooahcIiwgbm90ZXMgPSBcIuafpeivouaMh+WumuWtpuacn+WSjOWRqOasoeeahOivvuihqOaVsOaNrlwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtcyh7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInRlcm1cIiwgdmFsdWUgPSBcIuWtpuacn+S4u+mUrlwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiNjQ5NkY3NzNEMkY1MEUxM0UwNTMwMzAwMTFBQzc3MEFcIiwgZGF0YVR5cGUgPSBcIlN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInBhdGhcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJ3ZWVrXCIsIHZhbHVlID0gXCLlkajmrKFcIiwgcmVxdWlyZWQgPSB0cnVlLCBkZWZhdWx0VmFsdWUgPSBcIjFcIiwgZGF0YVR5cGUgPSBcIkludGVnZXJcIiwgcGFyYW1UeXBlID0gXCJwYXRoXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgfSlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL3t0ZXJtfS97d2Vla31cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8aGFvbGFuZ1JldHVybkVudGl0eT4gcXVlcnlTY2hlZHVsZVdpdGhUZXJtKEBQYXRoVmFyaWFibGUgU3RyaW5nIHRlcm0sIEBQYXRoVmFyaWFibGUgSW50ZWdlciB3ZWVrLCBIdHRwU2Vzc2lvbiBzZXNzaW9uKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBCYXNlVGVybSBiYXNlVGVybSA9IGJhc2VUZXJtU2VydmljZS5zZWxlY3RCeVByaW1hcnlLZXkodGVybSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoYmFzZVRlcm0gPT0gbnVsbCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIuWtpuacn+S4jeWtmOWcqFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExpc3Q8QmFzZVNjaGVkdWxlPiBiYXNlU2NoZWR1bGVzID0gYmFzZVNjaGVkdWxlU2VydmljZS5xdWVyeUN1cnJlbnRUZXJtU2NoZWR1bGUodGVybSwgd2Vlaywgc2Vzc2lvbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBiYXNlVGVybS5nZXROYW1lKCkgKyBcIuWtpuacn1wiICsgXCLnrKxcIiArIHdlZWsgKyBcIuWRqOivvuihqFwiLCBiYXNlU2NoZWR1bGVzKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIuafpeivouivvuihqOWHuueOsOW8guW4uFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6LliIbpobXor77ooahcIiwgbm90ZXMgPSBcIuWPr+iuvue9ruWPguaVsO+8jOivvueoi+S4u+mUrmNvdXJzZUlkLOePree6p+S4u+mUrmNsYXNzSWQs5pel5pyfZGF0ZVwiKVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFBvc3RNYXBwaW5nKHZhbHVlID0gXCIvcXVlcnlMaXN0Rm9yUGFnZVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBmaW5kU2NoZWR1bGVCeWNvdXJzZShAUGFnZWFibGVEZWZhdWx0KHZhbHVlID0gMjApIFBhZ2VhYmxlIHBhZ2VyLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCxIdHRwU2Vzc2lvbiBzZXNzaW9uKSB0aHJvd3MgUGFyc2VFeGNlcHRpb24ge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBQYWdlYWJsZSBidWlsZCA9IFBhZ2VVdGlsLmJ1aWxkKHJlcXVlc3QsIHBhZ2VyKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgSlNPTk9iamVjdCBwYXJhbSA9IFBhZ2VVdGlsLmdldFBhcmFtKHBhZ2VyKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgQ3JpdGVyaWEgY3JpdGVyaWEgPSBuZXcgQ3JpdGVyaWEoKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBpZihwYXJhbSE9bnVsbCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIGNvdXJzZUlkID0gcGFyYW0uZ2V0U3RyaW5nKFwiY291cnNlSWRcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBTdHJpbmcgY2xhc3NJZCA9IHBhcmFtLmdldFN0cmluZyhcImNsYXNzSWRcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBEYXRlIGRhdGUgPSBwYXJhbS5nZXREYXRlKFwiZGF0ZVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChTdHJpbmdVdGlscy5pc05vdEJsYW5rKGNvdXJzZUlkKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImNvdXJzZUlkXCIsIGNvdXJzZUlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChkYXRlICE9IG51bGwpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJkYXRlXCIsIGRhdGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsoY2xhc3NJZCkpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBjcml0ZXJpYS5wdXQoXCJjbGFzc0lkXCIsIGNsYXNzSWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VJbmZvPEJhc2VTY2hlZHVsZT4gYmFzZVNjaGVkdWxlUGFnZUluZm8gPSBiYXNlU2NoZWR1bGVTZXJ2aWNlLnF1ZXJ5U2NoZWR1bGVQYWdlKGJ1aWxkLCBjcml0ZXJpYSwgc2Vzc2lvbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vayhiYXNlU2NoZWR1bGVQYWdlSW5mbyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouivvuihqFwiLCBub3RlcyA9IFwi5a2m55Sf5p+l6K+i77yI5oyH5a6a6K++56iLLOaXpeacn++8ieeahOW9k+WJjeWtpuacn+eahOivvuihqOaVsOaNrlwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtcyh7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcImNsYXNzSWRcIiwgdmFsdWUgPSBcIuePree6p+S4u+mUrlwiLCByZXF1aXJlZCA9IHRydWUsIGRhdGFUeXBlID0gXCJTdHJpbmdcIiwgcGFyYW1UeXBlID0gXCJwYXRoXCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwid2Vla1wiLCB2YWx1ZSA9IFwi5ZGo5qyhXCIsIHJlcXVpcmVkID0gdHJ1ZSwgZGVmYXVsdFZhbHVlID0gXCIxXCIsIGRhdGFUeXBlID0gXCJJbnRlZ2VyXCIsIHBhcmFtVHlwZSA9IFwicGF0aFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH0pXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEdldE1hcHBpbmcodmFsdWUgPSBcIi9jbGFzcy97Y2xhc3NJZH0ve3dlZWt9XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PGhhb2xhbmdSZXR1cm5FbnRpdHk+IHF1ZXJ5U2NoZWR1bGVXaXRoQ2xhc3NJZChAUGF0aFZhcmlhYmxlIFN0cmluZyBjbGFzc0lkLCBAUGF0aFZhcmlhYmxlIEludGVnZXIgd2VlayxIdHRwU2Vzc2lvbiBzZXNzaW9uKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBCYXNlVGVybSB0ZXJtID0gYmFzZVNjaGVkdWxlU2VydmljZS5xdWVyeUN1cnJlbnRUZXJtKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMaXN0PEJhc2VTY2hlZHVsZT4gYmFzZVNjaGVkdWxlcyA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlDdXJyZW50VGVybVNjaGVkdWxlKHRlcm0uZ2V0SWQoKSxjbGFzc0lkLCB3ZWVrLCBzZXNzaW9uKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIHRlcm0uZ2V0TmFtZSgpICsgXCLlrabmnJ9cIiArIFwi56ysXCIgKyB3ZWVrICsgXCLlkajor77ooahcIiwgYmFzZVNjaGVkdWxlcyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBsb2cuZXJyb3IoXCLmn6Xor6Lor77ooajlh7rnjrDlvILluLhcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6LlrabnlJ/mlZnlrabov5vnqIvor77ooahcIiwgbm90ZXMgPSBcIuafpeivouaMh+WumuWtpuacn+WSjOWRqOasoeeahOivvuihqOaVsOaNrlwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtcyh7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInRlcm1cIiwgdmFsdWUgPSBcIuWtpuacn+S4u+mUrlwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiNjQ5NkY3NzNEMkY1MEUxM0UwNTMwMzAwMTFBQzc3MEFcIiwgZGF0YVR5cGUgPSBcIlN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInBhdGhcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJ3ZWVrXCIsIHZhbHVlID0gXCLlkajmrKFcIiwgcmVxdWlyZWQgPSB0cnVlLCBkZWZhdWx0VmFsdWUgPSBcIjFcIiwgZGF0YVR5cGUgPSBcIkludGVnZXJcIiwgcGFyYW1UeXBlID0gXCJwYXRoXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgfSlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL2NoZWNrL3t0ZXJtfS97d2Vla31cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgT2JqZWN0IGNoZWNrU3R1ZGVudChAUGF0aFZhcmlhYmxlIFN0cmluZyB0ZXJtLCBAUGF0aFZhcmlhYmxlIEludGVnZXIgd2VlaywgSHR0cFNlc3Npb24gc2Vzc2lvbil7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBCYXNlVGVybSBiYXNlVGVybSA9IGJhc2VUZXJtU2VydmljZS5zZWxlY3RCeVByaW1hcnlLZXkodGVybSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoYmFzZVRlcm0gPT0gbnVsbCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIuWtpuacn+S4jeWtmOWcqFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIC8v5Yik5pat5piv5LiN5piv5a2m55Sf5a6e6K6tXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBTdHJpbmcgY2hlY2s9bnVsbDtcbiIgKwogICAgICAgICAgICAgICAgIi8vICAgICAgICAgICAgU3RyaW5nIGNoZWNrID0gYmFzZVNjaGVkdWxlU2VydmljZS5jaGVjayh3ZWVrLCBzZXNzaW9uKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmKGNoZWNrIT1udWxsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSxiYXNlVGVybS5nZXROYW1lKCkgKyBcIuWtpuacn1wiICsgXCLnrKxcIiArIHdlZWsgKyBcIuWRqOS4uuaVmeWtpuWunuiureWRqFwiLGNoZWNrKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1lbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSxiYXNlVGVybS5nZXROYW1lKCkgKyBcIuWtpuacn1wiICsgXCLnrKxcIiArIHdlZWsgKyBcIuWRqOS4jeaYr+aVmeWtpuWunuiureWRqFwiLGNoZWNrKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfWNhdGNoIChFeGNlcHRpb24gZSl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBsb2cuZXJyb3IoXCLmn6Xor6LlrabnlJ/mlZnlrabov5vnqIvor77ooajlh7rnjrDlvILluLhcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5p+l6K+i6K++6KGoXCIsIG5vdGVzID0gXCLmn6Xor6LmjIflrprlrabmnJ/lkozlkajmrKHnmoTor77ooajmlbDmja5cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpSW1wbGljaXRQYXJhbXMoe1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJ0ZXJtXCIsIHZhbHVlID0gXCLlrabmnJ/kuLvplK5cIiwgcmVxdWlyZWQgPSB0cnVlLCBkZWZhdWx0VmFsdWUgPSBcIjY0OTZGNzczRDJGNTBFMTNFMDUzMDMwMDExQUM3NzBBXCIsIGRhdGFUeXBlID0gXCJTdHJpbmdcIiwgcGFyYW1UeXBlID0gXCJwYXRoXCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwid2Vla1wiLCB2YWx1ZSA9IFwi5ZGo5qyhXCIsIHJlcXVpcmVkID0gdHJ1ZSwgZGVmYXVsdFZhbHVlID0gXCIxXCIsIGRhdGFUeXBlID0gXCJJbnRlZ2VyXCIsIHBhcmFtVHlwZSA9IFwicGF0aFwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInRlYWNoZXJpZFwiLCB2YWx1ZSA9IFwi5pWZ5biIaWRcIiwgcmVxdWlyZWQgPSB0cnVlLCBkZWZhdWx0VmFsdWUgPSBcIlwiLCBkYXRhVHlwZSA9IFwiSW50ZWdlclwiLCBwYXJhbVR5cGUgPSBcInBhdGhcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9KVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIve3Rlcm19L3t3ZWVrfS97dGVhY2hlcmlkfVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBxdWVyeVNjaGVkdWxlV2l0aFRlcm1BbmRUZWFjaGVySWQoQFBhdGhWYXJpYWJsZSBTdHJpbmcgdGVybSwgQFBhdGhWYXJpYWJsZSBJbnRlZ2VyIHdlZWssIEBQYXRoVmFyaWFibGUgU3RyaW5nIHRlYWNoZXJpZCwgSHR0cFNlc3Npb24gc2Vzc2lvbikge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQmFzZVRlcm0gYmFzZVRlcm0gPSBiYXNlVGVybVNlcnZpY2Uuc2VsZWN0QnlQcmltYXJ5S2V5KHRlcm0pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGJhc2VUZXJtID09IG51bGwpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLlrabmnJ/kuI3lrZjlnKhcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMaXN0PEJhc2VTY2hlZHVsZT4gYmFzZVNjaGVkdWxlcyA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlDdXJyZW50VGVybVNjaGVkdWxlKHRlcm0sIHdlZWssIHRlYWNoZXJpZCxzZXNzaW9uKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIGJhc2VUZXJtLmdldE5hbWUoKSArIFwi5a2m5pyfXCIgKyBcIuesrFwiICsgd2VlayArIFwi5ZGo6K++6KGoXCIsIGJhc2VTY2hlZHVsZXMpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgbG9nLmVycm9yKFwi5p+l6K+i6K++6KGo5Ye6546w5byC5bi4XCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICkuYXBwZW5kKAogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6Lor77ooahcIiwgbm90ZXMgPSBcIuafpeivouaMh+WumuWRqOasoeeahOW9k+WJjeWtpuacn+eahOivvuihqOaVsOaNrlwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcIndlZWtcIiwgdmFsdWUgPSBcIuWRqOasoVwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiLCBkYXRhVHlwZSA9IFwiSW50ZWdlclwiLCBwYXJhbVR5cGUgPSBcInBhdGhcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL3t3ZWVrfVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBxdWVyeUN1cnJlbnRUZXJtU2NoZWR1bGUoQFBhdGhWYXJpYWJsZSBJbnRlZ2VyIHdlZWssIEh0dHBTZXNzaW9uIHNlc3Npb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmICh3ZWVrID09IC0xKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgd2VlayA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlDdXJyZW50V2Vla2x5KCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMaXN0PEJhc2VTY2hlZHVsZT4gYmFzZVNjaGVkdWxlcyA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlDdXJyZW50VGVybVNjaGVkdWxlKHdlZWssIHNlc3Npb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLnrKxcIiArIHdlZWsgKyBcIuWRqOivvuihqFwiLCBiYXNlU2NoZWR1bGVzKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIuafpeivouivvuihqOWHuueOsOW8guW4uFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6LlvZPliY3lrabmnJ9cIiwgbm90ZXMgPSBcIuafpeivouW9k+WJjeWtpuacn++8jOWmguaenOafpeivouS4jeWHuuaIluiAheaVsOaNruaciemXrumimO+8jOi/lOWbnueoi+W6j+W8guW4uO+8jOivt+iBlOezu+euoeeQhuWRmFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIvY3VycmVudFRlcm1cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8aGFvbGFuZ1JldHVybkVudGl0eT4gcXVlcnlDdXJyZW50VGVybSgpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEJhc2VUZXJtIGJhc2VUZXJtID0gYmFzZVNjaGVkdWxlU2VydmljZS5xdWVyeUN1cnJlbnRUZXJtKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoYmFzZVRlcm0gIT0gbnVsbCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5b2T5YmN5a2m5pyfXCIsIGJhc2VUZXJtKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH0gZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi56iL5bqP5byC5bi477yM6K+36IGU57O7566h55CG5ZGYXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBsb2cuZXJyb3IoXCLmn6Xor6LlvZPliY3lrabmnJ/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5p+l6K+i5b2T5YmN5ZGoXCIsIG5vdGVzID0gXCLmn6Xor6LlvZPliY3lkajvvIzlk43lupTkvZPkuLppbnTnsbvlnotcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL2N1cnJlbnRXZWVrbHlcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8aGFvbGFuZ1JldHVybkVudGl0eT4gcXVlcnlDdXJyZW50V2Vla2x5KCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGkgPSBiYXNlU2NoZWR1bGVTZXJ2aWNlLnF1ZXJ5Q3VycmVudFdlZWtseSgpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuW9k+WJjeWRqFwiLCBpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIuafpeivouW9k+WJjeWRqOWHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6LlvZPliY3lrabmnJ/lkajlkajmlbBcIiwgbm90ZXMgPSBcIuWTjeW6lOS9k+S4umludOexu+Wei1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIvd2Vla2x5c1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBxdWVyeVdlZWtseXMoKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpbnQgaSA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlXZWVrbHlzKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuW9k+WJjeWtpuacn+aAu+WRqOaVsFwiLCBpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIuafpeivouW9k+WJjeWtpuacn+aAu+WRqOaYr+WHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouWtpuacn+mbhuWQiFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIvVGVybXNcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8aGFvbGFuZ1JldHVybkVudGl0eT4gcXVlcnlUcmVtcygpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExpc3Q8QmFzZVRlcm0+IGJhc2VUZXJtcyA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlUZXJtcygpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLlrabmnJ/liJfooahcIiwgYmFzZVRlcm1zKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIuafpeivouWtpuacn+WIl+ihqOWHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6LmjIflrprlrabmnJ/nmoTmgLvlkajmlbBcIiwgbm90ZXMgPSBcIuWTjeW6lOS9k+S4umludOexu+Wei1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInRlcm1JZFwiLCB2YWx1ZSA9IFwi5a2m5pyf5Li76ZSuXCIsIHJlcXVpcmVkID0gdHJ1ZSwgZGVmYXVsdFZhbHVlID0gXCI2NDk2Rjc3M0QyRjUwRTEzRTA1MzAzMDAxMUFDNzcwQVwiLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicGF0aFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIvd2Vla2x5cy97dGVybUlkfVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBxdWVyeVdlZWtseXMoQFBhdGhWYXJpYWJsZSBTdHJpbmcgdGVybUlkKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpbnQgaSA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlXZWVrbHlzKHRlcm1JZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIumAieS4reWtpuacn+eahOaAu+WRqOaVsFwiLCBpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIuaMieeFp+mAieS4reWtpuacn+afpeivouWtpuacn+eahOaAu+WRqOaVsOWHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJ9XG4iICsKICAgICAgICAgICAgICAgICJwYWNrYWdlIGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS53ZWI7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5hbGliYWJhLmZhc3Rqc29uLkpTT05PYmplY3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmdpdGh1Yi5wYWdlaGVscGVyLlBhZ2VJbmZvO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLmF1dGguc2VjdXJpdHkuU2VjdXJpdHlVdGlscztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24ucmVzcG9uc2UuaGFvbGFuZ1JldHVybjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24ucmVzcG9uc2UuaGFvbGFuZ1JldHVybkVudGl0eTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24udXRpbC5QYWdlVXRpbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5Lio7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnNlcnZpY2UuQmFzZVNjaGVkdWxlU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5zZXJ2aWNlLkJhc2VUZXJtU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uc2VydmljZS5DbGFzc3Jvb21TZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS51dGlsLkNyaXRlcmlhO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpSW1wbGljaXRQYXJhbTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaUltcGxpY2l0UGFyYW1zO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpT3BlcmF0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGxvbWJvay5leHRlcm4uc2xmNGouU2xmNGo7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcuU3RyaW5nVXRpbHM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmxhbmcudGltZS5EYXRlVXRpbHM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLmRvbWFpbi5QYWdlYWJsZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEud2ViLlBhZ2VhYmxlRGVmYXVsdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmh0dHAuUmVzcG9uc2VFbnRpdHk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zY2hlZHVsaW5nLmFubm90YXRpb24uU2NoZWR1bGVkO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5Db21wb25lbnQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLio7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnRleHQuUGFyc2VFeGNlcHRpb247XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnV0aWwuRGF0ZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnV0aWwuY29uY3VycmVudC5TY2hlZHVsZWRGdXR1cmU7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLnJlZ2V4Lk1hdGNoZXI7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLnJlZ2V4LlBhdHRlcm47XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiLyoqXG4iICsKICAgICAgICAgICAgICAgICIgKiBARGVzY3JpcHRpb246IEJhc2VTY2hlZHVsZeWunuS9k+exu1xuIiArCiAgICAgICAgICAgICAgICAiICogQEF1dGhvcjog5b6Q5oiQXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ29tcGFueTog5LqR5Zyo5L+h5oGvXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ3JlYXRlRGF0ZTogSmFuIDMwLCAyMDE4IDI6MjU6NTMgQU1cbiIgKwogICAgICAgICAgICAgICAgIiAqL1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJAUmVzdENvbnRyb2xsZXJcbiIgKwogICAgICAgICAgICAgICAgIkBSZXF1ZXN0TWFwcGluZyhcIi9iYXNlc2NoZWR1bGVcIilcbiIgKwogICAgICAgICAgICAgICAgIkBTbGY0alxuIiArCiAgICAgICAgICAgICAgICAicHVibGljIGNsYXNzIEJhc2VTY2hlZHVsZUNvbnRyb2xsZXIge1xuIiArCiAgICAgICAgICAgICAgICAiICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBMT0dHRVIgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihCYXNlU2NoZWR1bGVDb250cm9sbGVyLmNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBdXRvd2lyZWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIEJhc2VTY2hlZHVsZVNlcnZpY2UgYmFzZVNjaGVkdWxlU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBdXRvd2lyZWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIEJhc2VUZXJtU2VydmljZSBiYXNlVGVybVNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXV0b3dpcmVkXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBDbGFzc3Jvb21TZXJ2aWNlIGNsYXNzcm9vbVNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIFNjaGVkdWxlZEZ1dHVyZTw/PiBmdXR1cmU7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLliJvlu7ror77ooahcIiwgbm90ZXMgPSBcIuWIm+W7uuivvuihqOaWueazle+8jOS4jeimgea1i+ivleatpOaWueazle+8ge+8ge+8ge+8ge+8geS4jeimgea1i+ivleatpOaWueazle+8ge+8ge+8ge+8ge+8geS4jeimgea1i+ivleatpOaWueazle+8ge+8ge+8ge+8ge+8gVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInRlcm1JZFwiLCB2YWx1ZSA9IFwi5a2m5pyf5Li76ZSuXCIsIHJlcXVpcmVkID0gdHJ1ZSwgZGVmYXVsdFZhbHVlID0gXCI2NDk2Rjc3M0QyRjUwRTEzRTA1MzAzMDAxMUFDNzcwQVwiLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmcodmFsdWUgPSBcIi9idWlsZFNjaGVkdWxlXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PGhhb2xhbmdSZXR1cm5FbnRpdHk+IGJ1aWxkU2NoZWR1bGUoU3RyaW5nIHRlcm1JZCkge1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBiYXNlU2NoZWR1bGVTZXJ2aWNlLmJ1aWxkU2NoZWR1bGUodGVybUlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi55Sf5oiQ6K++6KGo5a6M5oiQXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgbG9nLmVycm9yKFwi55Sf5oiQ6K++6KGo5Ye6546w5byC5bi4XCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuWIm+W7uuivvuihqCjku7vpgInor74pXCIsIG5vdGVzID0gXCLliJvlu7ror77ooajmlrnms5XvvIzkuI3opoHmtYvor5XmraTmlrnms5XvvIHvvIHvvIHvvIHvvIHkuI3opoHmtYvor5XmraTmlrnms5XvvIHvvIHvvIHvvIHvvIHkuI3opoHmtYvor5XmraTmlrnms5XvvIHvvIHvvIHvvIHvvIFcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpSW1wbGljaXRQYXJhbXMoe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwidGVybUlkXCIsIHZhbHVlID0gXCLlrabmnJ/kuLvplK5cIiwgcmVxdWlyZWQgPSB0cnVlLCBkZWZhdWx0VmFsdWUgPSBcIjY0OTZGNzczRDJGNTBFMTNFMDUzMDMwMDExQUM3NzBBXCIsIGRhdGFUeXBlID0gXCJTdHJpbmdcIiwgcGFyYW1UeXBlID0gXCJxdWVyeVwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcImtrbHhkbVwiLCB2YWx1ZSA9IFwi6K++56iL5oCn6LSoXCIsIHJlcXVpcmVkID0gdHJ1ZSwgZGVmYXVsdFZhbHVlID0gXCIxMFwiLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicXVlcnlcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9KVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZyh2YWx1ZSA9IFwiL2J1aWxkU2NoZWR1bGVYWFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBidWlsZFNjaGVkdWxlWFgoU3RyaW5nIHRlcm1JZCxTdHJpbmcga2tseGRtKSB7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGJhc2VTY2hlZHVsZVNlcnZpY2UuYnVpbGRTY2hlZHVsZVhYKHRlcm1JZCxra2x4ZG0pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLnlJ/miJDor77ooajlrozmiJBcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBsb2cuZXJyb3IoXCLnlJ/miJDor77ooajlh7rnjrDlvILluLhcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouivvuihqFwiLCBub3RlcyA9IFwi5p+l6K+i5oyH5a6a5a2m5pyf5ZKM5ZGo5qyh55qE6K++6KGo5pWw5o2uXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaUltcGxpY2l0UGFyYW1zKHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwidGVybVwiLCB2YWx1ZSA9IFwi5a2m5pyf5Li76ZSuXCIsIHJlcXVpcmVkID0gdHJ1ZSwgZGVmYXVsdFZhbHVlID0gXCI2NDk2Rjc3M0QyRjUwRTEzRTA1MzAzMDAxMUFDNzcwQVwiLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicGF0aFwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcIndlZWtcIiwgdmFsdWUgPSBcIuWRqOasoVwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiLCBkYXRhVHlwZSA9IFwiSW50ZWdlclwiLCBwYXJhbVR5cGUgPSBcInBhdGhcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9KVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIve3Rlcm19L3t3ZWVrfVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBxdWVyeVNjaGVkdWxlV2l0aFRlcm0oQFBhdGhWYXJpYWJsZSBTdHJpbmcgdGVybSwgQFBhdGhWYXJpYWJsZSBJbnRlZ2VyIHdlZWssIEh0dHBTZXNzaW9uIHNlc3Npb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEJhc2VUZXJtIGJhc2VUZXJtID0gYmFzZVRlcm1TZXJ2aWNlLnNlbGVjdEJ5UHJpbWFyeUtleSh0ZXJtKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChiYXNlVGVybSA9PSBudWxsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi5a2m5pyf5LiN5a2Y5ZyoXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTGlzdDxCYXNlU2NoZWR1bGU+IGJhc2VTY2hlZHVsZXMgPSBiYXNlU2NoZWR1bGVTZXJ2aWNlLnF1ZXJ5Q3VycmVudFRlcm1TY2hlZHVsZSh0ZXJtLCB3ZWVrLCBzZXNzaW9uKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIGJhc2VUZXJtLmdldE5hbWUoKSArIFwi5a2m5pyfXCIgKyBcIuesrFwiICsgd2VlayArIFwi5ZGo6K++6KGoXCIsIGJhc2VTY2hlZHVsZXMpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgbG9nLmVycm9yKFwi5p+l6K+i6K++6KGo5Ye6546w5byC5bi4XCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouWIhumhteivvuihqFwiLCBub3RlcyA9IFwi5Y+v6K6+572u5Y+C5pWw77yM6K++56iL5Li76ZSuY291cnNlSWQs54+t57qn5Li76ZSuY2xhc3NJZCzml6XmnJ9kYXRlXCIpXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmcodmFsdWUgPSBcIi9xdWVyeUxpc3RGb3JQYWdlXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGZpbmRTY2hlZHVsZUJ5Y291cnNlKEBQYWdlYWJsZURlZmF1bHQodmFsdWUgPSAyMCkgUGFnZWFibGUgcGFnZXIsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LEh0dHBTZXNzaW9uIHNlc3Npb24pIHRocm93cyBQYXJzZUV4Y2VwdGlvbiB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VhYmxlIGJ1aWxkID0gUGFnZVV0aWwuYnVpbGQocmVxdWVzdCwgcGFnZXIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBKU09OT2JqZWN0IHBhcmFtID0gUGFnZVV0aWwuZ2V0UGFyYW0ocGFnZXIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBDcml0ZXJpYSBjcml0ZXJpYSA9IG5ldyBDcml0ZXJpYSgpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIGlmKHBhcmFtIT1udWxsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBTdHJpbmcgY291cnNlSWQgPSBwYXJhbS5nZXRTdHJpbmcoXCJjb3Vyc2VJZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIFN0cmluZyBjbGFzc0lkID0gcGFyYW0uZ2V0U3RyaW5nKFwiY2xhc3NJZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIERhdGUgZGF0ZSA9IHBhcmFtLmdldERhdGUoXCJkYXRlXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKFN0cmluZ1V0aWxzLmlzTm90QmxhbmsoY291cnNlSWQpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgY3JpdGVyaWEucHV0KFwiY291cnNlSWRcIiwgY291cnNlSWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGRhdGUgIT0gbnVsbCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImRhdGVcIiwgZGF0ZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoU3RyaW5nVXRpbHMuaXNOb3RCbGFuayhjbGFzc0lkKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGNyaXRlcmlhLnB1dChcImNsYXNzSWRcIiwgY2xhc3NJZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgUGFnZUluZm88QmFzZVNjaGVkdWxlPiBiYXNlU2NoZWR1bGVQYWdlSW5mbyA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlTY2hlZHVsZVBhZ2UoYnVpbGQsIGNyaXRlcmlhLCBzZXNzaW9uKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKGJhc2VTY2hlZHVsZVBhZ2VJbmZvKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5p+l6K+i6K++6KGoXCIsIG5vdGVzID0gXCLlrabnlJ/mn6Xor6LvvIjmjIflrpror77nqIss5pel5pyf77yJ55qE5b2T5YmN5a2m5pyf55qE6K++6KGo5pWw5o2uXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaUltcGxpY2l0UGFyYW1zKHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwiY2xhc3NJZFwiLCB2YWx1ZSA9IFwi54+t57qn5Li76ZSuXCIsIHJlcXVpcmVkID0gdHJ1ZSwgZGF0YVR5cGUgPSBcIlN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInBhdGhcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJ3ZWVrXCIsIHZhbHVlID0gXCLlkajmrKFcIiwgcmVxdWlyZWQgPSB0cnVlLCBkZWZhdWx0VmFsdWUgPSBcIjFcIiwgZGF0YVR5cGUgPSBcIkludGVnZXJcIiwgcGFyYW1UeXBlID0gXCJwYXRoXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgfSlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL2NsYXNzL3tjbGFzc0lkfS97d2Vla31cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8aGFvbGFuZ1JldHVybkVudGl0eT4gcXVlcnlTY2hlZHVsZVdpdGhDbGFzc0lkKEBQYXRoVmFyaWFibGUgU3RyaW5nIGNsYXNzSWQsIEBQYXRoVmFyaWFibGUgSW50ZWdlciB3ZWVrLEh0dHBTZXNzaW9uIHNlc3Npb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEJhc2VUZXJtIHRlcm0gPSBiYXNlU2NoZWR1bGVTZXJ2aWNlLnF1ZXJ5Q3VycmVudFRlcm0oKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExpc3Q8QmFzZVNjaGVkdWxlPiBiYXNlU2NoZWR1bGVzID0gYmFzZVNjaGVkdWxlU2VydmljZS5xdWVyeUN1cnJlbnRUZXJtU2NoZWR1bGUodGVybS5nZXRJZCgpLGNsYXNzSWQsIHdlZWssIHNlc3Npb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgdGVybS5nZXROYW1lKCkgKyBcIuWtpuacn1wiICsgXCLnrKxcIiArIHdlZWsgKyBcIuWRqOivvuihqFwiLCBiYXNlU2NoZWR1bGVzKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIuafpeivouivvuihqOWHuueOsOW8guW4uFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouWtpueUn+aVmeWtpui/m+eoi+ivvuihqFwiLCBub3RlcyA9IFwi5p+l6K+i5oyH5a6a5a2m5pyf5ZKM5ZGo5qyh55qE6K++6KGo5pWw5o2uXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaUltcGxpY2l0UGFyYW1zKHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwidGVybVwiLCB2YWx1ZSA9IFwi5a2m5pyf5Li76ZSuXCIsIHJlcXVpcmVkID0gdHJ1ZSwgZGVmYXVsdFZhbHVlID0gXCI2NDk2Rjc3M0QyRjUwRTEzRTA1MzAzMDAxMUFDNzcwQVwiLCBkYXRhVHlwZSA9IFwiU3RyaW5nXCIsIHBhcmFtVHlwZSA9IFwicGF0aFwiKSxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcIndlZWtcIiwgdmFsdWUgPSBcIuWRqOasoVwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiLCBkYXRhVHlwZSA9IFwiSW50ZWdlclwiLCBwYXJhbVR5cGUgPSBcInBhdGhcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9KVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIvY2hlY2sve3Rlcm19L3t3ZWVrfVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBPYmplY3QgY2hlY2tTdHVkZW50KEBQYXRoVmFyaWFibGUgU3RyaW5nIHRlcm0sIEBQYXRoVmFyaWFibGUgSW50ZWdlciB3ZWVrLCBIdHRwU2Vzc2lvbiBzZXNzaW9uKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEJhc2VUZXJtIGJhc2VUZXJtID0gYmFzZVRlcm1TZXJ2aWNlLnNlbGVjdEJ5UHJpbWFyeUtleSh0ZXJtKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChiYXNlVGVybSA9PSBudWxsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi5a2m5pyf5LiN5a2Y5ZyoXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgLy/liKTmlq3mmK/kuI3mmK/lrabnlJ/lrp7orq1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIFN0cmluZyBjaGVjaz1udWxsO1xuIiArCiAgICAgICAgICAgICAgICAiLy8gICAgICAgICAgICBTdHJpbmcgY2hlY2sgPSBiYXNlU2NoZWR1bGVTZXJ2aWNlLmNoZWNrKHdlZWssIHNlc3Npb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYoY2hlY2shPW51bGwpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLGJhc2VUZXJtLmdldE5hbWUoKSArIFwi5a2m5pyfXCIgKyBcIuesrFwiICsgd2VlayArIFwi5ZGo5Li65pWZ5a2m5a6e6K6t5ZGoXCIsY2hlY2spO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfWVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLGJhc2VUZXJtLmdldE5hbWUoKSArIFwi5a2m5pyfXCIgKyBcIuesrFwiICsgd2VlayArIFwi5ZGo5LiN5piv5pWZ5a2m5a6e6K6t5ZGoXCIsY2hlY2spO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9Y2F0Y2ggKEV4Y2VwdGlvbiBlKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIuafpeivouWtpueUn+aVmeWtpui/m+eoi+ivvuihqOWHuueOsOW8guW4uFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6Lor77ooahcIiwgbm90ZXMgPSBcIuafpeivouaMh+WumuWtpuacn+WSjOWRqOasoeeahOivvuihqOaVsOaNrlwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtcyh7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcInRlcm1cIiwgdmFsdWUgPSBcIuWtpuacn+S4u+mUrlwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiNjQ5NkY3NzNEMkY1MEUxM0UwNTMwMzAwMTFBQzc3MEFcIiwgZGF0YVR5cGUgPSBcIlN0cmluZ1wiLCBwYXJhbVR5cGUgPSBcInBhdGhcIiksXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBAQXBpSW1wbGljaXRQYXJhbShuYW1lID0gXCJ3ZWVrXCIsIHZhbHVlID0gXCLlkajmrKFcIiwgcmVxdWlyZWQgPSB0cnVlLCBkZWZhdWx0VmFsdWUgPSBcIjFcIiwgZGF0YVR5cGUgPSBcIkludGVnZXJcIiwgcGFyYW1UeXBlID0gXCJwYXRoXCIpLFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwidGVhY2hlcmlkXCIsIHZhbHVlID0gXCLmlZnluIhpZFwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiXCIsIGRhdGFUeXBlID0gXCJJbnRlZ2VyXCIsIHBhcmFtVHlwZSA9IFwicGF0aFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH0pXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEdldE1hcHBpbmcodmFsdWUgPSBcIi97dGVybX0ve3dlZWt9L3t0ZWFjaGVyaWR9XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PGhhb2xhbmdSZXR1cm5FbnRpdHk+IHF1ZXJ5U2NoZWR1bGVXaXRoVGVybUFuZFRlYWNoZXJJZChAUGF0aFZhcmlhYmxlIFN0cmluZyB0ZXJtLCBAUGF0aFZhcmlhYmxlIEludGVnZXIgd2VlaywgQFBhdGhWYXJpYWJsZSBTdHJpbmcgdGVhY2hlcmlkLCBIdHRwU2Vzc2lvbiBzZXNzaW9uKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBCYXNlVGVybSBiYXNlVGVybSA9IGJhc2VUZXJtU2VydmljZS5zZWxlY3RCeVByaW1hcnlLZXkodGVybSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoYmFzZVRlcm0gPT0gbnVsbCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIuWtpuacn+S4jeWtmOWcqFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExpc3Q8QmFzZVNjaGVkdWxlPiBiYXNlU2NoZWR1bGVzID0gYmFzZVNjaGVkdWxlU2VydmljZS5xdWVyeUN1cnJlbnRUZXJtU2NoZWR1bGUodGVybSwgd2VlaywgdGVhY2hlcmlkLHNlc3Npb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgYmFzZVRlcm0uZ2V0TmFtZSgpICsgXCLlrabmnJ9cIiArIFwi56ysXCIgKyB3ZWVrICsgXCLlkajor77ooahcIiwgYmFzZVNjaGVkdWxlcyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBsb2cuZXJyb3IoXCLmn6Xor6Lor77ooajlh7rnjrDlvILluLhcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6Lor77ooahcIiwgbm90ZXMgPSBcIuafpeivouaMh+WumuWRqOasoeeahOW9k+WJjeWtpuacn+eahOivvuihqOaVsOaNrlwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlJbXBsaWNpdFBhcmFtKG5hbWUgPSBcIndlZWtcIiwgdmFsdWUgPSBcIuWRqOasoVwiLCByZXF1aXJlZCA9IHRydWUsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiLCBkYXRhVHlwZSA9IFwiSW50ZWdlclwiLCBwYXJhbVR5cGUgPSBcInBhdGhcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyh2YWx1ZSA9IFwiL3t3ZWVrfVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBxdWVyeUN1cnJlbnRUZXJtU2NoZWR1bGUoQFBhdGhWYXJpYWJsZSBJbnRlZ2VyIHdlZWssIEh0dHBTZXNzaW9uIHNlc3Npb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmICh3ZWVrID09IC0xKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgd2VlayA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlDdXJyZW50V2Vla2x5KCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMaXN0PEJhc2VTY2hlZHVsZT4gYmFzZVNjaGVkdWxlcyA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlDdXJyZW50VGVybVNjaGVkdWxlKHdlZWssIHNlc3Npb24pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLnrKxcIiArIHdlZWsgKyBcIuWRqOivvuihqFwiLCBiYXNlU2NoZWR1bGVzKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGxvZy5lcnJvcihcIuafpeivouivvuihqOWHuueOsOW8guW4uFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6LlvZPliY3lrabmnJ9cIiwgbm90ZXMgPSBcIuafpeivouW9k+WJjeWtpuacn++8jOWmguaenOafpeivouS4jeWHuuaIluiAheaVsOaNruaciemXrumimO+8jOi/lOWbnueoi+W6j+W8guW4uO+8jOivt+iBlOezu+euoeeQhuWRmFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIvY3VycmVudFRlcm1cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8aGFvbGFuZ1JldHVybkVudGl0eT4gcXVlcnlDdXJyZW50VGVybSgpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEJhc2VUZXJtIGJhc2VUZXJtID0gYmFzZVNjaGVkdWxlU2VydmljZS5xdWVyeUN1cnJlbnRUZXJtKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoYmFzZVRlcm0gIT0gbnVsbCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5b2T5YmN5a2m5pyfXCIsIGJhc2VUZXJtKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH0gZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi56iL5bqP5byC5bi477yM6K+36IGU57O7566h55CG5ZGYXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBsb2cuZXJyb3IoXCLmn6Xor6LlvZPliY3lrabmnJ/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiApLmFwcGVuZCgKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmn6Xor6LlvZPliY3lkahcIiwgbm90ZXMgPSBcIuafpeivouW9k+WJjeWRqO+8jOWTjeW6lOS9k+S4umludOexu+Wei1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBHZXRNYXBwaW5nKHZhbHVlID0gXCIvY3VycmVudFdlZWtseVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBxdWVyeUN1cnJlbnRXZWVrbHkoKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpbnQgaSA9IGJhc2VTY2hlZHVsZVNlcnZpY2UucXVlcnlDdXJyZW50V2Vla2x5KCk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5b2T5YmN5ZGoXCIsIGkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgbG9nLmVycm9yKFwi5p+l6K+i5b2T5YmN5ZGo5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouW9k+WJjeWtpuacn+WRqOWRqOaVsFwiLCBub3RlcyA9IFwi5ZON5bqU5L2T5Li6aW5057G75Z6LXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEdldE1hcHBpbmcodmFsdWUgPSBcIi93ZWVrbHlzXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PGhhb2xhbmdSZXR1cm5FbnRpdHk+IHF1ZXJ5V2Vla2x5cygpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCBpID0gYmFzZVNjaGVkdWxlU2VydmljZS5xdWVyeVdlZWtseXMoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5b2T5YmN5a2m5pyf5oC75ZGo5pWwXCIsIGkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgbG9nLmVycm9yKFwi5p+l6K+i5b2T5YmN5a2m5pyf5oC75ZGo5piv5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5p+l6K+i5a2m5pyf6ZuG5ZCIXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEdldE1hcHBpbmcodmFsdWUgPSBcIi9UZXJtc1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBxdWVyeVRyZW1zKCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTGlzdDxCYXNlVGVybT4gYmFzZVRlcm1zID0gYmFzZVNjaGVkdWxlU2VydmljZS5xdWVyeVRlcm1zKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuWtpuacn+WIl+ihqFwiLCBiYXNlVGVybXMpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgbG9nLmVycm9yKFwi5p+l6K+i5a2m5pyf5YiX6KGo5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuafpeivouaMh+WumuWtpuacn+eahOaAu+WRqOaVsFwiLCBub3RlcyA9IFwi5ZON5bqU5L2T5Li6aW5057G75Z6LXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEFwaUltcGxpY2l0UGFyYW0obmFtZSA9IFwidGVybUlkXCIsIHZhbHVlID0gXCLlrabmnJ/kuLvplK5cIiwgcmVxdWlyZWQgPSB0cnVlLCBkZWZhdWx0VmFsdWUgPSBcIjY0OTZGNzczRDJGNTBFMTNFMDUzMDMwMDExQUM3NzBBXCIsIGRhdGFUeXBlID0gXCJTdHJpbmdcIiwgcGFyYW1UeXBlID0gXCJwYXRoXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEdldE1hcHBpbmcodmFsdWUgPSBcIi93ZWVrbHlzL3t0ZXJtSWR9XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PGhhb2xhbmdSZXR1cm5FbnRpdHk+IHF1ZXJ5V2Vla2x5cyhAUGF0aFZhcmlhYmxlIFN0cmluZyB0ZXJtSWQpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCBpID0gYmFzZVNjaGVkdWxlU2VydmljZS5xdWVyeVdlZWtseXModGVybUlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi6YCJ5Lit5a2m5pyf55qE5oC75ZGo5pWwXCIsIGkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgbG9nLmVycm9yKFwi5oyJ54Wn6YCJ5Lit5a2m5pyf5p+l6K+i5a2m5pyf55qE5oC75ZGo5pWw5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIn1cbiIgKwogICAgICAgICAgICAgICAgInBhY2thZ2UgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLndlYjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uYWxpYmFiYS5mYXN0anNvbi5KU09OT2JqZWN0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5naXRodWIucGFnZWhlbHBlci5QYWdlSW5mbztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24ucmVzcG9uc2UuaGFvbGFuZ1JldHVybjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24udXRpbC5QYWdlVXRpbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5LkJhc2VTZWN0aW9uVGltZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5LkJhc2VTZWN0aW9uVGltZUV4YW1wbGU7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnNlcnZpY2UuQmFzZVNlY3Rpb25UaW1lU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuZG9tYWluLlBhZ2VhYmxlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS53ZWIuUGFnZWFibGVEZWZhdWx0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuaHR0cC5SZXNwb25zZUVudGl0eTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnVpLk1vZGVsO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlc3Npb247XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgKiBARGVzY3JpcHRpb246ICAgQmFzZVNlY3Rpb25UaW1l5a6e5L2T57G7XG4iICsKICAgICAgICAgICAgICAgICIgKiBAQXV0aG9yOiAgICAgICAgICDlvpDmiJBcbiIgKwogICAgICAgICAgICAgICAgIiAqIEBDb21wYW55OiAgICAgIOS6keWcqOS/oeaBr1xuIiArCiAgICAgICAgICAgICAgICAiICogQENyZWF0ZURhdGU6ICAgICAgIEphbiAzMCwgMjAxOCAyOjI2OjM0IEFNXG4iICsKICAgICAgICAgICAgICAgICIgKi9cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiQFJlc3RDb250cm9sbGVyXG4iICsKICAgICAgICAgICAgICAgICJAUmVxdWVzdE1hcHBpbmcoXCIvYmFzZXNlY3Rpb250aW1lXCIpXG4iICsKICAgICAgICAgICAgICAgICJwdWJsaWMgY2xhc3MgQmFzZVNlY3Rpb25UaW1lQ29udHJvbGxlciB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPR0dFUiA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJhc2VTZWN0aW9uVGltZUNvbnRyb2xsZXIuY2xhc3MpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEF1dG93aXJlZFxuIiArCiAgICAgICAgICAgICAgICAiICAgIHByaXZhdGUgQmFzZVNlY3Rpb25UaW1lU2VydmljZSBiYXNlU2VjdGlvblRpbWVTZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOi/m+WFpeS4u+mhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gc2Vzc2lvbiBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBtb2RlbCAgIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiBqc3DpobXpnaLot6/lvoRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyhtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLkdFVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgU3RyaW5nIGluZGV4KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uLE1vZGVsIG1vZGVsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBcInZpZXdzL0Jhc2VTZWN0aW9uVGltZVwiO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5p+l6K+i5omA5pyJ5bm25YiG6aG1XG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcGFnZXIgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcmVxdWVzdCAgICAgIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHNlc3Npb24gICAgICBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEByZXR1cm4g5YiG6aG15pWw5o2uXG4iICsKICAgICAgICAgICAgICAgICIgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVxdWVzdE1hcHBpbmcodmFsdWUgPSBcIi9xdWVyeUxpc3RGb3JQYWdlXCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVClcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxQYWdlSW5mbzw/Pj4gcXVlcnlMaXN0Rm9yUGFnZShAUGFnZWFibGVEZWZhdWx0KHZhbHVlPTIwKSBQYWdlYWJsZSBwYWdlciwgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXNzaW9uIHNlc3Npb24pe1xuIiArCiAgICAgICAgICAgICAgICAiICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIEpTT05PYmplY3QgcGFnZVBhcmFtPSAoSlNPTk9iamVjdCkgcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJwYWdlUGFyYW1cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIEJhc2VTZWN0aW9uVGltZUV4YW1wbGUgZXhhbXBsZSA9IG5ldyBCYXNlU2VjdGlvblRpbWVFeGFtcGxlKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VJbmZvPEJhc2VTZWN0aW9uVGltZT4gcGFnZUluZm89YmFzZVNlY3Rpb25UaW1lU2VydmljZS5zZWxlY3RCeUV4YW1wbGUoUGFnZVV0aWwuYnVpbGQocmVxdWVzdCxwYWdlciksZXhhbXBsZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKCkuYm9keShwYWdlSW5mbyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICBMT0dHRVIuZXJyb3IoXCLojrflj5bkuIror77ml7bpl7TmqKHniYjml7bpl7Tkv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDmt7vliqBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBiYXNlU2VjdGlvblRpbWUgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcmVxdWVzdCBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBzZXNzaW9uIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZ1xuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBpbnNlcnQoQmFzZVNlY3Rpb25UaW1lIGJhc2VTZWN0aW9uVGltZSwgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXNzaW9uIHNlc3Npb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGluc2VydD1iYXNlU2VjdGlvblRpbWVTZXJ2aWNlLmluc2VydFNlbGVjdGl2ZShiYXNlU2VjdGlvblRpbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGluc2VydD4wKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLFwi5re75Yqg5oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfWVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsXCLliKDpmaTlpLHotKVcIixiYXNlU2VjdGlvblRpbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5LiK6K++5pe26Ze05qih54mI5pe26Ze05L+h5oGvXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOWIoOmZpFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtICBpZFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBEZWxldGVNYXBwaW5nKFwiL3tpZH1cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gZGVsZXRlKEBQYXRoVmFyaWFibGUgIFN0cmluZyBpZCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGRlbGV0ZSA9IGJhc2VTZWN0aW9uVGltZVNlcnZpY2UuZGVsZXRlQnlQcmltYXJ5S2V5KGlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChkZWxldGUgPT0gMSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSxcIuWIoOmZpOaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLFwi5Yig6Zmk5aSx6LSlXCIsaWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLliKDpmaTml7bpl7TmqKHniYjml7bpl7Tkv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOS/ruaUuVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIGJhc2VTZWN0aW9uVGltZSBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0IFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQdXRNYXBwaW5nXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IHVwZGF0ZShCYXNlU2VjdGlvblRpbWUgYmFzZVNlY3Rpb25UaW1lLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IHVwZGF0ZSA9IGJhc2VTZWN0aW9uVGltZVNlcnZpY2UudXBkYXRlQnlQcmltYXJ5S2V5U2VsZWN0aXZlKGJhc2VTZWN0aW9uVGltZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAodXBkYXRlID09IDEpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuS/ruaUueaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLkv67mlLnlpLHotKVcIixiYXNlU2VjdGlvblRpbWUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLkv67mlLnml7bpl7TmqKHniYjml7bpl7Tkv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAifVxuIiArCiAgICAgICAgICAgICAgICAicGFja2FnZSBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20ud2ViO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5hbGliYWJhLmZhc3Rqc29uLkpTT05PYmplY3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmdpdGh1Yi5wYWdlaGVscGVyLlBhZ2VJbmZvO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLmF1dGguc2VjdXJpdHkuU2VjdXJpdHlVdGlscztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24ucmVzcG9uc2UuaGFvbGFuZ1JldHVybjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24ucmVzcG9uc2UuaGFvbGFuZ1JldHVybkVudGl0eTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24udXRpbC5FeGNlbFV0aWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnV0aWwuUGFnZVV0aWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS5CYXNlQ291cnNlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5lbnRpdHkuQmFzZUNvdXJzZUV4YW1wbGU7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS5CYXNlVGVhY2hjbGFzcztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5LkJhc2VUZWFjaGNsYXNzRXhhbXBsZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uc2VydmljZS5CYXNlVGVhY2hjbGFzc1NlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uc2VydmljZS5CYXNlVGVhY2hwbGFuVGVhY2hjbGFzc1NlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnV0aWwuVXBsb2FkUmVzdWx0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpT3BlcmF0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5hcGFjaGUuY29tbW9ucy5sYW5nLlN0cmluZ1V0aWxzO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5qdW5pdC5Bc3NlcnQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jbG91ZC5jb250ZXh0LmNvbmZpZy5hbm5vdGF0aW9uLlJlZnJlc2hTY29wZTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5kb21haW4uUGFnZWFibGU7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLndlYi5QYWdlYWJsZURlZmF1bHQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5odHRwLkh0dHBTdGF0dXM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5odHRwLlJlc3BvbnNlRW50aXR5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudWkuTW9kZWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLio7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIubXVsdGlwYXJ0Lk11bHRpcGFydEZpbGU7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLk1hcDtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IHN0YXRpYyBvcmcuaGFtY3Jlc3QuY29yZS5Jc05vdC5ub3Q7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiLyoqXG4iICsKICAgICAgICAgICAgICAgICIgKiBARGVzY3JpcHRpb246IEJhc2VUZWFjaGNsYXNz5a6e5L2T57G7XG4iICsKICAgICAgICAgICAgICAgICIgKiBAQXV0aG9yOiDlvpDmiJBcbiIgKwogICAgICAgICAgICAgICAgIiAqIEBDb21wYW55OiDkupHlnKjkv6Hmga9cbiIgKwogICAgICAgICAgICAgICAgIiAqIEBDcmVhdGVEYXRlOiBKYW4gMzAsIDIwMTggMjoyNzoyMCBBTVxuIiArCiAgICAgICAgICAgICAgICAiICovXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIkBSZXN0Q29udHJvbGxlclxuIiArCiAgICAgICAgICAgICAgICAiQFJlcXVlc3RNYXBwaW5nKFwiL2Jhc2V0ZWFjaGNsYXNzXCIpXG4iICsKICAgICAgICAgICAgICAgICJwdWJsaWMgY2xhc3MgQmFzZVRlYWNoY2xhc3NDb250cm9sbGVyIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HR0VSID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoQmFzZVRlYWNoY2xhc3NDb250cm9sbGVyLmNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXV0b3dpcmVkXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBCYXNlVGVhY2hjbGFzc1NlcnZpY2UgYmFzZVRlYWNoY2xhc3NTZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICog6L+b5YWl5Li76aG1XG4iICsKICAgICAgICAgICAgICAgICIgICAgICpcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcGFyYW0gcmVxdWVzdFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEBwYXJhbSBzZXNzaW9uXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIG1vZGVsXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHJldHVybiBqc3DpobXpnaLot6/lvoRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVxdWVzdE1hcHBpbmcobWV0aG9kID0gUmVxdWVzdE1ldGhvZC5HRVQpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFN0cmluZyBpbmRleChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbiwgTW9kZWwgbW9kZWwpIHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gXCJ2aWV3cy9CYXNlVGVhY2hjbGFzc1wiO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIOafpeivouaJgOacieW5tuWIhumhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIHBhZ2VyXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIHJlcXVlc3RcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcGFyYW0gc2Vzc2lvblxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEByZXR1cm4g5YiG6aG15pWw5o2uXG4iICsKICAgICAgICAgICAgICAgICIgICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvcXVlcnlMaXN0Rm9yUGFnZVwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8UGFnZUluZm88Pz4+IHF1ZXJ5TGlzdEZvclBhZ2UoQFBhZ2VhYmxlRGVmYXVsdCh2YWx1ZSA9IDIwKSBQYWdlYWJsZSBwYWdlciwgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXNzaW9uIHNlc3Npb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIEpTT05PYmplY3QgcGFnZVBhcmFtPSAoSlNPTk9iamVjdCkgcmVxdWVzdC5nZXRBdHRyaWJ1dGUoXCJwYWdlUGFyYW1cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBCYXNlVGVhY2hjbGFzc0V4YW1wbGUgZXhhbXBsZSA9IG5ldyBCYXNlVGVhY2hjbGFzc0V4YW1wbGUoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIFBhZ2VJbmZvPEJhc2VUZWFjaGNsYXNzPiBwYWdlSW5mbyA9IGJhc2VUZWFjaGNsYXNzU2VydmljZS5zZWxlY3RCeUV4YW1wbGUoUGFnZVV0aWwuYnVpbGQocmVxdWVzdCxwYWdlciksIGV4YW1wbGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKCkuYm9keShwYWdlSW5mbyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLmn6Xor6LmlZnlrabnj63kv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDmt7vliqBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEBwYXJhbSBiYXNlVGVhY2hjbGFzc1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEBwYXJhbSByZXF1ZXN0XG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIHNlc3Npb25cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZ1xuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBpbnNlcnQoQmFzZVRlYWNoY2xhc3MgYmFzZVRlYWNoY2xhc3MsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFJlc3BvbnNlRW50aXR5PFN0cmluZz4gYSA9IG5ldyBSZXNwb25zZUVudGl0eTxTdHJpbmc+KFwiZGFzZFwiLCBudWxsLCBIdHRwU3RhdHVzLk1VTFRJX1NUQVRVUyk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCBpbnNlcnQgPSBiYXNlVGVhY2hjbGFzc1NlcnZpY2UuaW5zZXJ0U2VsZWN0aXZlKGJhc2VUZWFjaGNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChpbnNlcnQgPiAwKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLmt7vliqDmiJDlip9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9IGVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIua3u+WKoOWksei0pVwiLCBiYXNlVGVhY2hjbGFzcyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLmt7vliqDmlZnlrabnj63kv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICog5Yig6ZmkXG4iICsKICAgICAgICAgICAgICAgICIgICAgICpcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcGFyYW0gaWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBEZWxldGVNYXBwaW5nKHZhbHVlID0gXCIvZGVsZXRlL3tpZH1cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgT2JqZWN0IGRlbGV0ZShAUGF0aFZhcmlhYmxlIFN0cmluZyBpZCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGRlbGV0ZSA9IGJhc2VUZWFjaGNsYXNzU2VydmljZS5kZWxldGVCeVByaW1hcnlLZXkoaWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGRlbGV0ZSA9PSAxKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLliKDpmaTmiJDlip9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9IGVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIuWIoOmZpOWksei0pVwiLGlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIuWIoOmZpOaVmeWtpuePreS/oeaBr+WHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIOS/ruaUuVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIGJhc2VUZWFjaGNsYXNzXG4iICsKICAgICAgICAgICAgICAgICIgICAgICogQHBhcmFtIHJlcXVlc3RcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQdXRNYXBwaW5nXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IHVwZGF0ZShCYXNlVGVhY2hjbGFzcyBiYXNlVGVhY2hjbGFzcywgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCB1cGRhdGUgPSBiYXNlVGVhY2hjbGFzc1NlcnZpY2UudXBkYXRlQnlQcmltYXJ5S2V5U2VsZWN0aXZlKGJhc2VUZWFjaGNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmICh1cGRhdGUgPT0gMSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5L+u5pS55oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLkv67mlLnlpLHotKVcIixiYXNlVGVhY2hjbGFzcyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLkv67mlLnmlZnlrabnj63kv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFBvc3RNYXBwaW5nKFwiL3VwbG9hZFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyB2b2lkIHVwbG9hZChAUmVxdWVzdFBhcmFtKFwiZmlsZVwiKSBNdWx0aXBhcnRGaWxlIGZpbGUsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBIdHRwU2Vzc2lvbiBzZXNzaW9uKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmKGZpbGUuaXNFbXB0eSgpKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCLmlofku7bmnKrkuIrkvKBcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9ZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgTGlzdDxCYXNlVGVhY2hjbGFzcz4gcGVyc29uTGlzdCA9IEV4Y2VsVXRpbC5pbXBvcnRFeGNlbChmaWxlLDEsMSxCYXNlVGVhY2hjbGFzcy5jbGFzcyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgLy/kuZ/lj6/ku6Xkvb/nlKhmaWxlUGF0aCzkvb/nlKggRmlsZVV0aWwuaW1wb3J0RXhjZWwoU3RyaW5nIGZpbGVQYXRoLCBJbnRlZ2VyIHRpdGxlUm93cywgSW50ZWdlciBoZWFkZXJSb3dzLCBDbGFzczxUPiBwb2pvQ2xhc3Mp5a+85YWlXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgQXNzZXJ0LmFzc2VydFRoYXQocGVyc29uTGlzdC5zaXplKCksIG5vdCgwKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgVXBsb2FkUmVzdWx0IHJlc3VsdCA9IGJhc2VUZWFjaGNsYXNzU2VydmljZS5pbnNlcnRMaXN0KHBlcnNvbkxpc3QpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5nZXRFcnJvckxpc3QoKS5zaXplKCkhPTApe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgRXhjZWxVdGlsLmV4cG9ydEV4Y2VsKHJlc3VsdC5nZXRFcnJvckxpc3QoKSxcIuaVmeWtpuePreWvvOWFpeWksei0peS/oeaBr1wiLFwi5pWZ5a2m54+t5L+h5oGvXCIsQmFzZVRlYWNoY2xhc3MuY2xhc3MsXCLmlZnlrabnj63lr7zlhaXlpLHotKXkv6Hmga8ueGxzXCIsXCIvb3B0L3BjbG91ZC90bXAvXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1jYXRjaCAoRXhjZXB0aW9uIGUpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5a+85YWl5pWZ5a2m54+t5L+h5oGv5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXV0b3dpcmVkXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgIHB1YmxpYyAgQmFzZVRlYWNocGxhblRlYWNoY2xhc3NTZXJ2aWNlIGJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyhcIi97ZmluZH1cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLnj63nuqfkuIvmi4nmoYbmqKHns4rmkJzntKJcIixub3Rlcz1cIuWPguaVsOS4uuePree6p+WQjeensFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBmaW5kQ2xhc3MoQFBhdGhWYXJpYWJsZSBTdHJpbmcgZmluZCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIEJhc2VUZWFjaGNsYXNzRXhhbXBsZSBleCA9IG5ldyBCYXNlVGVhY2hjbGFzc0V4YW1wbGUoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgIGV4LmNyZWF0ZUNyaXRlcmlhKCkuYW5kTmFtZUxpa2UoXCIlXCIgKyBmaW5kICsgXCIlXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBMaXN0PEJhc2VUZWFjaGNsYXNzPiBiYXNlVGVhY2hjbGFzc2VzID0gYmFzZVRlYWNoY2xhc3NTZXJ2aWNlLnNlbGVjdEJ5RXhhbXBsZShleCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsXCLnj63nuqfmkJzntKLkuIvmi4lcIixiYXNlVGVhY2hjbGFzc2VzKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgQEdldE1hcHBpbmcoXCIvYWxsY2xhc3NcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLnj63nuqfkuIvmi4nmoYZcIixub3Rlcz1cIuePree6p+i0n+i0o+S6uui0n+i0o+eahOaJgOacieePree6p1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxoYW9sYW5nUmV0dXJuRW50aXR5PiBnZXRBbGxDbGFzcygpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTdHJpbmcgY3VycmVudFVzZXJJZCA9IFNlY3VyaXR5VXRpbHMuZ2V0Q3VycmVudFVzZXJJZCgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBMaXN0PEJhc2VUZWFjaGNsYXNzPiBiYXNlVGVhY2hjbGFzc2VzID0gYmFzZVRlYWNoY2xhc3NTZXJ2aWNlLmZpbmRDbGFzc0J5Q291bnNlbG9yKGN1cnJlbnRVc2VySWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLFwi54+t57qn5LiL5ouJXCIsYmFzZVRlYWNoY2xhc3Nlcyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAifVxuIiArCiAgICAgICAgICAgICAgICAicGFja2FnZSBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20ud2ViO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmFsaWJhYmEuZmFzdGpzb24uSlNPTk9iamVjdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uZ2l0aHViLnBhZ2VoZWxwZXIuUGFnZUluZm87XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnJlc3BvbnNlLmhhb2xhbmdSZXR1cm47XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnV0aWwuUGFnZVV0aWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS5CYXNlVGVhY2hjbGFzc1N0dWRlbnQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS5CYXNlVGVhY2hjbGFzc1N0dWRlbnRFeGFtcGxlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5zZXJ2aWNlLkJhc2VUZWFjaGNsYXNzU3R1ZGVudFNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5kb21haW4uUGFnZWFibGU7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLndlYi5QYWdlYWJsZURlZmF1bHQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5odHRwLlJlc3BvbnNlRW50aXR5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudWkuTW9kZWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLio7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAvKipcbiIgKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAiICogQERlc2NyaXB0aW9uOiAgIEJhc2VUZWFjaGNsYXNzU3R1ZGVudOWunuS9k+exu1xuIiArCiAgICAgICAgICAgICAgICAiICogQEF1dGhvcjogICAgICAgICAg5b6Q5oiQXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ29tcGFueTogICAgICDkupHlnKjkv6Hmga9cbiIgKwogICAgICAgICAgICAgICAgIiAqIEBDcmVhdGVEYXRlOiAgICAgICBKYW4gMzAsIDIwMTggMjoyNzozNCBBTVxuIiArCiAgICAgICAgICAgICAgICAiICovXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIkBSZXN0Q29udHJvbGxlclxuIiArCiAgICAgICAgICAgICAgICAiQFJlcXVlc3RNYXBwaW5nKFwiL2Jhc2V0ZWFjaGNsYXNzc3R1ZGVudFwiKVxuIiArCiAgICAgICAgICAgICAgICAicHVibGljIGNsYXNzIEJhc2VUZWFjaGNsYXNzU3R1ZGVudENvbnRyb2xsZXIge1xuIiArCiAgICAgICAgICAgICAgICAiICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBMT0dHRVIgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihCYXNlVGVhY2hjbGFzc1N0dWRlbnRDb250cm9sbGVyLmNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBdXRvd2lyZWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIEJhc2VUZWFjaGNsYXNzU3R1ZGVudFNlcnZpY2UgYmFzZVRlYWNoY2xhc3NTdHVkZW50U2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDov5vlhaXkuLvpobVcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0IFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHNlc3Npb24gXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gbW9kZWwgICBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEByZXR1cm4ganNw6aG16Z2i6Lev5b6EXG4iICsKICAgICAgICAgICAgICAgICIgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVxdWVzdE1hcHBpbmcobWV0aG9kID0gUmVxdWVzdE1ldGhvZC5HRVQpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFN0cmluZyBpbmRleChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbixNb2RlbCBtb2RlbCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gXCJ2aWV3cy9CYXNlVGVhY2hjbGFzc1N0dWRlbnRcIjtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOafpeivouaJgOacieW5tuWIhumhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHBhZ2VyIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgICAgICBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBzZXNzaW9uICAgICAgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIOWIhumhteaVsOaNrlxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvcXVlcnlMaXN0Rm9yUGFnZVwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8UGFnZUluZm88Pz4+IHF1ZXJ5TGlzdEZvclBhZ2UoQFBhZ2VhYmxlRGVmYXVsdCh2YWx1ZT0yMCkgUGFnZWFibGUgcGFnZXIsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBKU09OT2JqZWN0IHBhZ2VQYXJhbT0gKEpTT05PYmplY3QpIHJlcXVlc3QuZ2V0QXR0cmlidXRlKFwicGFnZVBhcmFtXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBCYXNlVGVhY2hjbGFzc1N0dWRlbnRFeGFtcGxlIGV4YW1wbGUgPSBuZXcgQmFzZVRlYWNoY2xhc3NTdHVkZW50RXhhbXBsZSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBQYWdlSW5mbzxCYXNlVGVhY2hjbGFzc1N0dWRlbnQ+IHBhZ2VJbmZvPWJhc2VUZWFjaGNsYXNzU3R1ZGVudFNlcnZpY2Uuc2VsZWN0QnlFeGFtcGxlKFBhZ2VVdGlsLmJ1aWxkKHJlcXVlc3QscGFnZXIpLGV4YW1wbGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vaygpLmJvZHkocGFnZUluZm8pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIExPR0dFUi5lcnJvcihcIuafpeivouaVmeWtpuePreWtpueUn+WIhumhteS/oeaBr+WHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOa3u+WKoFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIGJhc2VUZWFjaGNsYXNzU3R1ZGVudCBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0IFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHNlc3Npb24gXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFBvc3RNYXBwaW5nXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGluc2VydChCYXNlVGVhY2hjbGFzc1N0dWRlbnQgYmFzZVRlYWNoY2xhc3NTdHVkZW50LCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbikge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGluc2VydD1iYXNlVGVhY2hjbGFzc1N0dWRlbnRTZXJ2aWNlLmluc2VydFNlbGVjdGl2ZShiYXNlVGVhY2hjbGFzc1N0dWRlbnQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGluc2VydD4wKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLmt7vliqDmiJDlip9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9ZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi5re75Yqg5aSx6LSlXCIsIGJhc2VUZWFjaGNsYXNzU3R1ZGVudCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLmt7vliqDmlZnlrabnj63lrabnlJ/kv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyAgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5Yig6ZmkXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gaWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEByZXR1cm4gdGhlIFJlc3BvbnNlRW50aXR5PD8+XG4iICsKICAgICAgICAgICAgICAgICIgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBARGVsZXRlTWFwcGluZyhcIi97aWR9XCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGRlbGV0ZShAUGF0aFZhcmlhYmxlIFN0cmluZyBpZCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGRlbGV0ZSA9IGJhc2VUZWFjaGNsYXNzU3R1ZGVudFNlcnZpY2UuZGVsZXRlQnlQcmltYXJ5S2V5KGlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChkZWxldGUgPT0gMSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5Yig6Zmk5oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIuWIoOmZpOWksei0pVwiLCBpZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIuWIoOmZpOaVmeWtpuePreWtpueUn+S/oeaBr+WHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5L+u5pS5XG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gYmFzZVRlYWNoY2xhc3NTdHVkZW50IFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFB1dE1hcHBpbmdcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gdXBkYXRlKEJhc2VUZWFjaGNsYXNzU3R1ZGVudCBiYXNlVGVhY2hjbGFzc1N0dWRlbnQsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0KSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpbnQgdXBkYXRlID0gYmFzZVRlYWNoY2xhc3NTdHVkZW50U2VydmljZS51cGRhdGVCeVByaW1hcnlLZXlTZWxlY3RpdmUoYmFzZVRlYWNoY2xhc3NTdHVkZW50KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmICh1cGRhdGUgPT0gMSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5L+u5pS55oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLFwi5L+u5pS55aSx6LSlXCIsYmFzZVRlYWNoY2xhc3NTdHVkZW50KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5L+u5pS55pWZ5a2m54+t5a2m55Sf5L+h5oGv5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIn1cbiIgKwogICAgICAgICAgICAgICAgInBhY2thZ2UgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLndlYjtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5hbGliYWJhLmZhc3Rqc29uLkpTT05PYmplY3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmdpdGh1Yi5wYWdlaGVscGVyLlBhZ2VJbmZvO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLmNvbW1vbi5yZXNwb25zZS5oYW9sYW5nUmV0dXJuO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLmNvbW1vbi51dGlsLkV4Y2VsVXRpbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24udXRpbC5QYWdlVXRpbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5Lio7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLnNlcnZpY2UuQmFzZVRlYWNocGxhblNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20udXRpbC5VcGxvYWRSZXN1bHQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLmFwYWNoZS5jb21tb25zLmlvLkZpbGVVdGlscztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuYXBhY2hlLmNvbW1vbnMuaW8uSU9VdGlscztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuanVuaXQuQXNzZXJ0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLmRvbWFpbi5QYWdlYWJsZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEud2ViLlBhZ2VhYmxlRGVmYXVsdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmh0dHAuUmVzcG9uc2VFbnRpdHk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay51aS5Nb2RlbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5iaW5kLmFubm90YXRpb24uKjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5tdWx0aXBhcnQuTXVsdGlwYXJ0RmlsZTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5TZXJ2bGV0T3V0cHV0U3RyZWFtO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXNzaW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEuaW8uRmlsZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLmlvLkZpbGVJbnB1dFN0cmVhbTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEubmV0LlNvY2tldEV4Y2VwdGlvbjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IHN0YXRpYyBvcmcuaGFtY3Jlc3QuY29yZS5Jc05vdC5ub3Q7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiLyoqXG4iICsKICAgICAgICAgICAgICAgICIgKiBARGVzY3JpcHRpb246ICAgQmFzZVRlYWNocGxhbuWunuS9k+exu1xuIiArCiAgICAgICAgICAgICAgICAiICogQEF1dGhvcjogICAgICAgICAg5b6Q5oiQXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ29tcGFueTogICAgICDkupHlnKjkv6Hmga9cbiIgKwogICAgICAgICAgICAgICAgIiAqIEBDcmVhdGVEYXRlOiAgICAgICBKYW4gMzAsIDIwMTggMjoyNjo0OSBBTVxuIiArCiAgICAgICAgICAgICAgICAiICovXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIkBSZXN0Q29udHJvbGxlclxuIiArCiAgICAgICAgICAgICAgICAiQFJlcXVlc3RNYXBwaW5nKFwiL2Jhc2V0ZWFjaHBsYW5cIilcbiIgKwogICAgICAgICAgICAgICAgInB1YmxpYyBjbGFzcyBCYXNlVGVhY2hwbGFuQ29udHJvbGxlciB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPR0dFUiA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEJhc2VUZWFjaHBsYW5Db250cm9sbGVyLmNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBdXRvd2lyZWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIEJhc2VUZWFjaHBsYW5TZXJ2aWNlIGJhc2VUZWFjaHBsYW5TZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDov5vlhaXkuLvpobVcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0IFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHNlc3Npb24gXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gbW9kZWwgICBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEByZXR1cm4ganNw6aG16Z2i6Lev5b6EXG4iICsKICAgICAgICAgICAgICAgICIgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVxdWVzdE1hcHBpbmcobWV0aG9kID0gUmVxdWVzdE1ldGhvZC5HRVQpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFN0cmluZyBpbmRleChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbixNb2RlbCBtb2RlbCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gXCJ2aWV3cy9CYXNlVGVhY2hwbGFuXCI7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDmn6Xor6LmiYDmnInlubbliIbpobVcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBwYWdlciBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0ICAgICAgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gc2Vzc2lvbiAgICAgIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiDliIbpobXmlbDmja5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9IFwiL3F1ZXJ5TGlzdEZvclBhZ2VcIiwgbWV0aG9kID0gUmVxdWVzdE1ldGhvZC5QT1NUKVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PFBhZ2VJbmZvPD8+PiBxdWVyeUxpc3RGb3JQYWdlKEBQYWdlYWJsZURlZmF1bHQodmFsdWU9MjApIFBhZ2VhYmxlIHBhZ2VyLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbil7XG4iICsKICAgICAgICAgICAgICAgICIgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgSlNPTk9iamVjdCBwYWdlUGFyYW09IChKU09OT2JqZWN0KSByZXF1ZXN0LmdldEF0dHJpYnV0ZShcInBhZ2VQYXJhbVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgQmFzZVRlYWNocGxhbkV4YW1wbGUgZXhhbXBsZSA9IG5ldyBCYXNlVGVhY2hwbGFuRXhhbXBsZSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBQYWdlSW5mbzxCYXNlVGVhY2hwbGFuPiBwYWdlSW5mbz1iYXNlVGVhY2hwbGFuU2VydmljZS5zZWxlY3RCeUV4YW1wbGUoUGFnZVV0aWwuYnVpbGQocmVxdWVzdCxwYWdlciksZXhhbXBsZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKCkuYm9keShwYWdlSW5mbyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgTE9HR0VSLmVycm9yKFwi5p+l6K+i5pWZ5a2m6K6h5YiS5YiG6aG15L+h5oGv5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5re75YqgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gYmFzZVRlYWNocGxhbiBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0IFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHNlc3Npb24gXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmdcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gaW5zZXJ0KEJhc2VUZWFjaHBsYW4gYmFzZVRlYWNocGxhbiwgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXNzaW9uIHNlc3Npb24pIHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGluc2VydD1iYXNlVGVhY2hwbGFuU2VydmljZS5pbnNlcnRTZWxlY3RpdmUoYmFzZVRlYWNocGxhbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoaW5zZXJ0PjApIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIua3u+WKoOaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1lbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLmt7vliqDlpLHotKVcIiwgYmFzZVRlYWNocGxhbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLmt7vliqDmlZnlraborqHliJLkv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDliKDpmaRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSAgaWRcbiIgKS5hcHBlbmQKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBSZXNwb25zZUVudGl0eTw/PlxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQERlbGV0ZU1hcHBpbmcoXCIve2lkfVwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBkZWxldGUoQFBhdGhWYXJpYWJsZSBTdHJpbmcgaWQpIHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGRlbGV0ZSA9IGJhc2VUZWFjaHBsYW5TZXJ2aWNlLmRlbGV0ZUJ5UHJpbWFyeUtleShpZCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoZGVsZXRlID09IDEpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuWIoOmZpOaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH0gZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi5Yig6Zmk5aSx6LSlXCIsIGlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIuWIoOmZpOaVmeWtpuiuoeWIkuS/oeaBr+WHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5L+u5pS5XG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gYmFzZVRlYWNocGxhbiBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0IFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQdXRNYXBwaW5nXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IHVwZGF0ZShCYXNlVGVhY2hwbGFuIGJhc2VUZWFjaHBsYW4sIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0KSB7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCB1cGRhdGUgPSBiYXNlVGVhY2hwbGFuU2VydmljZS51cGRhdGVCeVByaW1hcnlLZXlTZWxlY3RpdmUoYmFzZVRlYWNocGxhbik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAodXBkYXRlID09IDEpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuS/ruaUueaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLkv67mlLnlpLHotKVcIixiYXNlVGVhY2hwbGFuKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5L+u5pS55pWZ5a2m6K6h5YiS5L+h5oGv5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQb3N0TWFwcGluZyhcIi91cGxvYWRcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgdm9pZCB1cGxvYWQoQFJlcXVlc3RQYXJhbShcImZpbGVcIikgTXVsdGlwYXJ0RmlsZSBmaWxlLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCxcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSwgSHR0cFNlc3Npb24gc2Vzc2lvbil7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZihmaWxlLmlzRW1wdHkoKSl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFwi5paH5Lu25pyq5LiK5LygXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfWVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIExpc3Q8QmFzZVRlYWNoUGx1blV0aWw+IHBlcnNvbkxpc3QgPSBFeGNlbFV0aWwuaW1wb3J0RXhjZWwoZmlsZSwxLDEsQmFzZVRlYWNoUGx1blV0aWwuY2xhc3MpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIC8v5Lmf5Y+v5Lul5L2/55SoZmlsZVBhdGgs5L2/55SoIEZpbGVVdGlsLmltcG9ydEV4Y2VsKFN0cmluZyBmaWxlUGF0aCwgSW50ZWdlciB0aXRsZVJvd3MsIEludGVnZXIgaGVhZGVyUm93cywgQ2xhc3M8VD4gcG9qb0NsYXNzKeWvvOWFpVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIEFzc2VydC5hc3NlcnRUaGF0KHBlcnNvbkxpc3Quc2l6ZSgpLCBub3QoMCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIFVwbG9hZFJlc3VsdCByZXMgPSBiYXNlVGVhY2hwbGFuU2VydmljZS5pbnNlcnRMaXN0KHBlcnNvbkxpc3QpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGlmKHJlcy5nZXRFcnJvckxpc3QoKS5zaXplKCkhPTApe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChPYmplY3QgbyA6IHJlcy5nZXRFcnJvckxpc3QoKSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJhc2VUZWFjaFBsdW5VdGlsIGI9KEJhc2VUZWFjaFBsdW5VdGlsKW87XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgICBiLnNldFpjYXAoXCJhXCIrYi5nZXRaY2FwKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgRXhjZWxVdGlsLmV4cG9ydEV4Y2VsKHJlcy5nZXRFcnJvckxpc3QoKSxcIuaVmeWtpuiuoeWIkuWvvOWFpeWksei0peS/oeaBr1wiLFwi5pWZ5a2m6K6h5YiS5L+h5oGvXCIsQmFzZVRlYWNoUGx1blV0aWwuY2xhc3MsXCLmlZnlraborqHliJLlr7zlhaXlpLHotKXkv6Hmga8ueGxzXCIsXCIvb3B0L3BjbG91ZC90bXAvXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9Y2F0Y2ggKEV4Y2VwdGlvbiBlKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIuWvvOWFpeaVmeWtpuiuoeWIkuS/oeaBr+WHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgQFBvc3RNYXBwaW5nKFwiL2FkZHVwbG9hZFwiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyB2b2lkIGFkZHVwbG9hZChAUmVxdWVzdFBhcmFtKFwiZmlsZVwiKSBNdWx0aXBhcnRGaWxlIGZpbGUsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LFxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBIdHRwU2Vzc2lvbiBzZXNzaW9uKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmKGZpbGUuaXNFbXB0eSgpKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCLmlofku7bmnKrkuIrkvKBcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9ZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgTGlzdDxCYXNlVGVhY2hQbHVuVXRpbD4gcGVyc29uTGlzdCA9IEV4Y2VsVXRpbC5pbXBvcnRFeGNlbChmaWxlLDEsMSxCYXNlVGVhY2hQbHVuVXRpbC5jbGFzcyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgLy/kuZ/lj6/ku6Xkvb/nlKhmaWxlUGF0aCzkvb/nlKggRmlsZVV0aWwuaW1wb3J0RXhjZWwoU3RyaW5nIGZpbGVQYXRoLCBJbnRlZ2VyIHRpdGxlUm93cywgSW50ZWdlciBoZWFkZXJSb3dzLCBDbGFzczxUPiBwb2pvQ2xhc3Mp5a+85YWlXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgQXNzZXJ0LmFzc2VydFRoYXQocGVyc29uTGlzdC5zaXplKCksIG5vdCgwKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgVXBsb2FkUmVzdWx0IHJlcyA9IGJhc2VUZWFjaHBsYW5TZXJ2aWNlLmFkZGluc2VydExpc3QocGVyc29uTGlzdCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgaWYocmVzLmdldEVycm9yTGlzdCgpLnNpemUoKSE9MCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKE9iamVjdCBvIDogcmVzLmdldEVycm9yTGlzdCgpKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFzZVRlYWNoUGx1blV0aWwgYj0oQmFzZVRlYWNoUGx1blV0aWwpbztcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLnNldFpjYXAoXCJhXCIrYi5nZXRaY2FwKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgRXhjZWxVdGlsLmV4cG9ydEV4Y2VsKHJlcy5nZXRFcnJvckxpc3QoKSxcIuaVmeWtpuiuoeWIkuWvvOWFpeWksei0peS/oeaBr1wiLFwi5pWZ5a2m6K6h5YiS5L+h5oGvXCIsQmFzZVRlYWNoUGx1blV0aWwuY2xhc3MsXCLmlZnlraborqHliJLlr7zlhaXlpLHotKXkv6Hmga8ueGxzXCIsXCIvb3B0L3BjbG91ZC90bXAvXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9Y2F0Y2ggKEV4Y2VwdGlvbiBlKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIuWvvOWFpeaVmeWtpuiuoeWIkuS/oeaBr+WHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKiDmqKHmnb/kuIvovb1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyhcImRvd25sb2FkRmllbGRcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIHZvaWQgZG93bmxvYWRGaWVsZChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFN0cmluZyByZWFsUGF0aD1yZXF1ZXN0LmdldFNlc3Npb24oKS5nZXRTZXJ2bGV0Q29udGV4dCgpLmdldFJlYWxQYXRoKFwiL1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIHJlYWw9cmVhbFBhdGguc3Vic3RyaW5nKDAscmVhbFBhdGgubGFzdEluZGV4T2YoXCJ3ZWJhcHBzXCIpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3lzdGVtLm91dC5wcmludChyZWFsKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGZpbGVQYXRoPVwid2ViYXBwcy9jbGFzc3Jvb20vcmVzb3VyY2VzL3RlbXBsYXRlL2p4amhtYi54bHNcIjtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgU3RyaW5nIGZpbGVOYW1lPVwi5pWZ5a2m6K6h5YiS5qih5p2/Lnhsc1wiO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBkb3duTG9hZEZpZWxkKHJlYWwrZmlsZVBhdGgsZmlsZU5hbWUscmVzcG9uc2UpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgdm9pZCBkb3duTG9hZEZpZWxkKFN0cmluZyBmaWxlUGF0aCxTdHJpbmcgZmlsZU5hbWUsSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIEZpbGVJbnB1dFN0cmVhbSBpbnB1dD1udWxsO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBTZXJ2bGV0T3V0cHV0U3RyZWFtIG91dHB1dD1udWxsO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgRmlsZSBlPW5ldyBGaWxlKGZpbGVQYXRoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmKCFlLmdldFBhcmVudEZpbGUoKS5leGlzdHMoKSl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgZS5nZXRQYXJlbnRGaWxlKCkubWtkaXIoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmKCFlLmlzRmlsZSgpKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICBGaWxlVXRpbHMudG91Y2goZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXNwb25zZS5zZXRDb250ZW50VHlwZShcImFwcGxpY2F0aW9uL3gtbXNkb3dubG9hZFwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJlc3BvbnNlLnNldENoYXJhY3RlckVuY29kaW5nKFwiVVRGLThcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXNwb25zZS5zZXRIZWFkZXIoXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsIFwiYXR0YWNobWVudDtmaWxlbmFtZT1cXFwiXCIgKyBuZXcgU3RyaW5nKGZpbGVOYW1lLmdldEJ5dGVzKFwiZ2JrXCIpLCBcImlzby04ODU5LTFcIikgKyBcIlxcXCJcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpbnB1dCA9IG5ldyBGaWxlSW5wdXRTdHJlYW0oZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBvdXRwdXQgPSByZXNwb25zZS5nZXRPdXRwdXRTdHJlYW0oKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIElPVXRpbHMuY29weShpbnB1dCwgb3V0cHV0KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIG91dHB1dC5mbHVzaCgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9Y2F0Y2ggKFNvY2tldEV4Y2VwdGlvbiB2YXIxMCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJTZWN0aW9uUGljdHVyZToyNzpcIiArIHZhcjEwLmdldE1lc3NhZ2UoKSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1jYXRjaCAoRXhjZXB0aW9uIHZhcjExKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAvL2xvZ2dlci5lcnJvcihcIkV4Y2VwdGlvbjogXCIsIHZhcjExKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBmaW5hbGx5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIElPVXRpbHMuY2xvc2VRdWlldGx5KG91dHB1dCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBJT1V0aWxzLmNsb3NlUXVpZXRseShpbnB1dCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAR2V0TWFwcGluZyhcIi9xdWVyeVVzZXJCeVVzZXJDb2RlL3tnaH1cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gcXVlcnlVc2VyQnlVc2VyQ29kZShAUGF0aFZhcmlhYmxlIFN0cmluZyBnaCkge1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAvL1N5c3RlbS5vdXQucHJpbnRsbihnaCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBCYXNlVGVhY2hlciBiYXNlVGVhY2hlcj1iYXNlVGVhY2hwbGFuU2VydmljZS5xdWVyeVVzZXJCeVVzZXJDb2RlKGdoKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi5Yig6Zmk5aSx6LSlXCIsIGJhc2VUZWFjaGVyKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAifVxuIiArCiAgICAgICAgICAgICAgICAicGFja2FnZSBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20ud2ViO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmFsaWJhYmEuZmFzdGpzb24uSlNPTk9iamVjdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uZ2l0aHViLnBhZ2VoZWxwZXIuUGFnZUluZm87XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnJlc3BvbnNlLmhhb2xhbmdSZXR1cm47XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnV0aWwuUGFnZVV0aWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS5CYXNlVGVhY2hwbGFuVGVhY2hjbGFzcztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5LkJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzRXhhbXBsZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uc2VydmljZS5CYXNlVGVhY2hwbGFuVGVhY2hjbGFzc1NlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5kb21haW4uUGFnZWFibGU7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLndlYi5QYWdlYWJsZURlZmF1bHQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5odHRwLlJlc3BvbnNlRW50aXR5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuYWNjZXNzLm1ldGhvZC5QO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudWkuTW9kZWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLio7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAqIEBEZXNjcmlwdGlvbjogICBCYXNlVGVhY2hwbGFuVGVhY2hjbGFzc+WunuS9k+exu1xuIiArCiAgICAgICAgICAgICAgICAiICogQEF1dGhvcjogICAgICAgICAg5b6Q5oiQXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ29tcGFueTogICAgICDkupHlnKjkv6Hmga9cbiIgKwogICAgICAgICAgICAgICAgIiAqIEBDcmVhdGVEYXRlOiAgICAgICBKYW4gMzAsIDIwMTggMjoyNjo1MyBBTVxuIiArCiAgICAgICAgICAgICAgICAiICovXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIkBSZXN0Q29udHJvbGxlclxuIiArCiAgICAgICAgICAgICAgICAiQFJlcXVlc3RNYXBwaW5nKFwiL2Jhc2V0ZWFjaHBsYW50ZWFjaGNsYXNzXCIpXG4iICsKICAgICAgICAgICAgICAgICJwdWJsaWMgY2xhc3MgQmFzZVRlYWNocGxhblRlYWNoY2xhc3NDb250cm9sbGVyIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HR0VSID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoQmFzZVRlYWNocGxhblRlYWNoY2xhc3NDb250cm9sbGVyLmNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBdXRvd2lyZWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIEJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzU2VydmljZSBiYXNlVGVhY2hwbGFuVGVhY2hjbGFzc1NlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog6L+b5YWl5Li76aG1XG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcmVxdWVzdCBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBzZXNzaW9uIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIG1vZGVsICAgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIGpzcOmhtemdoui3r+W+hFxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuR0VUKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBTdHJpbmcgaW5kZXgoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXNzaW9uIHNlc3Npb24sTW9kZWwgbW9kZWwpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgcmV0dXJuIFwidmlld3MvQmFzZVRlYWNocGxhblRlYWNoY2xhc3NcIjtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOafpeivouaJgOacieW5tuWIhumhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHBhZ2VyIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgICAgICBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBzZXNzaW9uICAgICAgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIOWIhumhteaVsOaNrlxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvcXVlcnlMaXN0Rm9yUGFnZVwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8UGFnZUluZm88Pz4+IHF1ZXJ5TGlzdEZvclBhZ2UoQFBhZ2VhYmxlRGVmYXVsdCh2YWx1ZT0yMCkgUGFnZWFibGUgcGFnZXIsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBKU09OT2JqZWN0IHBhZ2VQYXJhbT0gKEpTT05PYmplY3QpIHJlcXVlc3QuZ2V0QXR0cmlidXRlKFwicGFnZVBhcmFtXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBCYXNlVGVhY2hwbGFuVGVhY2hjbGFzc0V4YW1wbGUgZXhhbXBsZSA9IG5ldyBCYXNlVGVhY2hwbGFuVGVhY2hjbGFzc0V4YW1wbGUoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgUGFnZUluZm88QmFzZVRlYWNocGxhblRlYWNoY2xhc3M+IHBhZ2VJbmZvPWJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzU2VydmljZS5zZWxlY3RCeUV4YW1wbGUoUGFnZVV0aWwuYnVpbGQocmVxdWVzdCxwYWdlciksZXhhbXBsZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKCkuYm9keShwYWdlSW5mbyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgTE9HR0VSLmVycm9yKFwi5p+l6K+i5pWZ5a2m6K6h5YiS5ZKM5pWZ5a2m54+t5YWz6IGU5YiG6aG15L+h5oGv5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5re75YqgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gYmFzZVRlYWNocGxhblRlYWNoY2xhc3MgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcmVxdWVzdCBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBzZXNzaW9uIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICBAUG9zdE1hcHBpbmdcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gaW5zZXJ0KEJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzIGJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbikge1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpbnQgaW5zZXJ0PWJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzU2VydmljZS5pbnNlcnRTZWxlY3RpdmUoYmFzZVRlYWNocGxhblRlYWNoY2xhc3MpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGluc2VydD4wKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSxcIua3u+WKoOaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1lbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSxcIua3u+WKoOWksei0pVwiLGJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIua3u+WKoOaVmeWtpuiuoeWIkuWSjOaVmeWtpuePreWFs+iBlOS/oeaBr+WHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOWIoOmZpFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtICBpZFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBEZWxldGVNYXBwaW5nKFwiL3tpZH1cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gZGVsZXRlKEBQYXRoVmFyaWFibGUgU3RyaW5nIGlkKSB7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCBkZWxldGUgPSBiYXNlVGVhY2hwbGFuVGVhY2hjbGFzc1NlcnZpY2UuZGVsZXRlQnlQcmltYXJ5S2V5KGlkKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChkZWxldGUgPT0gMSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5Yig6Zmk5oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLliKDpmaTlpLHotKVcIiwgaWQpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5Yig6Zmk5pWZ5a2m6K6h5YiS5ZKM5pWZ5a2m54+t5YWz6IGU5L+h5oGv5Ye66ZSZXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDkv67mlLlcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBiYXNlVGVhY2hwbGFuVGVhY2hjbGFzcyBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0IFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgUmVzcG9uc2VFbnRpdHk8Pz5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgQFB1dE1hcHBpbmdcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gdXBkYXRlKEJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzIGJhc2VUZWFjaHBsYW5UZWFjaGNsYXNzLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCkge1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpbnQgdXBkYXRlID0gYmFzZVRlYWNocGxhblRlYWNoY2xhc3NTZXJ2aWNlLnVwZGF0ZUJ5UHJpbWFyeUtleVNlbGVjdGl2ZShiYXNlVGVhY2hwbGFuVGVhY2hjbGFzcyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAodXBkYXRlID09IDEpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuS/ruaUueaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH0gZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsXCLkv67mlLnlpLHotKVcIixiYXNlVGVhY2hwbGFuVGVhY2hjbGFzcyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLkv67mlLnmlZnlraborqHliJLlkozmlZnlrabnj63lhbPogZTkv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAifVxuIiArCiAgICAgICAgICAgICAgICAicGFja2FnZSBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20ud2ViO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uZ2l0aHViLnBhZ2VoZWxwZXIuUGFnZUluZm87XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnJlc3BvbnNlLmhhb2xhbmdSZXR1cm47XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS5DbGFzc3Jvb21Nc2dSZXBseTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5LkNsYXNzcm9vbUNvZWZmaWNpZW50O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5lbnRpdHkuQ2xhc3Nyb29tQ29lZmZpY2llbnRFeGFtcGxlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5zZXJ2aWNlLkNsYXNzcm9vbUNvZWZmaWNpZW50U2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU9wZXJhdGlvbjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuZG9tYWluLlBhZ2VhYmxlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5kb21haW4uU29ydDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEud2ViLlBhZ2VhYmxlRGVmYXVsdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmh0dHAuUmVzcG9uc2VFbnRpdHk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLkNvbnRyb2xsZXI7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay51aS5Nb2RlbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5iaW5kLmFubm90YXRpb24uUmVxdWVzdE1hcHBpbmc7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLlJlcXVlc3RNZXRob2Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLlJlc3BvbnNlQm9keTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2Vzc2lvbjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZhLnV0aWwuRGF0ZTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIvKipcbiIgKwogICAgICAgICAgICAgICAgIiAqIEBEZXNjcmlwdGlvbjogICBDbGFzc3Jvb21Db2VmZmljaWVudOWunuS9k+exu1xuIiArCiAgICAgICAgICAgICAgICAiICogQEF1dGhvcjogICAgICAgICAg5b6Q5oiQXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ29tcGFueTogICAgICDkupHlnKjkv6Hmga9cbiIgKwogICAgICAgICAgICAgICAgIiAqIEBDcmVhdGVEYXRlOiAgICAgICAyMDE5LTItMTQgMTU6NTk6MjlcbiIgKwogICAgICAgICAgICAgICAgIiAqL1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJAQ29udHJvbGxlclxuIiArCiAgICAgICAgICAgICAgICAiQFJlcXVlc3RNYXBwaW5nKFwiL2NsYXNzcm9vbWNvZWZmaWNpZW50XCIpXG4iICsKICAgICAgICAgICAgICAgICJwdWJsaWMgY2xhc3MgQ2xhc3Nyb29tQ29lZmZpY2llbnRDb250cm9sbGVyIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HR0VSID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoQ2xhc3Nyb29tQ29lZmZpY2llbnRDb250cm9sbGVyLmNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBdXRvd2lyZWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIENsYXNzcm9vbUNvZWZmaWNpZW50U2VydmljZSBjbGFzc3Jvb21Db2VmZmljaWVudFNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog6L+b5YWl5Li76aG1XG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcmVxdWVzdCBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBzZXNzaW9uIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIG1vZGVsICAgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIGpzcOmhtemdoui3r+W+hFxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuR0VUKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBTdHJpbmcgaW5kZXgoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXNzaW9uIHNlc3Npb24sTW9kZWwgbW9kZWwpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgcmV0dXJuIFwidmlld3MvQ2xhc3Nyb29tQ29lZmZpY2llbnRcIjtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOafpeivouaJgOacieW5tuWIhumhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHBhZ2VyIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgICAgICBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBzZXNzaW9uICAgICAgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIOWIhumhteaVsOaNrlxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvcXVlcnlMaXN0Rm9yUGFnZVwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBPYmplY3QgcXVlcnlMaXN0Rm9yUGFnZShAUGFnZWFibGVEZWZhdWx0KHZhbHVlID0gMjAsIHNvcnQgPSB7XCJkaXNwbGF5X2luZGV4XCJ9LCBkaXJlY3Rpb24gPSBTb3J0LkRpcmVjdGlvbi5BU0MpIFBhZ2VhYmxlIHBhZ2VyLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbil7XG4iICsKICAgICAgICAgICAgICAgICIgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgQ2xhc3Nyb29tQ29lZmZpY2llbnRFeGFtcGxlIGV4YW1wbGUgPSBuZXcgQ2xhc3Nyb29tQ29lZmZpY2llbnRFeGFtcGxlKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIFBhZ2VJbmZvPENsYXNzcm9vbUNvZWZmaWNpZW50PiBwYWdlSW5mbz1jbGFzc3Jvb21Db2VmZmljaWVudFNlcnZpY2Uuc2VsZWN0QnlFeGFtcGxlKHBhZ2VyLGV4YW1wbGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgIC8vIGludCB0b3RhbD0oaW50KXBhZ2VJbmZvLmdldFRvdGFsKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vaygpLmJvZHkocGFnZUluZm8pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIExPR0dFUi5lcnJvcihcIuafpeivouivvueoi+WIhumhteWHuumUmSzplJnor6/kv6Hmga9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDmt7vliqBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBjbGFzc3Jvb21Db2VmZmljaWVudCBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBFeHRSZXR1cm5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9IFwiL2luc2VydFwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBpbnNlcnQoQ2xhc3Nyb29tQ29lZmZpY2llbnQgY2xhc3Nyb29tQ29lZmZpY2llbnQpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCBpbnNlcnQ9Y2xhc3Nyb29tQ29lZmZpY2llbnRTZXJ2aWNlLmluc2VydChjbGFzc3Jvb21Db2VmZmljaWVudCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoaW5zZXJ0ID4gMCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5re75Yqg5oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLmt7vliqDlpLHotKVcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLmt7vliqDkv6Hmga/lh7rplJlcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5Yig6ZmkXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gIGNsYXNzcm9vbUNvZWZmaWNpZW50XG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBFeHRSZXR1cm5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9IFwiL2RlbGV0ZVwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBkZWxldGUoQ2xhc3Nyb29tQ29lZmZpY2llbnQgY2xhc3Nyb29tQ29lZmZpY2llbnQpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCBkZWxldGUgPSBjbGFzc3Jvb21Db2VmZmljaWVudFNlcnZpY2UuZGVsZXRlQnlQcmltYXJ5S2V5KGNsYXNzcm9vbUNvZWZmaWNpZW50LmdldElkKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGRlbGV0ZSA9PSAxKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLliKDpmaTmiJDlip9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi5Yig6Zmk5aSx6LSlXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLliKDpmaTkv6Hmga/lh7rplJlcIiwgZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5L+u5pS5XG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gY2xhc3Nyb29tQ29lZmZpY2llbnQgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcmVxdWVzdCBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEByZXR1cm4gdGhlIEV4dFJldHVyblxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvdXBkYXRlXCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IHVwZGF0ZShDbGFzc3Jvb21Db2VmZmljaWVudCBjbGFzc3Jvb21Db2VmZmljaWVudCwgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCB1cGRhdGUgPSBjbGFzc3Jvb21Db2VmZmljaWVudFNlcnZpY2UudXBkYXRlQnlQcmltYXJ5S2V5U2VsZWN0aXZlKGNsYXNzcm9vbUNvZWZmaWNpZW50KTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmICh1cGRhdGUgPT0gMSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5L+u5pS55oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5L+u5pS55oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLkv67mlLnkv6Hmga/lh7rplJlcIiwgZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAifVxuIiArCiAgICAgICAgICAgICAgICAicGFja2FnZSBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20ud2ViO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uZ2l0aHViLnBhZ2VoZWxwZXIuUGFnZUluZm87XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2EuY29tbW9uLnJlc3BvbnNlLmhhb2xhbmdSZXR1cm47XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS5DbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS5DbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2VFeGFtcGxlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5zZXJ2aWNlLkNsYXNzcm9vbUNvdXJzZUFsbG93YW5jZVNlcnZpY2U7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlPcGVyYXRpb247XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLmRvbWFpbi5QYWdlYWJsZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuZG9tYWluLlNvcnQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLndlYi5QYWdlYWJsZURlZmF1bHQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5odHRwLlJlc3BvbnNlRW50aXR5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5Db250cm9sbGVyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudWkuTW9kZWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLlJlcXVlc3RNYXBwaW5nO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXF1ZXN0TWV0aG9kO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXNwb25zZUJvZHk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlc3Npb247XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgKiBARGVzY3JpcHRpb246ICAgQ2xhc3Nyb29tQ291cnNlQWxsb3dhbmNl5a6e5L2T57G7XG4iICsKICAgICAgICAgICAgICAgICIgKiBAQXV0aG9yOiAgICAgICAgICDlvpDmiJBcbiIgKwogICAgICAgICAgICAgICAgIiAqIEBDb21wYW55OiAgICAgIOS6keWcqOS/oeaBr1xuIiArCiAgICAgICAgICAgICAgICAiICogQENyZWF0ZURhdGU6ICAgICAgIDIwMTktMi0xNCAxNjoyOToxOFxuIiArCiAgICAgICAgICAgICAgICAiICovXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIkBDb250cm9sbGVyXG4iICsKICAgICAgICAgICAgICAgICJAUmVxdWVzdE1hcHBpbmcoXCIvY2xhc3Nyb29tY291cnNlYWxsb3dhbmNlXCIpXG4iICsKICAgICAgICAgICAgICAgICJwdWJsaWMgY2xhc3MgQ2xhc3Nyb29tQ291cnNlQWxsb3dhbmNlQ29udHJvbGxlciB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPR0dFUiA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKENsYXNzcm9vbUNvdXJzZUFsbG93YW5jZUNvbnRyb2xsZXIuY2xhc3MpO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEF1dG93aXJlZFxuIiArCiAgICAgICAgICAgICAgICAiICAgIHByaXZhdGUgQ2xhc3Nyb29tQ291cnNlQWxsb3dhbmNlU2VydmljZSBjbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2VTZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOi/m+WFpeS4u+mhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gc2Vzc2lvbiBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBtb2RlbCAgIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiBqc3DpobXpnaLot6/lvoRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyhtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLkdFVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgU3RyaW5nIGluZGV4KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uLE1vZGVsIG1vZGVsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBcInZpZXdzL0NsYXNzcm9vbUNvdXJzZUFsbG93YW5jZVwiO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5p+l6K+i5omA5pyJ5bm25YiG6aG1XG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcGFnZXIgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcmVxdWVzdCAgICAgIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHNlc3Npb24gICAgICBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEByZXR1cm4g5YiG6aG15pWw5o2uXG4iICsKICAgICAgICAgICAgICAgICIgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVxdWVzdE1hcHBpbmcodmFsdWUgPSBcIi9xdWVyeUxpc3RGb3JQYWdlXCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIE9iamVjdCBxdWVyeUxpc3RGb3JQYWdlKEBQYWdlYWJsZURlZmF1bHQodmFsdWUgPSAyMCwgc29ydCA9IHtcImRpc3BsYXlfaW5kZXhcIn0sIGRpcmVjdGlvbiA9IFNvcnQuRGlyZWN0aW9uLkFTQykgUGFnZWFibGUgcGFnZXIsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBDbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2VFeGFtcGxlIGV4YW1wbGUgPSBuZXcgQ2xhc3Nyb29tQ291cnNlQWxsb3dhbmNlRXhhbXBsZSgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBQYWdlSW5mbzxDbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2U+IHBhZ2VJbmZvPWNsYXNzcm9vbUNvdXJzZUFsbG93YW5jZVNlcnZpY2Uuc2VsZWN0QnlFeGFtcGxlKCBwYWdlcixleGFtcGxlKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgIC8vICBpbnQgdG90YWw9KGludClwYWdlSW5mby5nZXRUb3RhbCgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gUmVzcG9uc2VFbnRpdHkub2soKS5ib2R5KHBhZ2VJbmZvKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICBMT0dHRVIuZXJyb3IoXCLmn6Xor6Lor77nqIvliIbpobXlh7rplJks6ZSZ6K+v5L+h5oGvXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICog5re75YqgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gY2xhc3Nyb29tQ291cnNlQWxsb3dhbmNlIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gc2Vzc2lvbiBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEByZXR1cm4gdGhlIEV4dFJldHVyblxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvaW5zZXJ0XCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGluc2VydChDbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2UgY2xhc3Nyb29tQ291cnNlQWxsb3dhbmNlLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbikge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGluc2VydD1jbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2VTZXJ2aWNlLmluc2VydChjbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2UpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGluc2VydD4wKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLmt7vliqDmiJDlip9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9ZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQoZmFsc2UsIFwi5re75Yqg5aSx6LSlXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5re75Yqg5L+h5oGv5Ye66ZSZXCIsIGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDliKDpmaRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSAgY2xhc3Nyb29tQ291cnNlQWxsb3dhbmNlXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBFeHRSZXR1cm5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9IFwiL2RlbGV0ZVwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBkZWxldGUoQ2xhc3Nyb29tQ291cnNlQWxsb3dhbmNlIGNsYXNzcm9vbUNvdXJzZUFsbG93YW5jZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGRlbGV0ZSA9IGNsYXNzcm9vbUNvdXJzZUFsbG93YW5jZVNlcnZpY2UuZGVsZXRlQnlQcmltYXJ5S2V5KGNsYXNzcm9vbUNvdXJzZUFsbG93YW5jZS5nZXRJZCgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChkZWxldGUgPT0gMSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5Yig6Zmk5oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIuWIoOmZpOWksei0pVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5Yig6Zmk5L+h5oGv5Ye66ZSZXCIsIGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgdGhyb3cgZTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDkv67mlLlcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBjbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2UgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcmVxdWVzdCBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEByZXR1cm4gdGhlIEV4dFJldHVyblxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvdXBkYXRlXCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IHVwZGF0ZShDbGFzc3Jvb21Db3Vyc2VBbGxvd2FuY2UgY2xhc3Nyb29tQ291cnNlQWxsb3dhbmNlLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IHVwZGF0ZSA9IGNsYXNzcm9vbUNvdXJzZUFsbG93YW5jZVNlcnZpY2UudXBkYXRlQnlQcmltYXJ5S2V5U2VsZWN0aXZlKGNsYXNzcm9vbUNvdXJzZUFsbG93YW5jZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAodXBkYXRlID09IDEpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuS/ruaUueaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLkv67mlLnlpLHotKVcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIuS/ruaUueS/oeaBr+WHuumUmVwiLCBlKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJ9XG4iICsKICAgICAgICAgICAgICAgICJwYWNrYWdlIGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS53ZWI7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5naXRodWIucGFnZWhlbHBlci5QYWdlSW5mbztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24ucmVzcG9uc2UuaGFvbGFuZ1JldHVybjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5LkNsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnM7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgY29tLmhhb2xhbmduZm8ub2Eub25saW5lY2xhc3Nyb29tLmVudGl0eS5DbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzRXhhbXBsZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uc2VydmljZS5DbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU9wZXJhdGlvbjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuZG9tYWluLlBhZ2VhYmxlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5kb21haW4uU29ydDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEud2ViLlBhZ2VhYmxlRGVmYXVsdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmh0dHAuUmVzcG9uc2VFbnRpdHk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLkNvbnRyb2xsZXI7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay51aS5Nb2RlbDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLndlYi5iaW5kLmFubm90YXRpb24uKjtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXNzaW9uO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGphdmEudXRpbC5EYXRlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIi8qKlxuIiArCiAgICAgICAgICAgICAgICAiICogQERlc2NyaXB0aW9uOiAgIENsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnPlrp7kvZPnsbtcbiIgKwogICAgICAgICAgICAgICAgIiAqIEBBdXRob3I6ICAgICAgICAgIOW+kOaIkFxuIiArCiAgICAgICAgICAgICAgICAiICogQENvbXBhbnk6ICAgICAg5LqR5Zyo5L+h5oGvXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ3JlYXRlRGF0ZTogICAgICAgMjAxOS0zLTggMTE6NDM6MzNcbiIgKwogICAgICAgICAgICAgICAgIiAqL1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJAQ29udHJvbGxlclxuIiArCiAgICAgICAgICAgICAgICAiQFJlcXVlc3RNYXBwaW5nKFwiL2NsYXNzcm9vbWV4dGVybmFsdGVhY2hlcnNcIilcbiIgKwogICAgICAgICAgICAgICAgInB1YmxpYyBjbGFzcyBDbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzQ29udHJvbGxlciB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPR0dFUiA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKENsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnNDb250cm9sbGVyLmNsYXNzKTtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBdXRvd2lyZWRcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwcml2YXRlIENsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnNTZXJ2aWNlIGNsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnNTZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOi/m+WFpeS4u+mhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gc2Vzc2lvbiBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBtb2RlbCAgIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiBqc3DpobXpnaLot6/lvoRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyhtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLkdFVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgU3RyaW5nIGluZGV4KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uLE1vZGVsIG1vZGVsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBcInZpZXdzL0NsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnNcIjtcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOafpeivouaJgOacieW5tuWIhumhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHBhZ2VyIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgICAgICBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBzZXNzaW9uICAgICAgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIOWIhumhteaVsOaNrlxuIiArCiAgICAgICAgICAgICAgICAiICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvcXVlcnlMaXN0Rm9yUGFnZVwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBPYmplY3QgcXVlcnlMaXN0Rm9yUGFnZShAUGFnZWFibGVEZWZhdWx0KHZhbHVlID0gMjAsIHNvcnQgPSB7XCJkaXNwbGF5X2luZGV4XCJ9LCBkaXJlY3Rpb24gPSBTb3J0LkRpcmVjdGlvbi5BU0MpIFBhZ2VhYmxlIHBhZ2VyLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbil7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBDbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzRXhhbXBsZSBleGFtcGxlID0gbmV3IENsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnNFeGFtcGxlKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBQYWdlSW5mbzxDbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzPiBwYWdlSW5mbz1jbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzU2VydmljZS5zZWxlY3RCeUV4YW1wbGUoIHBhZ2VyLGV4YW1wbGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgLy8gIGludCB0b3RhbD0oaW50KXBhZ2VJbmZvLmdldFRvdGFsKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICByZXR1cm4gUmVzcG9uc2VFbnRpdHkub2soKS5ib2R5KHBhZ2VJbmZvKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIuafpeivouivvueoi+WIhumhteWHuumUmSzplJnor6/kv6Hmga9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOa3u+WKoFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIGNsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnMgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gcmVxdWVzdCBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBzZXNzaW9uIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgRXh0UmV0dXJuXG4iICsKICAgICAgICAgICAgICAgICIgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUG9zdE1hcHBpbmcodmFsdWUgPSBcIi9pbnNlcnRcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLmlrDlop7kv67mraPmraPluLjor77ml7blt6XkvZzph49cIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8Pz4gaW5zZXJ0KEBSZXF1ZXN0Qm9keSBDbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzIGNsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnMsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBTdHJpbmcgaGJzbCA9IGNsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnMuZ2V0SGJzbCgpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGhic2wgIT0gbnVsbCl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgaWYgKGhic2wuZXF1YWxzKFwi5LiA5Liq54+tXCIpKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgY2xhc3Nyb29tRXh0ZXJuYWxUZWFjaGVycy5zZXRIYnNsKFwiMVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICB9ZWxzZSBpZiAoaGJzbC5lcXVhbHMoXCLkuozkuKrnj61cIikpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICBjbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzLnNldEhic2woXCIyXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIH1lbHNlIGlmIChoYnNsLmVxdWFscyhcIuS4ieS4quePrVwiKSl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIGNsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnMuc2V0SGJzbChcIjNcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgY2xhc3Nyb29tRXh0ZXJuYWxUZWFjaGVycy5zZXRDcmVhdGVEYXRlKG5ldyBEYXRlKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGluc2VydD1jbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzU2VydmljZS5pbnNlcnQoY2xhc3Nyb29tRXh0ZXJuYWxUZWFjaGVycyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAoaW5zZXJ0PjApIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIua3u+WKoOaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1lbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLmt7vliqDlpLHotKVcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLmt7vliqDkv6Hmga/lh7rplJlcIiwgZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOWIoOmZpFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtICBjbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBFeHRSZXR1cm5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvZGVsZXRlXCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGRlbGV0ZShDbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzIGNsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnMpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCBkZWxldGUgPSBjbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzU2VydmljZS5kZWxldGVCeVByaW1hcnlLZXkoY2xhc3Nyb29tRXh0ZXJuYWxUZWFjaGVycy5nZXRJZCgpKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChkZWxldGUgPT0gMSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5Yig6Zmk5oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZChmYWxzZSwgXCLliKDpmaTlpLHotKVcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLliKDpmaTkv6Hmga/lh7rplJlcIiwgZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDkv67mlLlcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBjbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBFeHRSZXR1cm5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuS/ruaUueS/ruato+ato+W4uOivvuaXtuW3peS9nOmHj1wiKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBQdXRNYXBwaW5nKHZhbHVlID0gXCIvdXBkYXRlXCIpXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IHVwZGF0ZShAUmVxdWVzdEJvZHkgQ2xhc3Nyb29tRXh0ZXJuYWxUZWFjaGVycyBjbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgU3RyaW5nIGhic2wgPSBjbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzLmdldEhic2woKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChoYnNsICE9IG51bGwpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIGlmIChoYnNsLmVxdWFscyhcIuS4gOS4quePrVwiKSl7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgICAgIGNsYXNzcm9vbUV4dGVybmFsVGVhY2hlcnMuc2V0SGJzbChcIjFcIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgfWVsc2UgaWYgKGhic2wuZXF1YWxzKFwi5LqM5Liq54+tXCIpKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICAgICAgY2xhc3Nyb29tRXh0ZXJuYWxUZWFjaGVycy5zZXRIYnNsKFwiMlwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICB9ZWxzZSBpZiAoaGJzbC5lcXVhbHMoXCLkuInkuKrnj61cIikpe1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgICAgICBjbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzLnNldEhic2woXCIzXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCB1cGRhdGUgPSBjbGFzc3Jvb21FeHRlcm5hbFRlYWNoZXJzU2VydmljZS51cGRhdGVCeVByaW1hcnlLZXlTZWxlY3RpdmUoY2xhc3Nyb29tRXh0ZXJuYWxUZWFjaGVycyk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAodXBkYXRlID09IDEpIHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKHRydWUsIFwi5L+u5pS55oiQ5YqfXCIpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgfSBlbHNlIHtcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIuS/ruaUueWksei0pVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIuS/ruaUueS/oeaBr+WHuumUmVwiLCBlKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJ9XG4iICsKICAgICAgICAgICAgICAgICJwYWNrYWdlIGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS53ZWI7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5naXRodWIucGFnZWhlbHBlci5QYWdlSW5mbztcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5jb21tb24ucmVzcG9uc2UuaGFvbGFuZ1JldHVybjtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBjb20uaGFvbGFuZ25mby5vYS5vbmxpbmVjbGFzc3Jvb20uZW50aXR5LkNsYXNzcm9vbVJlcGFpcnNUeXBlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5lbnRpdHkuQ2xhc3Nyb29tUmVwYWlyc1R5cGVFeGFtcGxlO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IGNvbS5oYW9sYW5nbmZvLm9hLm9ubGluZWNsYXNzcm9vbS5zZXJ2aWNlLkNsYXNzcm9vbVJlcGFpcnNUeXBlU2VydmljZTtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuZG9tYWluLlNvcnQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5kYXRhLndlYi5QYWdlYWJsZURlZmF1bHQ7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5odHRwLlJlc3BvbnNlRW50aXR5O1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5Db250cm9sbGVyO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudWkuTW9kZWw7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLkdldE1hcHBpbmc7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLlJlcXVlc3RNYXBwaW5nO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXF1ZXN0TWV0aG9kO1xuIiArCiAgICAgICAgICAgICAgICAiaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi5SZXNwb25zZUJvZHk7XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbiIgKwogICAgICAgICAgICAgICAgImltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlc3Npb247XG4iICsKICAgICAgICAgICAgICAgICJpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiLyoqXG4iICsKICAgICAgICAgICAgICAgICIgKiBARGVzY3JpcHRpb246ICAgQ2xhc3Nyb29tUmVwYWlyc1R5cGXlrp7kvZPnsbtcbiIgKwogICAgICAgICAgICAgICAgIiAqIEBBdXRob3I6ICAgICAgICAgIOW+kOaIkFxuIiArCiAgICAgICAgICAgICAgICAiICogQENvbXBhbnk6ICAgICAg5LqR5Zyo5L+h5oGvXG4iICsKICAgICAgICAgICAgICAgICIgKiBAQ3JlYXRlRGF0ZTogICAgICAgMjAxOS0yLTE5IDEyOjAzOjQ1XG4iICsKICAgICAgICAgICAgICAgICIgKi9cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiQENvbnRyb2xsZXJcbiIgKwogICAgICAgICAgICAgICAgIkBSZXF1ZXN0TWFwcGluZyhcIi9jbGFzc3Jvb21yZXBhaXJzdHlwZVwiKVxuIiArCiAgICAgICAgICAgICAgICAicHVibGljIGNsYXNzIENsYXNzcm9vbVJlcGFpcnNUeXBlQ29udHJvbGxlciB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPR0dFUiA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKENsYXNzcm9vbVJlcGFpcnNUeXBlQ29udHJvbGxlci5jbGFzcyk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAQXV0b3dpcmVkXG4iICsKICAgICAgICAgICAgICAgICIgICAgcHJpdmF0ZSBDbGFzc3Jvb21SZXBhaXJzVHlwZVNlcnZpY2UgY2xhc3Nyb29tUmVwYWlyc1R5cGVTZXJ2aWNlO1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOi/m+WFpeS4u+mhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtIHJlcXVlc3QgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gc2Vzc2lvbiBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBtb2RlbCAgIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiBqc3DpobXpnaLot6/lvoRcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyhtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLkdFVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgU3RyaW5nIGluZGV4KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2Vzc2lvbiBzZXNzaW9uLE1vZGVsIG1vZGVsKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHJldHVybiBcInZpZXdzL0NsYXNzcm9vbVJlcGFpcnNUeXBlXCI7XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDmn6Xor6LmiYDmnInlubbliIbpobVcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBwYWdlciBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0ICAgICAgXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcGFyYW0gc2Vzc2lvbiAgICAgIFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiDliIbpobXmlbDmja5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9IFwiL3F1ZXJ5TGlzdEZvclBhZ2VcIiwgbWV0aG9kID0gUmVxdWVzdE1ldGhvZC5QT1NUKVxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXNwb25zZUJvZHlcbiIgKwogICAgICAgICAgICAgICAgIiAgICBwdWJsaWMgT2JqZWN0IHF1ZXJ5TGlzdEZvclBhZ2UoQFBhZ2VhYmxlRGVmYXVsdCh2YWx1ZSA9IDIwLCBzb3J0ID0ge1wiZGlzcGxheV9pbmRleFwifSwgZGlyZWN0aW9uID0gU29ydC5EaXJlY3Rpb24uQVNDKSBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuZG9tYWluLlBhZ2VhYmxlIHBhZ2VyLCBIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlc3Npb24gc2Vzc2lvbil7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBDbGFzc3Jvb21SZXBhaXJzVHlwZUV4YW1wbGUgZXhhbXBsZSA9IG5ldyBDbGFzc3Jvb21SZXBhaXJzVHlwZUV4YW1wbGUoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIFBhZ2VJbmZvPENsYXNzcm9vbVJlcGFpcnNUeXBlPiBwYWdlSW5mbz1jbGFzc3Jvb21SZXBhaXJzVHlwZVNlcnZpY2Uuc2VsZWN0QnlFeGFtcGxlKHBhZ2VyLGV4YW1wbGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgLy8gaW50IHRvdGFsPShpbnQpcGFnZUluZm8uZ2V0VG90YWwoKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vaygpLmJvZHkocGFnZUluZm8pO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgTE9HR0VSLmVycm9yKFwi5p+l6K+i6K++56iL5YiG6aG15Ye66ZSZLOmUmeivr+S/oeaBr1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIC8qKlxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIOafpeivouaJgOacieW5tuWIhumhtVxuIiArCiAgICAgICAgICAgICAgICAiICAgICAqIEByZXR1cm4g5YiG6aG15pWw5o2uXG4iICsKICAgICAgICAgICAgICAgICIgICAgICovXG4iICsKICAgICAgICAgICAgICAgICIgICAgQEdldE1hcHBpbmcodmFsdWUgPSBcIi9xdWVyeUxpc3RcIilcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIE9iamVjdCBxdWVyeUxpc3QoKXtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgQ2xhc3Nyb29tUmVwYWlyc1R5cGVFeGFtcGxlIGV4YW1wbGUgPSBuZXcgQ2xhc3Nyb29tUmVwYWlyc1R5cGVFeGFtcGxlKCk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIExpc3Q8Q2xhc3Nyb29tUmVwYWlyc1R5cGU+IGxpc3QgPSBjbGFzc3Jvb21SZXBhaXJzVHlwZVNlcnZpY2Uuc2VsZWN0QnlFeGFtcGxlQWxsKGV4YW1wbGUpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLFwi5p+l6K+i5oiQ5YqfXCIsbGlzdCk7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDmt7vliqBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBjbGFzc3Jvb21SZXBhaXJzVHlwZSBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiBAcmV0dXJuIHRoZSBFeHRSZXR1cm5cbiIgKwogICAgICAgICAgICAgICAgIiAgICAqL1xuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlcXVlc3RNYXBwaW5nKHZhbHVlID0gXCIvaW5zZXJ0XCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuUE9TVClcbiIgKwogICAgICAgICAgICAgICAgIiAgICBAUmVzcG9uc2VCb2R5XG4iICsKICAgICAgICAgICAgICAgICIgICAgcHVibGljIFJlc3BvbnNlRW50aXR5PD8+IGluc2VydChDbGFzc3Jvb21SZXBhaXJzVHlwZSBjbGFzc3Jvb21SZXBhaXJzVHlwZSkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB0cnkge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaW50IGluc2VydD1jbGFzc3Jvb21SZXBhaXJzVHlwZVNlcnZpY2UuaW5zZXJ0KGNsYXNzcm9vbVJlcGFpcnNUeXBlKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGlmIChpbnNlcnQgPiAwKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLmt7vliqDmiJDlip9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9IGVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIua3u+WKoOWksei0pVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIua3u+WKoOS/oeaBr+WHuumUmVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICB9XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAvKipcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIOWIoOmZpFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHBhcmFtICBjbGFzc3Jvb21SZXBhaXJzVHlwZVxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgRXh0UmV0dXJuXG4iICsKICAgICAgICAgICAgICAgICIgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9IFwiL2RlbGV0ZVwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiBkZWxldGUoQ2xhc3Nyb29tUmVwYWlyc1R5cGUgY2xhc3Nyb29tUmVwYWlyc1R5cGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgdHJ5IHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIGludCBkZWxldGUgPSBjbGFzc3Jvb21SZXBhaXJzVHlwZVNlcnZpY2UuZGVsZXRlQnlQcmltYXJ5S2V5KGNsYXNzcm9vbVJlcGFpcnNUeXBlLmdldElkKCkpO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgaWYgKGRlbGV0ZSA9PSAxKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLliKDpmaTmiJDlip9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9IGVsc2Uge1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICAgICAgICAgIHJldHVybiBoYW9sYW5nUmV0dXJuLmJ1aWxkKGZhbHNlLCBcIuWIoOmZpOWksei0pVwiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIExPR0dFUi5lcnJvcihcIuWIoOmZpOS/oeaBr+WHuumUmVwiLCBlKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIHRocm93IGU7XG4iICsKICAgICAgICAgICAgICAgICJcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgfVxuIiArCiAgICAgICAgICAgICAgICAiICAgIH1cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiXG4iICsKICAgICAgICAgICAgICAgICIgICAgLyoqXG4iICsKICAgICAgICAgICAgICAgICIgICAgKiDkv67mlLlcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSBjbGFzc3Jvb21SZXBhaXJzVHlwZSBcbiIgKwogICAgICAgICAgICAgICAgIiAgICAqIEBwYXJhbSByZXF1ZXN0IFxuIiArCiAgICAgICAgICAgICAgICAiICAgICogQHJldHVybiB0aGUgRXh0UmV0dXJuXG4iICsKICAgICAgICAgICAgICAgICIgICAgKi9cbiIgKwogICAgICAgICAgICAgICAgIlxuIiArCiAgICAgICAgICAgICAgICAiICAgIEBSZXF1ZXN0TWFwcGluZyh2YWx1ZSA9IFwiL3VwZGF0ZVwiLCBtZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1QpXG4iICsKICAgICAgICAgICAgICAgICIgICAgQFJlc3BvbnNlQm9keVxuIiArCiAgICAgICAgICAgICAgICAiICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTw/PiB1cGRhdGUoQ2xhc3Nyb29tUmVwYWlyc1R5cGUgY2xhc3Nyb29tUmVwYWlyc1R5cGUsIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0KSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIHRyeSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpbnQgdXBkYXRlID0gY2xhc3Nyb29tUmVwYWlyc1R5cGVTZXJ2aWNlLnVwZGF0ZUJ5UHJpbWFyeUtleVNlbGVjdGl2ZShjbGFzc3Jvb21SZXBhaXJzVHlwZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBpZiAodXBkYXRlID09IDEpIHtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgICAgICByZXR1cm4gaGFvbGFuZ1JldHVybi5idWlsZCh0cnVlLCBcIuS/ruaUueaIkOWKn1wiKTtcbiIgKwogICAgICAgICAgICAgICAgIiAgICAgICAgICAgIH0gZWxzZSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICAgICAgcmV0dXJuIGhhb2xhbmdSZXR1cm4uYnVpbGQodHJ1ZSwgXCLkv67mlLnmiJDlip9cIik7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICBMT0dHRVIuZXJyb3IoXCLkv67mlLnkv6Hmga/lh7rplJlcIiwgZSk7XG4iICsKICAgICAgICAgICAgICAgICIgICAgICAgICAgICB0aHJvdyBlO1xuIiArCiAgICAgICAgICAgICAgICAiICAgICAgICB9XG4iICsKICAgICAgICAgICAgICAgICIgICAgfVxuIiArCiAgICAgICAgICAgICAgICAifVxuIjsKICAgICAgICBTdHJpbmcgYiA9IGEucmVwbGFjZUFsbCgiKChcclxuKXxcbilbXFxzXHQgXSooXFwxKSsiLCAiJDEiKS5yZXBsYWNlQWxsKCJeKChcclxuKXxcbikiLCAiIik7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKGIpOwoKICAgIH0=</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">ICAgICAgICAgICAgCg==</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">ICAgICAgICBhbmQgdXNlcl9pZCBpbiAoc2VsZWN0IHVzZXJfaWQgYXMgaWQgZnJvbSBzcGF1dGgudl90ZWFjaGVyX2Jhc2UgdW5pb24gKCBzZWxlY3Qgc3R1ZGVudF9pZCBhcyBpZCBmcm9tCiAgICAgICAgc3BhdXRoLnZfc3R1ZGVudF9iYXNlKSkK</text>
      </register>
      <register name="8" type="4">
        <text encoding="base64">PERlcHRVc2VyVGFza0F1ZGl0TW9kYWwKICAgICAgICAgIGxvYWRpbmc9e3RoaXMucHJvcHMubG9hZGluZ30KICAgICAgICAgIG1vZGFsVmlzaWJsZT17dGhpcy5zdGF0ZS5tb2RhbFZpc2libGV9CiAgICAgICAgICBoYW5kbGVNb2RhbFZpc2libGU9e3RoaXMuaGFuZGxlTW9kYWxWaXNpYmxlfQogICAgICAgICAgdHlwZT17NH0KICAgICAgICAgIHRpdGxlPXt0aGlzLnN0YXRlLmF1ZGl0VGl0bGV9CiAgICAgICAgLz4=</text>
      </register>
      <register name="9" type="4">
        <text>if(!objects.contains((String)xm)){
                
            }</text>
      </register>
      <register name=":" type="4">
        <text>q</text>
      </register>
      <register name="-" type="4">
        <text>{getFieldDecorator('name')(</text>
      </register>
    </registers>
    <search>
      <last-dir>0</last-dir>
      <show-last>true</show-last>
    </search>
    <history>
      <history-search />
      <history-cmd>
        <entry>action Find</entry>
        <entry>wq</entry>
        <entry>q</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed L</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
</application>